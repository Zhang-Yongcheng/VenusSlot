window.__require=function e(t,n,r){function o(a,i){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!i&&u)return u(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){return o(t[a][1][e]||e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({BaseCmdLogic:[function(e,t){"use strict";cc._RF.push(t,"a7b33Aw/vZIZ6OEZyILO7+Z","BaseCmdLogic");var n,r=e("./observable.cc").Observable,o=e("./Photon-Javascript_SDK"),s=e("./Photon_Interface");e("PublicSetUp"),function(e){r();var t=function(){function e(e){this._pi=e,this._lbSrvObj=null,this._account="",this._password=""}return e.prototype.RunLogin=function(e,t,n){this._account=e,this._password=t,this._type=n,this._pi.InitCallbackFunction(this,this.PeerStatusCallback,this.ResponseCallback,this.EventCallback),this._pi.connect()},e.prototype.SetLbSrvCmdLogicObj=function(e){this._lbSrvObj=e},e.prototype.PeerStatusCallback=function(e,t){switch(e){case o.PhotonPeer.StatusCodes.connect:t._pi.sendData(101,t._account,t._password,t._type,0,"",999)}},e.prototype.ResponseCallback=function(e){switch(e[0]){case 101:if(1==e[1]);else switch(e[1]){case 0:console.log("\u767b\u5165Main Srv\u5931\u6557");break;case 2:console.log("\u767b\u5165Main Srv\u7248\u672c\u932f\u8aa4");break;case 3:console.log("Main Srv\u7dad\u8b77\u4e2d");break;case 4:console.log("Main Srv\u91cd\u8907\u767b\u5165");break;case 5:console.log("\u4e4b\u524d\u904a\u6232\u5c40\u5c1a\u672a\u7d50\u675f");break;case 6:console.log("\u6c92\u6709\u9032\u884c\u904a\u6232\u7684\u6b0a\u9650")}}},e.prototype.EventCallback=function(e,t){switch(e[0]){case 102:t._lbSrvObj.ConnectToServer(e[1],e[2],e[3],e[4],e[5])}},e}();e.MainSrvCmdLogic=t;var n=function(){function e(e,t){this._pi=null,this._gameid=e,this._versioncode=t,this._loginId=0,this._loginKey=0,this._gameSrvObj=null,this._protocolType=0}return e.prototype.ConnectToServer=function(e,t,n,r,a){this._loginId=e,this._loginKey=t,this._protocolType=n,3==n?this._pi=new s.PhotonIf(o.ConnectionProtocol.Ws,r+":"+a):5==n&&(this._pi=new s.PhotonIf(o.ConnectionProtocol.Wss,r+":"+a)),null!=this._pi&&(this._pi.InitCallbackFunction(this,this.PeerStatusCallback,this.ResponseCallback,this.EventCallback),this._pi.connect())},e.prototype.SetGameSrvCmdLogicObj=function(e){this._gameSrvObj=e},e.prototype.PeerStatusCallback=function(e,t){switch(e){case o.PhotonPeer.StatusCodes.connect:t._pi.sendData(101,t._loginId,t._loginKey)}},e.prototype.ResponseCallback=function(e,t){switch(e[0]){case 102:if(1==e[1])t._pi.sendData(103,t._gameid,-1,-1,t._versioncode);else switch(e[1]){case 0:console.log("\u767b\u5165LB Srv \u5931\u6557");break;case 2:console.log("\u767b\u5165LB Srv\u7248\u672c\u932f\u8aa4");break;case 3:console.log("LB Srv \u7dad\u8b77\u4e2d")}break;case 103:if(1==e[5])t._gameSrvObj.ConnectToServer(e[1],e[2],t._protocolType,e[3],e[4]);else switch(e[5]){case 0:console.log("\u52a0\u5165game server\u904a\u6232\u5c40\u932f\u8aa4");break;case 2:console.log("Game Srv \u904a\u6232\u7dad\u8b77\u4e2d");break;case 3:console.log("\u8981\u6c42\u52a0\u5165Game Srv \u7248\u672c\u932f\u8aa4")}break;case 104:if(1!=e[1])switch(e[1]){case-1:console.log("\u5efa\u7acb\u623f\u9593\u5931\u6557");break;case 0:console.log("\u52a0\u5165\u904a\u6232\u932f\u8aa4");break;case 2:console.log("\u9ede\u6578\u4e0d\u8db3");break;case 3:console.log("\u6c92\u6709\u9032\u884c\u904a\u6232\u7684\u6b0a\u9650");break;case 4:console.log("\u7121\u53ef\u7528\u623f\u9593");break;case 5:console.log("\u6b64\u73a9\u5bb6\u4e4b\u524d\u904a\u6232\u5c40\u672a\u7d50\u675f")}}console.log("ls response, cmd:"+e[0])},e.prototype.EventCallback=function(e){console.log("ls event, cmd:"+e[0])},e}();e.LobbySrvCmdLogic=n;var a=function(){function e(e){this._pi=null,this._GameCmdFuncObj=null,this._loginId=0,this._loginKey=0,this._GameObj=e}return e.prototype.ConnectToServer=function(e,t,n,r,a){console.log("connect to gs loginId:"+e+", loginKey:"+t+", protocolType:"+n+", ip:"+r+", port:"+a),this._loginId=e,this._loginKey=t,3==n?this._pi=new s.PhotonIf(o.ConnectionProtocol.Ws,r+":"+a):5==n&&(this._pi=new s.PhotonIf(o.ConnectionProtocol.Wss,r+":"+a)),null!=this._pi&&(this._pi.InitCallbackFunction(this,this.PeerStatusCallback,this.ResponseCallback,this.EventCallback),this._pi.connect())},e.prototype.PeerStatusCallback=function(e,t){switch(e){case o.PhotonPeer.StatusCodes.connect:t._pi.sendData(101,t._loginId,t._loginKey)}},e.prototype.ResponseCallback=function(e,t){switch(console.log("gs response, cmd:"+e[0]),e[0]){case 111:t._pi.sendData(3161);break;default:t._GameCmdFuncObj(e,t._pi,t._GameObj)}},e.prototype.EventCallback=function(e){console.log("gs event, cmd:"+e[0])},e.prototype.SetGameCmdFunc=function(e){this._GameCmdFuncObj=e},e.prototype.GetPI=function(){return this._pi},e}();e.GameSrvBaseCmdLogic=a}(n||(n={})),t.exports=n,cc._RF.pop()},{"./Photon-Javascript_SDK":"Photon-Javascript_SDK","./Photon_Interface":"Photon_Interface","./observable.cc":"observable.cc",PublicSetUp:"PublicSetUp"}],LoginScene:[function(e,t){"use strict";cc._RF.push(t,"ef982lYOk5KN6pGFtYS93Kz","LoginScene");var n=e("PublicSetUp");cc.Class({extends:cc.Component,properties:{AudioClip:{default:[],type:[cc.AudioClip]}},onLoad:function(){n.audio1=this.AudioClip[0]},start:function(){var e=location.href;if(null!=new URL(e).searchParams.get("WebToken"))return cc.find("Canvas/Login").active=!1,void cc.director.loadScene("slot");var t=cc.find("Canvas/Login/Account").getComponent(cc.EditBox),r=cc.find("Canvas/Login/Password").getComponent(cc.EditBox);cc.find("Canvas/Login/message").getComponent(cc.Label),t.string="gtest001",r.string="gtest001",cc.find("Canvas/Login/Ok").getComponent(cc.Button).node.on("click",function(){0!==t.string.length&&0!==r.string.length&&(n.loginType=0,n.account=t.string,n.password=r.string,cc.find("Canvas/lock").active=!0,cc.director.loadScene("slot"))})}}),cc._RF.pop()},{PublicSetUp:"PublicSetUp"}],"Photon-Javascript_SDK":[function(e,t){"use strict";cc._RF.push(t,"b3e2fCQxetN24gGB83KHjgJ","Photon-Javascript_SDK");var n,r,o,s=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});(function(e){(function(e){var t=function(){function e(t,n){void 0===t&&(t=""),void 0===n&&(n=e.Level.INFO),this.prefix=t,this.level=n}return e.prototype.setPrefix=function(e){this.prefix=e},e.prototype.getPrefix=function(){return this.prefix},e.prototype.setLevel=function(t){t=Math.max(t,e.Level.DEBUG),t=Math.min(t,e.Level.OFF),this.level=t},e.setExceptionHandler=function(e){this.exceptionHandler=e},e.prototype.isLevelEnabled=function(e){return e>=this.level},e.prototype.getLevel=function(){return this.level},e.prototype.debug=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(e.Level.DEBUG,t,n)},e.prototype.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(e.Level.INFO,t,n)},e.prototype.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(e.Level.WARN,t,n)},e.prototype.error=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(e.Level.ERROR,t,n)},e.prototype.exception=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(!e.exceptionHandler||!e.exceptionHandler(t,this.format0(n,r)))throw new Error(this.format0("["+t+"] "+n,r))},e.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.format0(e,t)},e.prototype.formatArr=function(e,t){return this.format0(e,t)},e.prototype.log=function(t,n,r){if(t>=this.level&&"undefined"!=typeof console&&void 0!==n)try{var o=console[e.log_types[t]];o||(o=console.log),o&&o.apply(console,[this.prefix,n].concat(r))}catch(s){}},e.prototype.format0=function(e,t){return(""==this.prefix?"":this.prefix+" ")+e+" "+t.map(function(e){if(void 0!==e)switch(typeof e){case"object":try{return JSON.stringify(e)}catch(t){return e.toString()+"("+t+")"}default:return e.toString()}}).join(" ")},e.Level={DEBUG:1,INFO:2,WARN:3,ERROR:4,OFF:6},e.log_types=["debug","debug","info","warn","error"],e}();e.Logger=t;var n=function(){function e(){}return e.indexOf=function(e,t,n){for(var r=e.length,o=n<0?Math.max(0,r+n):n||0;o<r;o++)if(e[o]===t)return o;return-1},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.merge=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e.getPropertyOrElse=function(e,t,n){return e.hasOwnProperty(t)?e[t]:n},e.enumValueToName=function(e,t){for(var n in e)if(t==e[n])return n;return"undefined"},e.getEnumKeyByValue=function(e,t){for(var n in e)if(t==e[n])return n},e}();e.Util=n})(e.Common||(e.Common={}))})(r||(r={})),function(e){var t;(function(e){e[e.Ws=0]="Ws",e[e.Wss=1]="Wss"})(t=e.ConnectionProtocol||(e.ConnectionProtocol={}));e.TypeExtType=function(){};var n=function(){function e(){}return e.Is=function(){return!1},e.Byte=function(e){return e},e.Short=function(e){return e},e.Int=function(e){return e},e.Long=function(e){return e},e.Float=function(e){return e},e.Double=function(e){return e},e.String=function(e){return e},e.Bool=function(e){return e},e.Dict=function(e,t,n){return n},e}();e.TypeExt=n;var o=function(){function e(e,t,n,o){void 0===n&&(n=""),void 0===o&&(o=""),this.protocol=e,this.address=t,this.subprotocol=n,this.keepAliveTimeoutMs=3e3,this._frame="~m~",this._isConnecting=!1,this._isConnected=!1,this._isClosing=!1,this._peerStatusListeners={},this._eventListeners={},this._responseListeners={},this.lastRtt=0,this.initTimestamp=Date.now(),this.keepAliveTimer=0,this.url=this.addProtocolPrefix(this.address,this.protocol),this._logger=new r.Common.Logger(o&&""!=o?o+":":"")}return e.prototype.addProtocolPrefix=function(e,n){var r={ws:"ws://",wss:"wss://"};for(var o in r)if(0==e.indexOf(r[o]))return e;switch(n){case t.Ws:return r.ws+e;case t.Wss:return r.wss+e;default:return r.ws+e}},e.prototype.Destroy=function(){},e.prototype.isConnecting=function(){return this._isConnecting},e.prototype.getLastRtt=function(){return this.lastRtt},e.prototype.isConnected=function(){return this._isConnected},e.prototype.isClosing=function(){return this._isClosing},e.prototype.connect=function(e){var t=this;this._sessionid=void 0;var n=this.url+"/"+e+"?libversion=4.1.0.0";""==this.subprotocol?this._socket=new WebSocket(n,"Json"):this._socket=new WebSocket(n,this.subprotocol),this._onConnecting(),this._socket.onopen=function(){},this._socket.onmessage=function(e){var n=t._decode(e.data);t._onMessage(n.toString())},this._socket.onclose=function(e){t._logger.debug("onclose: wasClean =",e.wasClean,", code=",e.code,", reason =",e.reason),t._isConnecting?t._onConnectFailed(e):(1006==e.code&&t._onTimeout(),t._onDisconnect())},this._socket.onerror=function(e){t._onError(e)}},e.prototype.disconnect=function(){this._isClosing=!0,this._socket.close()},e.prototype.sendOperation=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=0);var s={req:e,vals:[]};r.Common.Util.isArray(t)?s.vals=t:void 0===t?s.vals=[]:this._logger.exception(201,"PhotonPeer[sendOperation] - Trying to send non array data:",t),this._send(s),this._logger.debug("PhotonPeer[sendOperation] - Sending request:",s)},e.prototype.addPeerStatusListener=function(e,t){this._addListener(this._peerStatusListeners,e,t)},e.prototype.addEventListener=function(e,t){this._addListener(this._eventListeners,e.toString(),t)},e.prototype.addResponseListener=function(e,t){this._addListener(this._responseListeners,e.toString(),t)},e.prototype.removePeerStatusListener=function(e,t){this._removeListener(this._peerStatusListeners,e,t)},e.prototype.removeEventListener=function(e,t){this._removeListener(this._eventListeners,e.toString(),t)},e.prototype.removeResponseListener=function(e,t){this._removeListener(this._responseListeners,e.toString(),t)},e.prototype.removePeerStatusListenersForCode=function(e){this._removeListenersForCode(this._peerStatusListeners,e)},e.prototype.removeEventListenersForCode=function(e){this._removeListenersForCode(this._eventListeners,e.toString())},e.prototype.removeResponseListenersForCode=function(e){this._removeListenersForCode(this._responseListeners,e.toString())},e.prototype.setLogLevel=function(e){this._logger.setLevel(e)},e.prototype.onUnhandledEvent=function(e){this._logger.warn("PhotonPeer: No handler for event",e,"registered.")},e.prototype.onUnhandledResponse=function(e){this._logger.warn("PhotonPeer: No handler for response",e,"registered.")},e.prototype._dispatchEvent=function(e,t){this._dispatch(this._eventListeners,e.toString(),t,"event")||this.onUnhandledEvent(e,t)},e.prototype._dispatchResponse=function(e,t){this._dispatch(this._responseListeners,e.toString(),t,"response")||this.onUnhandledResponse(e,t)},e.prototype._stringify=function(e){return"[object Object]"==Object.prototype.toString.call(e)?(JSON||this._logger.exception(202,"PhotonPeer[_stringify] - Trying to encode as JSON, but JSON.stringify is missing."),"~j~"+JSON.stringify(e)):String(e)},e.prototype._encode=function(e){for(var t,n="",o=0,s=(e=r.Common.Util.isArray(e)?e:[e]).length;o<s;o++)t=null===e[o]||void 0===e[o]?"":this._stringify(e[o]),n+=this._frame+t.length+this._frame+t;return n},e.prototype._decode=function(e){var t,n,r=[],o=e;-1!==e.indexOf("\0")&&(o=e.replace(/[\0]/g,"")),e=o;do{if(e.substr(0,3)!==this._frame)return r;t="",n="";for(var s=0,a=(e=e.substr(3)).length;s<a;s++){if(n=Number(e.substr(s,1)),e.substr(s,1)!=n){e=e.substr(t.length+this._frame.length),t=Number(t);break}t+=n}r.push(e.substr(0,t)),e=e.substr(t)}while(""!==e);return r},e.prototype._onMessage=function(e){"~j~"==e.substr(0,3)?this._onMessageReceived(JSON.parse(e.substr(3))):this._sessionid?this._onMessageReceived(e):(this._sessionid=e,this._onConnect())},e.prototype.resetKeepAlive=function(){var e=this;clearTimeout(this.keepAliveTimer),this.keepAliveTimeoutMs>=1e3&&(this.keepAliveTimer=setTimeout(function(){var t;e._send(((t={}).irq=1,t.vals=[1,Date.now()-e.initTimestamp],t),!0)},this.keepAliveTimeoutMs))},e.prototype._send=function(e,t){void 0===t&&(t=!1);var n=this._encode(e);this._isConnected&&!this._isClosing?(this.resetKeepAlive(),this._socket.send(n)):t||this._logger.exception(203,"PhotonPeer[_send] - Operation",e.req,'- failed, "isConnected" is',this._isConnected,', "isClosing" is',this._isClosing,"!")},e.prototype._onMessageReceived=function(e){if("object"==typeof e){this._logger.debug("PhotonPeer[_onMessageReceived] - Socket received message:",e);var t={err:e.err,msg:e.msg,vals:e.vals,res:e.res,evt:e.evt,irs:e.irs};if(t.err&&t.err,t.vals=void 0!==t.vals?t.vals:[],t.vals.length>0&&(t.vals=this._parseMessageValuesArrayToJSON(t.vals)),void 0!==t.res){var n=parseInt(t.res);this._parseResponse(n,t)}else void 0!==t.evt?(n=parseInt(t.evt),this._parseEvent(n,t)):void 0!==t.irs?(n=parseInt(t.irs),this._parseInternalResponse(n,t)):this._logger.exception(204,"PhotonPeer[_onMessageReceived] - Received undefined message type:",t)}},e.prototype._parseMessageValuesArrayToJSON=function(e){var t={};if(r.Common.Util.isArray(e))if(e.length%2==0)for(var n,o,s=e;s.length>0;)n=s.shift()+"",o=s.shift(),t[n]=o;else this._logger.exception(205,"PhotonPeer[_parseMessageValuesToJSON] - Received invalid values array:",e);return t},e.prototype._parseEvent=function(e,t){this._dispatchEvent(e,{vals:t.vals})},e.prototype._parseResponse=function(e,t){this._dispatchResponse(e,{errCode:t.err,errMsg:t.msg,vals:t.vals})},e.prototype._parseInternalResponse=function(e,t){this.lastRtt=Date.now()-this.initTimestamp-t.vals[1],this._logger.debug("internal response:",t)},e.prototype._onConnecting=function(){this._logger.debug("PhotonPeer[_onConnecting] - Starts connecting",this.url,'..., raising "connecting" event ...'),this._isConnecting=!0,this._dispatchPeerStatus(e.StatusCodes.connecting),this.resetKeepAlive()},e.prototype._onConnect=function(){this._logger.debug('PhotonPeer[_onConnect] - Connected successfully! Raising "connect" event ...'),this._isConnecting=!1,this._isConnected=!0,this._dispatchPeerStatus(e.StatusCodes.connect),this.resetKeepAlive()},e.prototype._onConnectFailed=function(){this._logger.error("PhotonPeer[_onConnectFailed] - Socket connection could not be created:",this.url,this.subprotocol,'Wrong host or port?\n Raising "connectFailed event ...'),this._isConnecting=this._isConnected=!1,this._dispatchPeerStatus(e.StatusCodes.connectFailed)},e.prototype._onDisconnect=function(){var t=this._isConnected,n=this._isClosing;this._logger.debug('PhotonPeer[_onDisconnect] - Socket closed, raising "disconnect" event ...'),this._isClosing=this._isConnected=this._isConnecting=!1,t&&(n?this._dispatchPeerStatus(e.StatusCodes.disconnect):this._dispatchPeerStatus(e.StatusCodes.connectClosed))},e.prototype._onTimeout=function(){this._logger.debug('PhotonPeer[_onTimeout] - Client timed out! Raising "timeout" event ...'),this._dispatchPeerStatus(e.StatusCodes.timeout)},e.prototype._onError=function(t){this._logger.error("PhotonPeer[_onError] - Connection error:",arguments[0]),this._isConnecting=this._isConnected=this._isClosing=!1,this._dispatchPeerStatus(e.StatusCodes.error)},e.prototype._addListener=function(e,t,n){return t in e||(e[t]=[]),n&&"function"==typeof n?(this._logger.debug("PhotonPeer[_addListener] - Adding listener for event",t),e[t].push(n)):this._logger.error("PhotonPeer[_addListener] - Listener",t,"is not a function but of type",typeof n,". No listener added!"),this},e.prototype._dispatch=function(e,t,n){if(t in e){for(var o=e[t],s=0,a=o.length;s<a;s++)r.Common.Util.isArray(n)||(n=[n]),o[s].apply(this,void 0===n?[]:n);return!0}return!1},e.prototype._dispatchPeerStatus=function(e){this._dispatch(this._peerStatusListeners,e,void 0,"peerStatus")||this._logger.warn("PhotonPeer[_dispatchPeerStatus] - No handler for ",e,"registered.")},e.prototype._removeListener=function(e,t,n){if(t in e){var r=e[t].length;e[t]=e[t].filter(function(e){return e!=n}),this._logger.debug("PhotonPeer[_removeListener] - Removing listener for event",t,"removed:",r-e[t].length)}return this},e.prototype._removeListenersForCode=function(e,t){return this._logger.debug("PhotonPeer[_removeListenersForCode] - Removing all listeners for event",t),t in e&&(e[t]=[]),this},e.StatusCodes={connecting:"connecting",connect:"connect",connectFailed:"connectFailed",disconnect:"disconnect",connectClosed:"connectClosed",error:"error",timeout:"timeout"},e}();e.PhotonPeer=o}(o||(o={})),function(e){(function(t){var n=function(){function e(e,t,n){this.name=e,this.actorNr=t,this.isLocal=n,this.customProperties={},this.suspended=!1}return e.prototype.getRoom=function(){return this.loadBalancingClient.myRoom()},e.prototype.raiseEvent=function(e,t,n){this.loadBalancingClient&&this.loadBalancingClient.raiseEvent(e,t,n)},e.prototype.setName=function(e){this.name=e},e.prototype.onPropertiesChange=function(){},e.prototype.getCustomProperty=function(e){return this.customProperties[e]},e.prototype.getCustomPropertyOrElse=function(e,t){return r.Common.Util.getPropertyOrElse(this.customProperties,e,t)},e.prototype.setCustomProperty=function(e,t,n,r){void 0===n&&(n=!1),this.customProperties[e]=t;var o,s,a={};a[e]=t,null!=r&&((s={})[e]=r,o=s),this.loadBalancingClient&&this.loadBalancingClient.isJoinedToRoom()&&this.loadBalancingClient._setPropertiesOfActor(this.actorNr,a,n,o),this.onPropertiesChange(a,!0)},e.prototype.setCustomProperties=function(e,t,n){void 0===t&&(t=!1);var r={};for(var o in e)this.customProperties[o]=e[o],r[o]=e[o];this.loadBalancingClient&&this.loadBalancingClient.isJoinedToRoom()&&this.loadBalancingClient._setPropertiesOfActor(this.actorNr,r,t,n),this.onPropertiesChange(r,!0)},e.prototype.isSuspended=function(){return this.suspended},e.prototype._getAllProperties=function(){var e={};for(var n in e[t.Constants.ActorProperties.PlayerName]=this.name,this.customProperties)e[n]=this.customProperties[n];return e},e.prototype._setLBC=function(e){this.loadBalancingClient=e},e.prototype._updateFromResponse=function(e){this.actorNr=e[t.Constants.ParameterCode.ActorNr];var n=e[t.Constants.ParameterCode.PlayerProperties];if(void 0!==n){var r=n[t.Constants.ActorProperties.PlayerName];void 0!==r&&(this.name=r),this._updateCustomProperties(n)}},e.prototype._updateMyActorFromResponse=function(e){this.actorNr=e[t.Constants.ParameterCode.ActorNr]},e.prototype._updateCustomProperties=function(e){for(var t in e)this.customProperties[t]=e[t];this.onPropertiesChange(e,!1)},e.prototype._setSuspended=function(e){this.suspended=e},e._getActorNrFromResponse=function(e){return e[t.Constants.ParameterCode.ActorNr]},e}();t.Actor=n;var o=function(){function e(e){this.name="",this.address="",this.maxPlayers=0,this.isVisible=!0,this.isOpen=!0,this.playerCount=0,this.emptyRoomLiveTime=0,this.suspendedPlayerLiveTime=0,this.removed=!1,this.cleanupCacheOnLeave=!1,this.masterClientId=0,this._customProperties={},this._propsListedInLobby=[],this.name=e}return e.prototype.onPropertiesChange=function(){},e.prototype.getCustomProperty=function(e){return this._customProperties[e]},e.prototype.getCustomPropertyOrElse=function(e,t){return r.Common.Util.getPropertyOrElse(this._customProperties,e,t)},e.prototype._updateFromMasterResponse=function(e){this.address=e[t.Constants.ParameterCode.Address];var n=e[t.Constants.ParameterCode.RoomName];n&&(this.name=n)},e.prototype._updateFromProps=function(e){if(e){this.maxPlayers=this.updateIfExists(this.maxPlayers,t.Constants.GameProperties.MaxPlayers,e),this.isVisible=this.updateIfExists(this.isVisible,t.Constants.GameProperties.IsVisible,e),this.isOpen=this.updateIfExists(this.isOpen,t.Constants.GameProperties.IsOpen,e),this.playerCount=this.updateIfExists(this.playerCount,t.Constants.GameProperties.PlayerCount,e),this.removed=this.updateIfExists(this.removed,t.Constants.GameProperties.Removed,e),this._propsListedInLobby=this.updateIfExists(this._propsListedInLobby,t.Constants.GameProperties.PropsListedInLobby,e),this.cleanupCacheOnLeave=this.updateIfExists(this.cleanupCacheOnLeave,t.Constants.GameProperties.CleanupCacheOnLeave,e),this.masterClientId=this.updateIfExists(this.masterClientId,t.Constants.GameProperties.MasterClientId,e),this.emptyRoomLiveTime=this.updateIfExists(this.emptyRoomLiveTime,t.Constants.GameProperties.EmptyRoomTtl,e),this.suspendedPlayerLiveTime=this.updateIfExists(this.suspendedPlayerLiveTime,t.Constants.GameProperties.PlayerTtl,e);var n={};for(var r in e)parseInt(r).toString()!=r&&this._customProperties[r]!==e[r]&&(this._customProperties[r]=e[r],n[r]=e[r]);this.onPropertiesChange(n,!1)}},e.prototype._updateFromEvent=function(e){e&&(this.masterClientId=this.updateIfExists(this.masterClientId,t.Constants.ParameterCode.MasterClientId,e))},e.prototype.updateIfExists=function(e,t,n){return n.hasOwnProperty(t)?n[t]:e},e}();t.RoomInfo=o;var a=function(e){function n(t){return e.call(this,t)||this}return s(n,e),n.prototype.setCustomProperty=function(e,t,n,r){void 0===n&&(n=!1),this._customProperties[e]=t;var o,s,a={};a[e]=t,null!=r&&((s={})[e]=r,o=s),this.loadBalancingClient&&this.loadBalancingClient.isJoinedToRoom()&&this.loadBalancingClient._setPropertiesOfRoom(a,n,o),this.onPropertiesChange(a,!0)},n.prototype.setCustomProperties=function(e,t,n){void 0===t&&(t=!1);var r={};for(var o in e)this._customProperties[o]=e[o],r[o]=e[o];this.loadBalancingClient&&this.loadBalancingClient.isJoinedToRoom()&&this.loadBalancingClient._setPropertiesOfRoom(r,t,n),this.onPropertiesChange(r,!0)},n.prototype.setProp=function(e,t){if(this.loadBalancingClient&&this.loadBalancingClient.isJoinedToRoom()){var n={};n[e]=t,this.loadBalancingClient._setPropertiesOfRoom(n,!1,void 0)}},n.prototype.setIsVisible=function(e){this.isVisible!=e&&(this.isVisible=e,this.setProp(t.Constants.GameProperties.IsVisible,e))},n.prototype.setIsOpen=function(e){this.isOpen!=e&&(this.isOpen=e,this.setProp(t.Constants.GameProperties.IsOpen,e))},n.prototype.setMaxPlayers=function(e){this.maxPlayers!=e&&(this.maxPlayers=e,this.setProp(t.Constants.GameProperties.MaxPlayers,e))},n.prototype.setEmptyRoomLiveTime=function(e){this.emptyRoomLiveTime!=e&&(this.emptyRoomLiveTime=e,this.setProp(t.Constants.GameProperties.EmptyRoomTtl,e))},n.prototype.setSuspendedPlayerLiveTime=function(e){this.suspendedPlayerLiveTime!=e&&(this.suspendedPlayerLiveTime=e,this.setProp(t.Constants.GameProperties.PlayerTtl,e))},n.prototype.setPlugins=function(e){this.plugins=e},n.prototype.setPropsListedInLobby=function(e){this._propsListedInLobby=e},n.prototype._setLBC=function(e){this.loadBalancingClient=e},n}(o);t.Room=a;var i=function(){function s(n,o,a){if(this.appId=o,this.appVersion=a,this.autoJoinLobby=!0,this.connectOptions={},this.createRoomOptions={},this.joinRoomOptions={},this.roomInfos=new Array,this.roomInfosDict={},this.actors={},this.actorsArray=[],this.lowestActorId=0,this.userAuthType=t.Constants.CustomAuthenticationType.None,this.userAuthParameters="",this.userAuthData="",this.lobbyStatsRequestList=new Array,this.state=s.State.Uninitialized,this.logger=new r.Common.Logger("Client:"),this.validNextState={},"number"==typeof n)switch(this.connectionProtocol=n,n){case e.ConnectionProtocol.Ws:this.masterServerAddress="ws://app-eu.exitgamescloud.com:9090",this.nameServerAddress="ws://ns.exitgames.com:9093";break;case e.ConnectionProtocol.Wss:this.masterServerAddress="wss://app-eu.exitgamescloud.com:19090",this.nameServerAddress="wss://ns.exitgames.com:19093";break;default:var i="wrong_protocol_error";this.masterServerAddress=i,this.nameServerAddress=i,this.logger.error("Wrong protocol: ",n)}else if("string"==typeof n){this.connectionProtocol=e.ConnectionProtocol.Ws;var c=n;this.masterServerAddress=c,this.nameServerAddress=c}else{this.connectionProtocol=e.ConnectionProtocol.Ws;var u="wrong_protocol_type_error";this.masterServerAddress=u,this.nameServerAddress=u,this.logger.error("Wrong protocol type: ",typeof n)}this.initValidNextState(),this.currentRoom=this.roomFactoryInternal(""),this._myActor=this.actorFactoryInternal("",-1,!0),this.addActor(this._myActor)}return s.prototype.onStateChange=function(){},s.prototype.onError=function(){},s.prototype.onOperationResponse=function(){},s.prototype.onEvent=function(){},s.prototype.onRoomList=function(){},s.prototype.onRoomListUpdate=function(){},s.prototype.onMyRoomPropertiesChange=function(){},s.prototype.onActorPropertiesChange=function(){},s.prototype.onJoinRoom=function(){},s.prototype.onActorJoin=function(){},s.prototype.onActorLeave=function(){},s.prototype.onActorSuspend=function(){},s.prototype.onFindFriendsResult=function(){},s.prototype.onLobbyStats=function(){},s.prototype.onAppStats=function(){},s.prototype.onGetRegionsResult=function(){},s.prototype.onWebRpcResult=function(){},s.prototype.roomFactory=function(e){return new a(e)},s.prototype.actorFactory=function(e,t,r){return new n(e,t,r)},s.prototype.myActor=function(){return this._myActor},s.prototype.myRoom=function(){return this.currentRoom},s.prototype.myRoomActors=function(){return this.actors},s.prototype.myRoomActorCount=function(){return this.actorsArray.length},s.prototype.myRoomActorsArray=function(){return this.actorsArray},s.prototype.myRoomMasterActorNr=function(){return this.myRoom().masterClientId?this.myRoom().masterClientId:this.lowestActorId},s.prototype.lastRtt=function(){return this.gamePeer&&this.gamePeer.getLastRtt()},s.prototype.roomFactoryInternal=function(e){void 0===e&&(e="");var t=this.roomFactory(e);return t._setLBC(this),t},s.prototype.actorFactoryInternal=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=-1),void 0===n&&(n=!1);var r=this.actorFactory(e,t,n);return r._setLBC(this),r},s.prototype.setNameServerAddress=function(e){this.nameServerAddress=e},s.prototype.getNameServerAddress=function(){return this.nameServerAddress},s.prototype.setMasterServerAddress=function(e){this.masterServerAddress=e},s.prototype.getMasterServerAddress=function(){return this.nameServerAddress},s.prototype.setUserId=function(e){this.userId=e},s.prototype.getUserId=function(){return this.userId},s.prototype.setCustomAuthentication=function(t,n,r){void 0===n&&(n=e.LoadBalancing.Constants.CustomAuthenticationType.Custom),this.userAuthType=n,this.userAuthParameters=t,this.userAuthData=r},s.prototype.connect=function(e){if("boolean"==typeof e&&(e=e?{keepMasterConnection:!0}:{keepMasterConnection:!1}),e||(e={}),this.checkNextState(s.State.ConnectingToMasterserver,!0)){for(var t in this.changeState(s.State.ConnectingToMasterserver),this.logger.info("Connecting to Master",this.masterServerAddress),this.connectOptions={},e)this.connectOptions[t]=e[t];return this.masterPeer&&this.masterPeer.Destroy(),this.masterPeer=new p(this,this.connectionProtocol,this.masterServerAddress,""),this.initMasterPeer(this.masterPeer),this.masterPeer.connect(this.appId),!0}return!1},s.prototype.connectToNameServer=function(e){if(e||(e={}),this.checkNextState(s.State.ConnectingToNameServer,!0)){for(var t in this.changeState(s.State.ConnectingToNameServer),this.logger.info("Connecting to NameServer",this.nameServerAddress),this.connectOptions={},e)this.connectOptions[t]=e[t];return this.nameServerPeer&&this.nameServerPeer.Destroy(),this.nameServerPeer=new u(this,this.connectionProtocol,this.nameServerAddress,""),this.initNameServerPeer(this.nameServerPeer),this.nameServerPeer.connect(this.appId),!0}return!1},s.prototype.fillCreateRoomOptions=function(n,r){var o={};if(void 0!==(r=r||{}).isVisible&&(o[t.Constants.GameProperties.IsVisible]=r.isVisible),void 0!==r.isOpen&&(o[t.Constants.GameProperties.IsOpen]=r.isOpen),void 0!==r.maxPlayers&&(o[t.Constants.GameProperties.MaxPlayers]=r.maxPlayers),void 0!==r.propsListedInLobby&&(o[t.Constants.GameProperties.PropsListedInLobby]=e.TypeExt.String(r.propsListedInLobby)),void 0!==r.customGameProperties)for(var s in r.customGameProperties)o[s]=r.customGameProperties[s];n.push(t.Constants.ParameterCode.GameProperties,o),n.push(t.Constants.ParameterCode.CleanupCacheOnLeave,!0),n.push(t.Constants.ParameterCode.Broadcast,!0),void 0!==r.emptyRoomLiveTime&&n.push(t.Constants.ParameterCode.EmptyRoomTTL,e.TypeExt.Int(r.emptyRoomLiveTime)),void 0!==r.suspendedPlayerLiveTime&&n.push(t.Constants.ParameterCode.PlayerTTL,e.TypeExt.Int(r.suspendedPlayerLiveTime)),void 0!==r.plugins&&n.push(t.Constants.ParameterCode.Plugins,r.plugins),n.push(t.Constants.ParameterCode.CheckUserOnJoin,!0),r.lobbyName&&(n.push(t.Constants.ParameterCode.LobbyName),n.push(r.lobbyName),null!=r.lobbyType&&(n.push(t.Constants.ParameterCode.LobbyType),n.push(r.lobbyType)))},s.prototype.createRoomFromMy=function(e,t){return this.currentRoom.name=e||"",t=this.copyCreateOptionsFromMyRoom(t),this.createRoomInternal(this.masterPeer,t)},s.prototype.copyCreateOptionsFromMyRoom=function(e){return(e=e||{}).isVisible=this.currentRoom.isVisible,e.isOpen=this.currentRoom.isOpen,e.maxPlayers=this.currentRoom.maxPlayers,e.customGameProperties=this.currentRoom._customProperties,e.propsListedInLobby=this.currentRoom._propsListedInLobby,e.emptyRoomLiveTime=this.currentRoom.emptyRoomLiveTime,e.suspendedPlayerLiveTime=this.currentRoom.suspendedPlayerLiveTime,e.plugins=this.currentRoom.plugins,e},s.prototype.createRoom=function(e,t){return this.currentRoom=this.roomFactoryInternal(e||""),this.createRoomInternal(this.masterPeer,t)},s.prototype.joinRoom=function(e,n,r){var o=[];return n&&(n.createIfNotExists&&(o.push(t.Constants.ParameterCode.JoinMode,s.JoinMode.CreateIfNotExists),this.fillCreateRoomOptions(o,r)),n.rejoin&&o.push(t.Constants.ParameterCode.JoinMode,s.JoinMode.RejoinOnly)),this.currentRoom=this.roomFactoryInternal(e),o.push(t.Constants.ParameterCode.RoomName,e),this.joinRoomOptions=n||{},this.createRoomOptions=r||{},this.logger.info("Join Room",e,n,r,"..."),this.masterPeer.sendOperation(t.Constants.OperationCode.JoinGame,o),!0},s.prototype.joinRandomRoom=function(e){var n=[];if(e){null!=e.matchingType&&e.matchingType!=t.Constants.MatchmakingMode.FillRoom&&(n.push(t.Constants.ParameterCode.MatchMakingType),n.push(e.matchingType));var r={},o=!1;if(null!=e.expectedCustomRoomProperties)for(var s in e.expectedCustomRoomProperties)r[s]=e.expectedCustomRoomProperties[s],o=!0;null!=e.expectedMaxPlayers&&e.expectedMaxPlayers>0&&(r[t.Constants.GameProperties.MaxPlayers]=e.expectedMaxPlayers,o=!0),o&&(n.push(t.Constants.ParameterCode.GameProperties),n.push(r)),e.lobbyName&&(n.push(t.Constants.ParameterCode.LobbyName),n.push(e.lobbyName),null!=e.lobbyType&&(n.push(t.Constants.ParameterCode.LobbyType),n.push(e.lobbyType))),e.sqlLobbyFilter&&(n.push(t.Constants.ParameterCode.Data),n.push(e.sqlLobbyFilter))}return this.logger.info("Join Random Room",e&&e.lobbyName,e&&e.lobbyType,"..."),this.masterPeer.sendOperation(t.Constants.OperationCode.JoinRandomGame,n),!0},s.prototype._setPropertiesOfRoom=function(n,r,o){var s=[];s.push(t.Constants.ParameterCode.Properties),s.push(n),s.push(t.Constants.ParameterCode.Broadcast),s.push(!0),r&&(s.push(t.Constants.ParameterCode.WebFlags),s.push(e.TypeExt.Byte(1))),o&&(s.push(t.Constants.ParameterCode.ExpectedValues),s.push(o)),this.gamePeer.sendOperation(t.Constants.OperationCode.SetProperties,s)},s.prototype._setPropertiesOfActor=function(n,r,o,s){var a=[];a.push(t.Constants.ParameterCode.ActorNr),a.push(n),a.push(t.Constants.ParameterCode.Properties),a.push(r),a.push(t.Constants.ParameterCode.Broadcast),a.push(!0),o&&(a.push(t.Constants.ParameterCode.WebFlags),a.push(e.TypeExt.Byte(1))),s&&(a.push(t.Constants.ParameterCode.ExpectedValues),a.push(s)),this.gamePeer.sendOperation(t.Constants.OperationCode.SetProperties,a)},s.prototype.disconnect=function(){this.nameServerPeer&&this.nameServerPeer.disconnect(),this._cleanupNameServerPeerData(),this.masterPeer&&this.masterPeer.disconnect(),this._cleanupMasterPeerData(),this.gamePeer&&this.gamePeer.disconnect(),this._cleanupGamePeerData(),this.changeState(s.State.Disconnected)},s.prototype.suspendRoom=function(n){if(this.isJoinedToRoom()){if(this.gamePeer){var r=[];n&&n.sendAuthCookie&&r.push(t.Constants.ParameterCode.WebFlags,e.TypeExt.Byte(2)),r.push(t.Constants.ParameterCode.IsInactive,!0),this.gamePeer.sendOperation(t.Constants.OperationCode.Leave,r),this.gamePeerWaitingForDisconnect=!0}this._cleanupGamePeerData(),this.isConnectedToMaster()?this.changeState(s.State.JoinedLobby):(this.changeState(s.State.Disconnected),this.connect(this.connectOptions))}},s.prototype.leaveRoom=function(n){if(this.isJoinedToRoom()){if(this.gamePeer){var r=[];n&&n.sendAuthCookie&&r.push(t.Constants.ParameterCode.WebFlags,e.TypeExt.Byte(2)),this.gamePeer.sendOperation(t.Constants.OperationCode.Leave,r),this.gamePeerWaitingForDisconnect=!0}this._cleanupGamePeerData(),this.isConnectedToMaster()?this.changeState(s.State.JoinedLobby):(this.changeState(s.State.Disconnected),this.connect(this.connectOptions))}},s.prototype.raiseEvent=function(e,t,n){this.isJoinedToRoom()&&this.gamePeer.raiseEvent(e,t,n)},s.prototype.changeGroups=function(e,t){this.isJoinedToRoom()&&(this.logger.debug("Group change:",e,t),this.gamePeer.changeGroups(e,t))},s.prototype.findFriends=function(e){if(this.isConnectedToMaster())if(e&&"object"==typeof e){this.findFriendsRequestList=new Array;for(var t=0;t<e.length;++t){if("string"!=typeof e[t])return this.logger.error("FindFriends request error:","Friend name is not a string",t),void this.onFindFriendsResult(-1,"Friend name is not a string "+t,{});this.findFriendsRequestList[t]=e[t]}this.logger.debug("Find friends:",e),this.masterPeer.findFriends(this.findFriendsRequestList)}else this.logger.error("FindFriends request error:","Parameter is not an array"),this.onFindFriendsResult(-1,"Parameter is not an array",{});else this.logger.error("FindFriends request error:","Not connected to Master"),this.onFindFriendsResult(s.PeerErrorCode.MasterError,"Not connected to Master",{})},s.prototype.requestLobbyStats=function(e){if(this.isConnectedToMaster()){if(this.lobbyStatsRequestList=new Array,e){if("object"!=typeof e)return void this.requestLobbyStatsErr("Parameter is not an array");for(var n=0;n<e.length;++n){var r=e[n];if("object"!=typeof r)return void this.requestLobbyStatsErr("Lobby id is not an array",n);var o,a=r[0];if(!a)return void this.requestLobbyStatsErr("Lobby name is empty",n);if(void 0===r[1])o=t.Constants.LobbyType.Default;else{if("number"!=typeof r[1])return void this.requestLobbyStatsErr("Lobby type is invalid",n);o=r[1]}this.lobbyStatsRequestList[n]=[a.toString(),o]}}this.masterPeer.requestLobbyStats(this.lobbyStatsRequestList)}else this.logger.error("LobbyState request error:","Not connected to Master"),this.onLobbyStats(s.PeerErrorCode.MasterError,"Not connected to Master",[])},s.prototype.requestLobbyStatsErr=function(e,t){void 0===t&&(t=""),this.logger.error("LobbyState request error:",e,t),this.onLobbyStats(-1,e+" "+t,[])},s.prototype.getRegions=function(){this.isConnectedToNameServer()?(this.logger.debug("GetRegions..."),this.nameServerPeer.getRegions(this.appId)):(this.logger.error("GetRegions request error:","Not connected to NameServer"),this.onGetRegionsResult(s.PeerErrorCode.NameServerError,"Not connected to NameServer",{}))},s.prototype.webRpc=function(e,t,n){this.isConnectedToMaster()?(this.logger.debug("WebRpc..."),this.masterPeer.webRpc(e,t,n)):this.isJoinedToRoom()?(this.logger.debug("WebRpc..."),this.gamePeer.webRpc(e,t,n)):(this.logger.error("WebRpc request error:","Connected to neither Master nor Game server"),this.onWebRpcResult(s.PeerErrorCode.MasterError,"Connected to neither Master nor Game server",e,0,{}))},s.prototype.connectToRegionMaster=function(e){return this.isConnectedToNameServer()?(this.logger.debug("Connecting to Region Master",e,"..."),this.nameServerPeer.opAuth(this.appId,this.appVersion,this.userAuthType,this.userAuthParameters,this.userAuthData,this.userId,e),!0):!!this.connectToNameServer({region:e})||(this.logger.error("Connecting to Region Master error:","Not connected to NameServer"),!1)},s.prototype.isConnectedToMaster=function(){return this.masterPeer&&this.masterPeer.isConnected()},s.prototype.isConnectedToNameServer=function(){return this.nameServerPeer&&this.nameServerPeer.isConnected()},s.prototype.isInLobby=function(){return this.state==s.State.JoinedLobby},s.prototype.isJoinedToRoom=function(){return this.state==s.State.Joined},s.prototype.isConnectedToGame=function(){return this.isJoinedToRoom()},s.prototype.availableRooms=function(){return this.roomInfos},s.prototype.setLogLevel=function(e){this.logger.setLevel(e),this.nameServerPeer&&this.nameServerPeer.setLogLevel(e),this.masterPeer&&this.masterPeer.setLogLevel(e),this.gamePeer&&this.gamePeer.setLogLevel(e)},s.prototype.addRoom=function(e){this.roomInfos.push(e),this.roomInfosDict[e.name]=e},s.prototype.clearRooms=function(){this.roomInfos=new Array,this.roomInfosDict={}},s.prototype.purgeRemovedRooms=function(){for(var e in this.roomInfos=this.roomInfos.filter(function(e){return!e.removed}),this.roomInfosDict)this.roomInfosDict[e].removed&&delete this.roomInfosDict[e]},s.prototype.addActor=function(e){this.actors[e.actorNr]=e,this.actorsArray.push(e),this.currentRoom.playerCount=this.actorsArray.length,(0==this.lowestActorId||this.lowestActorId>e.actorNr)&&(this.lowestActorId=e.actorNr)},s.prototype.removeActor=function(e){delete this.actors[e],this.actorsArray=this.actorsArray.filter(function(t){return t.actorNr!=e}),this.currentRoom.playerCount=this.actorsArray.length,this.lowestActorId==e&&(this.actorsArray.length>0?this.lowestActorId=this.actorsArray.reduce(function(e,t){return e.actorNr<t.actorNr?e:t}).actorNr:this.lowestActorId=0)},s.prototype.clearActors=function(){this.actors={},this.actorsArray=[],this.currentRoom.playerCount=0,this.lowestActorId=0},s.prototype.changeState=function(e){this.logger.info("State:",s.StateToName(this.state),"->",s.StateToName(e)),this.state=e,this.onStateChange(e)},s.prototype.createRoomInternal=function(e,n){var r=[];this.currentRoom.name&&r.push(t.Constants.ParameterCode.RoomName,this.currentRoom.name),this.fillCreateRoomOptions(r,n),e===this.masterPeer&&(this.createRoomOptions=n),e===this.gamePeer&&(r.push(t.Constants.ParameterCode.PlayerProperties),r.push(this._myActor._getAllProperties())),(e==this.gamePeer?this.gamePeer._logger:this.masterPeer._logger).info("Create Room",n&&n.lobbyName,n&&n.lobbyType,"..."),e.sendOperation(t.Constants.OperationCode.CreateGame,r)},s.prototype.updateUserIdAndNickname=function(e,n){var r=e[t.Constants.ParameterCode.UserId];null!=r&&(this.setUserId(r),n.info("Setting userId sent by server:",r));var o=e[t.Constants.ParameterCode.Nickname];null!=o&&(this.myActor().setName(o),n.info("Setting nickname sent by server:",o))},s.prototype.initNameServerPeer=function(n){var r=this;n.setLogLevel(this.logger.getLevel()),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.error,function(){r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.NameServerError,"NameServer peer error")}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connectFailed,function(){r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.NameServerConnectFailed,"NameServer peer connect failed. "+r.nameServerAddress)}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.timeout,function(){r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.NameServerTimeout,"NameServer peer timeout")}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connecting,function(){}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connect,function(){n._logger.info("Connected"),r.changeState(s.State.ConnectedToNameServer),null!=r.connectOptions.region&&n.opAuth(r.appId,r.appVersion,r.userAuthType,r.userAuthParameters,r.userAuthData,r.userId,r.connectOptions.region)}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.disconnect,function(){n==r.nameServerPeer&&(r._cleanupNameServerPeerData(),n._logger.info("Disconnected"))}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connectClosed,function(){n._logger.info("Server closed connection"),r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.NameServerConnectClosed,"NameServer server closed connection")}),n.addResponseListener(t.Constants.OperationCode.GetRegions,function(e){n._logger.debug("resp GetRegions",e);var o={};if(0==e.errCode){var s=e.vals[t.Constants.ParameterCode.Region],a=e.vals[t.Constants.ParameterCode.Address];for(var i in s)o[s[i]]=a[i]}else n._logger.error("GetRegions request error.",e.errCode);r.onGetRegionsResult(e.errCode,e.errMsg,o)}),n.addResponseListener(t.Constants.OperationCode.Authenticate,function(e){n._logger.debug("resp Authenticate",e),0==e.errCode?(n._logger.info("Authenticated"),n.disconnect(),r.updateUserIdAndNickname(e.vals,n._logger),r.masterServerAddress=e.vals[t.Constants.ParameterCode.Address],n._logger.info("Connecting to Master server",r.masterServerAddress,"..."),r.connectOptions.userAuthSecret=e.vals[t.Constants.ParameterCode.Secret],r.connect(r.connectOptions)):(r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.NameServerAuthenticationFailed,"NameServer authentication failed: "+e.errCode+" "+e.errMsg))})},s.prototype.initMasterPeer=function(n){var r=this;n.setLogLevel(this.logger.getLevel()),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.error,function(){r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.MasterError,"Master peer error")}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connectFailed,function(){r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.MasterConnectFailed,"Master peer connect failed: "+r.masterServerAddress)}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.timeout,function(){r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.MasterTimeout,"Master peer error timeout")}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connecting,function(){}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connect,function(){n._logger.info("Connected");var o=[];r.connectOptions.userAuthSecret?(o.push(t.Constants.ParameterCode.Secret,r.connectOptions.userAuthSecret),n.sendOperation(t.Constants.OperationCode.Authenticate,o),n._logger.info("Authenticate with secret...")):(o.push(t.Constants.ParameterCode.ApplicationId),o.push(r.appId),o.push(t.Constants.ParameterCode.AppVersion),o.push(r.appVersion),r.userAuthType!=t.Constants.CustomAuthenticationType.None&&(o.push(t.Constants.ParameterCode.ClientAuthenticationType,e.TypeExt.Byte(r.userAuthType)),o.push(t.Constants.ParameterCode.ClientAuthenticationParams,r.userAuthParameters),r.userAuthData&&o.push(t.Constants.ParameterCode.ClientAuthenticationData,r.userAuthData)),r.userId&&o.push(t.Constants.ParameterCode.UserId,r.userId),r.connectOptions.lobbyStats&&o.push(t.Constants.ParameterCode.LobbyStats,!0),n.sendOperation(t.Constants.OperationCode.Authenticate,o),n._logger.info("Authenticate..."))}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.disconnect,function(){n==r.masterPeer&&(r._cleanupMasterPeerData(),n._logger.info("Disconnected"))}),n.addPeerStatusListener(e.PhotonPeer.StatusCodes.connectClosed,function(){n._logger.info("Server closed connection"),r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.MasterConnectClosed,"Master server closed connection")}),n.addEventListener(t.Constants.EventCode.GameList,function(e){var s=e.vals[t.Constants.ParameterCode.GameList];for(var a in r.clearRooms(),s){var i=new o(a);i._updateFromProps(s[a]),r.addRoom(i)}r.onRoomList(r.roomInfos),n._logger.debug("ev GameList",r.roomInfos,s)}),n.addEventListener(t.Constants.EventCode.GameListUpdate,function(e){var s=e.vals[t.Constants.ParameterCode.GameList],a=new Array,i=new Array,c=new Array;for(var u in s){var p=r.roomInfos.filter(function(e){return e.name==u});if(p.length>0){var l=p[0];l._updateFromProps(s[u]),l.removed?c.push(l):a.push(l)}else{var d=new o(u);d._updateFromProps(s[u]),r.addRoom(d),i.push(d)}}r.purgeRemovedRooms(),r.onRoomListUpdate(r.roomInfos,a,i,c),n._logger.debug("ev GameListUpdate:",r.roomInfos,"u:",a,"a:",i,"r:",c,s)}),n.addResponseListener(t.Constants.OperationCode.Authenticate,function(e){if(n._logger.debug("resp Authenticate",e),e.errCode)r.changeState(s.State.Error),r._onErrorInternal(s.PeerErrorCode.MasterAuthenticationFailed,"Master authentication failed: "+e.errCode+" "+e.errMsg);else{n._logger.info("Authenticated"),r.updateUserIdAndNickname(e.vals,n._logger),null!=e.vals[t.Constants.ParameterCode.Secret]&&(r.connectOptions.userAuthSecret=e.vals[t.Constants.ParameterCode.Secret]),r.changeState(s.State.ConnectedToMaster);var o=[];r.connectOptions.lobbyName&&(o.push(t.Constants.ParameterCode.LobbyName),o.push(r.connectOptions.lobbyName),null!=r.connectOptions.lobbyType&&(o.push(t.Constants.ParameterCode.LobbyType),o.push(r.connectOptions.lobbyType))),r.autoJoinLobby&&(n.sendOperation(t.Constants.OperationCode.JoinLobby,o),n._logger.info("Join Lobby",r.connectOptions.lobbyName,r.connectOptions.lobbyType,"..."))}}),n.addResponseListener(t.Constants.OperationCode.JoinLobby,function(e){n._logger.debug("resp JoinLobby",e),e.errCode||(n._logger.info("Joined to Lobby"),r.changeState(s.State.JoinedLobby)),r._onOperationResponseInternal2(t.Constants.OperationCode.JoinLobby,e)}),n.addResponseListener(t.Constants.OperationCode.CreateGame,function(e){n._logger.debug("resp CreateGame",e),e.errCode||(r.currentRoom._updateFromMasterResponse(e.vals),n._logger.debug("Created/Joined "+r.currentRoom.name),r.connectToGameServer(t.Constants.OperationCode.CreateGame)),r._onOperationResponseInternal2(t.Constants.OperationCode.CreateGame,e)}),n.addResponseListener(t.Constants.OperationCode.JoinGame,function(e){n._logger.debug("resp JoinGame",e),e.errCode||(r.currentRoom._updateFromMasterResponse(e.vals),n._logger.debug("Joined "+r.currentRoom.name),r.connectToGameServer(t.Constants.OperationCode.JoinGame)),r._onOperationResponseInternal2(t.Constants.OperationCode.JoinGame,e)}),n.addResponseListener(t.Constants.OperationCode.JoinRandomGame,function(e){n._logger.debug("resp JoinRandomGame",e),e.errCode||(r.currentRoom._updateFromMasterResponse(e.vals),n._logger.debug("Joined "+r.currentRoom.name),r.connectToGameServer(t.Constants.OperationCode.JoinRandomGame)),r._onOperationResponseInternal2(t.Constants.OperationCode.JoinRandomGame,e)}),n.addResponseListener(t.Constants.OperationCode.FindFriends,function(e){n._logger.debug("resp FindFriends",e);var o={};if(e.errCode)n._logger.error("FindFriends request error:",e.errCode);else for(var s=e.vals[t.Constants.ParameterCode.FindFriendsResponseOnlineList]||{},a=e.vals[t.Constants.ParameterCode.FindFriendsResponseRoomIdList]||{},i=0;i<r.findFriendsRequestList.length;++i){var c=r.findFriendsRequestList[i];c&&(o[c]={online:s[i],roomId:a[i]})}r.onFindFriendsResult(e.errCode,e.errMsg,o)}),n.addResponseListener(t.Constants.OperationCode.LobbyStats,function(e){n._logger.debug("resp LobbyStats",e);var o=new Array;if(e.errCode)n._logger.error("LobbyStats request error:",e.errCode);else{var s=e.vals[t.Constants.ParameterCode.LobbyName],a=e.vals[t.Constants.ParameterCode.LobbyType]||{},i=e.vals[t.Constants.ParameterCode.PeerCount]||{},c=e.vals[t.Constants.ParameterCode.GameCount]||{};if(s)for(var u=0;u<s.length;++u)o[u]={lobbyName:s[u],lobbyType:a[u],peerCount:i[u],gameCount:c[u]};else for(u=0;u<r.lobbyStatsRequestList.length;++u){var p=r.lobbyStatsRequestList[u];o[u]={lobbyName:p[0],lobbyType:p[1],peerCount:i[u],gameCount:c[u]}}}r.onLobbyStats(e.errCode,e.errMsg,o)}),n.addEventListener(t.Constants.EventCode.LobbyStats,function(e){n._logger.debug("ev LobbyStats",e);var o=new Array,s=e.vals[t.Constants.ParameterCode.LobbyName],a=e.vals[t.Constants.ParameterCode.LobbyType]||{},i=e.vals[t.Constants.ParameterCode.PeerCount]||{},c=e.vals[t.Constants.ParameterCode.GameCount]||{};if(s)for(var u=0;u<s.length;++u)o[u]={lobbyName:s[u],lobbyType:a[u],peerCount:i[u],gameCount:c[u]};r.onLobbyStats(0,"",o)}),n.addEventListener(t.Constants.EventCode.AppStats,function(e){n._logger.debug("ev AppStats",e);var o={peerCount:e.vals[t.Constants.ParameterCode.PeerCount],masterPeerCount:e.vals[t.Constants.ParameterCode.MasterPeerCount],gameCount:e.vals[t.Constants.ParameterCode.GameCount]};r.onAppStats(0,"",o)}),n.addResponseListener(t.Constants.OperationCode.Rpc,n.webRpcHandler(this))},s.prototype.connectToGameServer=function(e){return this.connectOptions.keepMasterConnection||this.masterPeer.disconnect(),!!this.checkNextState(s.State.ConnectingToGameserver,!0)&&(this.logger.info("Connecting to Game",this.currentRoom.address),this.gamePeer&&this.gamePeer.Destroy(),this.gamePeer=new l(this,this.connectionProtocol,this.currentRoom.address,""),this.gamePeerWaitingForDisconnect=!1,this.initGamePeer(this.gamePeer,e),this.gamePeer.connect(this.appId),this.changeState(s.State.ConnectingToGameserver),!0)},s.prototype.initGamePeer=function(r,o){var a=this;r.setLogLevel(this.logger.getLevel()),r.addPeerStatusListener(e.PhotonPeer.StatusCodes.error,function(){a.changeState(s.State.Error),a._onErrorInternal(s.PeerErrorCode.GameError,"Game peer error")}),r.addPeerStatusListener(e.PhotonPeer.StatusCodes.connectFailed,function(){a.changeState(s.State.Error),a._onErrorInternal(s.PeerErrorCode.GameConnectFailed,"Game peer connect failed: "+a.currentRoom.address)}),r.addPeerStatusListener(e.PhotonPeer.StatusCodes.timeout,function(){a.changeState(s.State.Error),a._onErrorInternal(s.PeerErrorCode.GameTimeout,"Game peer timeout")}),r.addPeerStatusListener(e.PhotonPeer.StatusCodes.connect,function(){r._logger.info("Connected");var n=[];n.push(t.Constants.ParameterCode.ApplicationId),n.push(a.appId),n.push(t.Constants.ParameterCode.AppVersion),n.push(a.appVersion),null!=a.connectOptions.userAuthSecret&&(n.push(t.Constants.ParameterCode.Secret),n.push(a.connectOptions.userAuthSecret)),a.userAuthType!=t.Constants.CustomAuthenticationType.None&&(n.push(t.Constants.ParameterCode.ClientAuthenticationType),n.push(e.TypeExt.Byte(a.userAuthType))),a.userId&&n.push(t.Constants.ParameterCode.UserId,a.userId),r.sendOperation(t.Constants.OperationCode.Authenticate,n),r._logger.info("Authenticate...")}),r.addPeerStatusListener(e.PhotonPeer.StatusCodes.disconnect,function(){r==a.gamePeer&&(a._cleanupGamePeerData(),r._logger.info("Disconnected"))}),r.addPeerStatusListener(e.PhotonPeer.StatusCodes.connectClosed,function(){r._logger.info("Server closed connection"),a.gamePeerWaitingForDisconnect||(a.changeState(s.State.Error),a._onErrorInternal(s.PeerErrorCode.MasterConnectClosed,"Game server closed connection"))}),r.addResponseListener(t.Constants.OperationCode.Authenticate,function(e){if(r._logger.debug("resp Authenticate",e),e.errCode)a.changeState(s.State.Error),a._onErrorInternal(s.PeerErrorCode.GameAuthenticationFailed,"Game authentication failed: "+e.errCode+" "+e.errMsg);else{if(r._logger.info("Authenticated"),r._logger.info("Connected"),o==t.Constants.OperationCode.CreateGame)a.createRoomInternal(r,a.createRoomOptions);else{var n=[];n.push(t.Constants.ParameterCode.RoomName),n.push(a.currentRoom.name),n.push(t.Constants.ParameterCode.Broadcast),n.push(!0),n.push(t.Constants.ParameterCode.PlayerProperties),n.push(a._myActor._getAllProperties()),o==t.Constants.OperationCode.JoinGame&&(a.joinRoomOptions.createIfNotExists&&(n.push(t.Constants.ParameterCode.JoinMode,s.JoinMode.CreateIfNotExists),a.fillCreateRoomOptions(n,a.createRoomOptions)),a.joinRoomOptions.rejoin&&n.push(t.Constants.ParameterCode.JoinMode,s.JoinMode.RejoinOnly)),r.sendOperation(t.Constants.OperationCode.JoinGame,n)}a.changeState(s.State.ConnectedToGameserver)}}),r.addResponseListener(t.Constants.OperationCode.CreateGame,function(e){r._logger.debug("resp CreateGame",e),e.errCode||(a._myActor._updateMyActorFromResponse(e.vals),r._logger.info("myActor: ",a._myActor),a.currentRoom._updateFromProps(e.vals[t.Constants.ParameterCode.GameProperties]),a.clearActors(),a.addActor(a._myActor),a.changeState(s.State.Joined),a.onJoinRoom(!0)),a._onOperationResponseInternal2(t.Constants.OperationCode.CreateGame,e)}),r.addResponseListener(t.Constants.OperationCode.JoinGame,function(e){if(r._logger.debug("resp JoinGame",e),!e.errCode){a._myActor._updateMyActorFromResponse(e.vals),r._logger.info("myActor: ",a._myActor),a.clearActors(),a.addActor(a._myActor);var n=e.vals[t.Constants.ParameterCode.ActorList],o=e.vals[t.Constants.ParameterCode.PlayerProperties];if(void 0!==n)for(var i=0;i<n.length;i++){var c,u,p,l=n[i];void 0!==o&&(c=o[l]),void 0!==c&&(u=c[t.Constants.ActorProperties.PlayerName]),l==a._myActor.actorNr?p=a._myActor:(p=a.actorFactoryInternal(u,l),a.addActor(p)),void 0!==c&&p._updateCustomProperties(c)}a.currentRoom._updateFromProps(e.vals[t.Constants.ParameterCode.GameProperties]),a.changeState(s.State.Joined),a.onJoinRoom(!1)}a._onOperationResponseInternal2(t.Constants.OperationCode.JoinGame,e)}),r.addResponseListener(t.Constants.OperationCode.SetProperties,function(e){r._logger.debug("resp SetProperties",e),a._onOperationResponseInternal2(t.Constants.OperationCode.SetProperties,e)}),r.addResponseListener(t.Constants.OperationCode.Leave,function(e){r._logger.debug("resp Leave",e),r.disconnect(),a._onOperationResponseInternal2(t.Constants.OperationCode.Leave,e)}),r.addResponseListener(t.Constants.OperationCode.Rpc,r.webRpcHandler(this)),r.addEventListener(t.Constants.EventCode.Join,function(e){if(r._logger.debug("ev Join",e),n._getActorNrFromResponse(e.vals)===a._myActor.actorNr)a._myActor._updateFromResponse(e.vals),a.onActorJoin(a._myActor);else{var t=a.actorFactoryInternal();t._updateFromResponse(e.vals),a.addActor(t),a.onActorJoin(t)}}),r.addEventListener(t.Constants.EventCode.Leave,function(e){r._logger.debug("ev Leave",e),a.myRoom()._updateFromEvent(e.vals);var o=n._getActorNrFromResponse(e.vals);if(o&&a.actors[o]){var s=a.actors[o];e.vals[t.Constants.ParameterCode.IsInactive]?(s._setSuspended(!0),a.onActorSuspend(s)):(a.removeActor(o),a.onActorLeave(s,!1))}}),r.addEventListener(t.Constants.EventCode.Disconnect,function(e){r._logger.debug("ev Disconnect",e);var t=n._getActorNrFromResponse(e.vals);if(t&&a.actors[t]){var o=a.actors[t];o._setSuspended(!0),a.onActorSuspend(o)}}),r.addEventListener(t.Constants.EventCode.PropertiesChanged,function(e){r._logger.debug("ev PropertiesChanged",e);var n=e.vals[t.Constants.ParameterCode.TargetActorNr];if(void 0!==n&&n>0){if(void 0!==a.actors[n]){var o=a.actors[n];o._updateCustomProperties(e.vals[t.Constants.ParameterCode.Properties]),a.onActorPropertiesChange(o)}}else a.currentRoom._updateFromProps(e.vals[t.Constants.ParameterCode.Properties]),a.onMyRoomPropertiesChange()})},s.prototype._cleanupNameServerPeerData=function(){},s.prototype._cleanupMasterPeerData=function(){},s.prototype._cleanupGamePeerData=function(){for(var e in this.actors)this.onActorLeave(this.actors[e],!0);this.clearActors(),this.addActor(this._myActor)},s.prototype._onOperationResponseInternal2=function(e,t){t.errCode&&this.logger.warn("Operation",e,"error:",t.errMsg,"("+t.errCode+")"),this.onOperationResponse(t.errCode,t.errMsg,e,t.vals)},s.prototype._onErrorInternal=function(e,t){this.logger.error("Error:",e,t),this.onError(e,t)},s.prototype.initValidNextState=function(){this.validNextState[s.State.Error]=[s.State.ConnectingToMasterserver,s.State.ConnectingToNameServer],this.validNextState[s.State.Uninitialized]=[s.State.ConnectingToMasterserver,s.State.ConnectingToNameServer],this.validNextState[s.State.ConnectedToNameServer]=[s.State.ConnectingToMasterserver],this.validNextState[s.State.Disconnected]=[s.State.ConnectingToMasterserver,s.State.ConnectingToNameServer],this.validNextState[s.State.ConnectedToMaster]=[s.State.JoinedLobby],this.validNextState[s.State.JoinedLobby]=[s.State.ConnectingToGameserver],this.validNextState[s.State.ConnectingToGameserver]=[s.State.ConnectedToGameserver],this.validNextState[s.State.ConnectedToGameserver]=[s.State.Joined]},s.prototype.checkNextState=function(e,t){void 0===t&&(t=!1);var n=this.validNextState[this.state],r=n&&n.indexOf(e)>=0;return r||(t?this.logger.error("LoadBalancingPeer checkNextState fail: "+s.StateToName(this.state)+" -> "+s.StateToName(e)):this.logger.exception(501,"LoadBalancingPeer checkNextState fail: "+s.StateToName(this.state)+" -> "+s.StateToName(e))),r},s.StateToName=function(e){return r.Common.Util.getEnumKeyByValue(s.State,e)},s.JoinMode={Default:0,CreateIfNotExists:1,RejoinOnly:3},s.PeerErrorCode={Ok:0,MasterError:1001,MasterConnectFailed:1002,MasterConnectClosed:1003,MasterTimeout:1004,MasterEncryptionEstablishError:1005,MasterAuthenticationFailed:1101,GameError:2001,GameConnectFailed:2002,GameConnectClosed:2003,GameTimeout:2004,GameEncryptionEstablishError:2005,GameAuthenticationFailed:2101,NameServerError:3001,NameServerConnectFailed:3002,NameServerConnectClosed:3003,NameServerTimeout:3004,NameServerEncryptionEstablishError:3005,NameServerAuthenticationFailed:3101},s.State={Error:-1,Uninitialized:0,ConnectingToNameServer:1,ConnectedToNameServer:2,ConnectingToMasterserver:3,ConnectedToMaster:4,JoinedLobby:5,ConnectingToGameserver:6,ConnectedToGameserver:7,Joined:8,Disconnected:10},s}();t.LoadBalancingClient=i;var c=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return s(r,n),r.prototype.webRpc=function(n,r,o){var s=[];s.push(t.Constants.ParameterCode.UriPath,n),s.push(t.Constants.ParameterCode.RpcCallParams,r),o&&o.sendAuthCookie&&s.push(t.Constants.ParameterCode.WebFlags,e.TypeExt.Byte(2)),this.sendOperation(t.Constants.OperationCode.Rpc,s)},r.prototype.webRpcHandler=function(e){var n=this;return function(r){var o,s,a;n._logger.debug("resp Rpc",r),0==r.errCode?(o=r.vals[t.Constants.ParameterCode.UriPath],s=r.vals[t.Constants.ParameterCode.RpcCallRetData],a=r.vals[t.Constants.ParameterCode.RpcCallRetCode]):n._logger.error("WebRpc request error:",r.errCode),e.onWebRpcResult(r.errCode,r.errMsg,o,a,s)}},r}(e.PhotonPeer);t.LbcPeer=c;var u=function(n){function r(e,t,r,o){var s=n.call(this,t,r,o,e.logger.getPrefix()+" NameServer")||this;return s.client=e,s}return s(r,n),r.prototype.onUnhandledEvent=function(e,n){this.client.onEvent(e,n.vals[t.Constants.ParameterCode.CustomEventContent],n.vals[t.Constants.ParameterCode.ActorNr])},r.prototype.onUnhandledResponse=function(e,t){this.client.onOperationResponse(t.errCode,t.errMsg,e,t.vals)},r.prototype.getRegions=function(e){var n=[];n.push(t.Constants.ParameterCode.ApplicationId,e),this.sendOperation(t.Constants.OperationCode.GetRegions,n,!0,0)},r.prototype.opAuth=function(n,r,o,s,a,i,c){var u=[];u.push(t.Constants.ParameterCode.ApplicationId,n),u.push(t.Constants.ParameterCode.AppVersion,r),o!=t.Constants.CustomAuthenticationType.None&&(u.push(t.Constants.ParameterCode.ClientAuthenticationType,e.TypeExt.Byte(o)),u.push(t.Constants.ParameterCode.ClientAuthenticationParams,s),a&&u.push(t.Constants.ParameterCode.ClientAuthenticationData,a)),i&&u.push(t.Constants.ParameterCode.UserId,i),u.push(t.Constants.ParameterCode.Region,c),this.sendOperation(t.Constants.OperationCode.Authenticate,u,!0,0),this._logger.info("Authenticate...")},r}(c);t.NameServerPeer=u;var p=function(e){function n(t,n,r,o){var s=e.call(this,n,r,o,t.logger.getPrefix()+" Master")||this;return s.client=t,s}return s(n,e),n.prototype.onUnhandledEvent=function(e,n){this.client.onEvent(e,n.vals[t.Constants.ParameterCode.CustomEventContent],n.vals[t.Constants.ParameterCode.ActorNr])},n.prototype.onUnhandledResponse=function(e,t){this.client.onOperationResponse(t.errCode,t.errMsg,e,t.vals)},n.prototype.findFriends=function(e){var n=[];n.push(t.Constants.ParameterCode.FindFriendsRequestList),n.push(e),this.sendOperation(t.Constants.OperationCode.FindFriends,n)},n.prototype.requestLobbyStats=function(e){var n=[];if(e&&e.length>0){for(var r=new Array,o=new Array,s=0;s<e.length;++s)r[s]=e[s][0],o[s]=e[s][1];n.push(t.Constants.ParameterCode.LobbyName),n.push(r),n.push(t.Constants.ParameterCode.LobbyType),n.push(o)}this.sendOperation(t.Constants.OperationCode.LobbyStats,n)},n}(c);t.MasterPeer=p;var l=function(n){function o(e,t,r,o){var s=n.call(this,t,r,o,e.logger.getPrefix()+" Game")||this;return s.client=e,s}return s(o,n),o.prototype.onUnhandledEvent=function(e,n){this.client.onEvent(e,n.vals[t.Constants.ParameterCode.CustomEventContent],n.vals[t.Constants.ParameterCode.ActorNr])},o.prototype.onUnhandledResponse=function(e,t){this.client.onOperationResponse(t.errCode,t.errMsg,e,t.vals)},o.prototype.raiseEvent=function(n,r,o){if(!this.client.isJoinedToRoom())throw new Error("raiseEvent - Not joined!");this._logger.debug("raiseEvent",n,r,o);var s=[t.Constants.ParameterCode.Code,e.TypeExt.Byte(n),t.Constants.ParameterCode.Data,r];o&&(null!=o.receivers&&o.receivers!==t.Constants.ReceiverGroup.Others&&(s.push(t.Constants.ParameterCode.ReceiverGroup),s.push(e.TypeExt.Byte(o.receivers))),null!=o.cache&&o.cache!==t.Constants.EventCaching.DoNotCache&&(s.push(t.Constants.ParameterCode.Cache),s.push(e.TypeExt.Byte(o.cache))),null!=o.interestGroup&&(this.checkGroupNumber(o.interestGroup)?(s.push(t.Constants.ParameterCode.Group),s.push(e.TypeExt.Byte(o.interestGroup))):this._logger.exception(502,"raiseEvent - Group not a number: "+o.interestGroup)),null!=o.targetActors&&(s.push(t.Constants.ParameterCode.ActorList),s.push(o.targetActors)),o.webForward&&(s.push(t.Constants.ParameterCode.WebFlags),s.push(e.TypeExt.Byte(1)))),this.sendOperation(t.Constants.OperationCode.RaiseEvent,s)},o.prototype.changeGroups=function(n,r){var o=[];null!=n&&null!=n&&(this.checkGroupArray(n,"groupsToRemove"),o.push(t.Constants.ParameterCode.Remove),o.push(e.TypeExt.Byte(n))),null!=r&&null!=r&&(this.checkGroupArray(r,"groupsToAdd"),o.push(t.Constants.ParameterCode.Add),o.push(e.TypeExt.Byte(r))),this.sendOperation(t.Constants.OperationCode.ChangeGroups,o)},o.prototype.checkGroupNumber=function(e){return!("number"!=typeof e||isNaN(e)||e===1/0||e===-1/0)},o.prototype.checkGroupArray=function(e,t){if(r.Common.Util.isArray(e))for(var n=0;n<e.length;++n){var o=e[n];this.checkGroupNumber(o)||this._logger.exception(503,"changeGroups - "+t+" ("+e+") not an array of numbers: element "+n+" = "+o)}else this._logger.exception(504,"changeGroups - groupsToRemove not an array: "+e)},o}(c);t.GamePeer=l})(e.LoadBalancing||(e.LoadBalancing={}))}(o||(o={})),function(e){(function(e){(function(e){e.LiteOpKey={ActorList:252,ActorNr:254,ActorProperties:249,Add:238,Broadcast:250,Cache:247,Code:244,Data:245,GameId:255,GameProperties:248,Group:240,Properties:251,ReceiverGroup:246,Remove:239,TargetActorNr:253,EmptyRoomLiveTime:236},e.LiteEventCode={Join:255,Leave:254,PropertiesChanged:253},e.LiteOpCode={ChangeGroups:248,GetProperties:251,Join:255,Leave:254,RaiseEvent:253,SetProperties:252}})(e.Constants||(e.Constants={}))})(e.Lite||(e.Lite={}))}(o||(o={})),function(e){(function(t){(function(t){var n=e.Lite.Constants.LiteOpKey,r=e.Lite.Constants.LiteOpCode,o=e.Lite.Constants.LiteEventCode;t.ErrorCode={Ok:0,OperationNotAllowedInCurrentState:-3,InvalidOperationCode:-2,InternalServerError:-1,InvalidAuthentication:32767,GameIdAlreadyExists:32766,GameFull:32765,GameClosed:32764,NoRandomMatchFound:32760,GameDoesNotExist:32758,MaxCcuReached:32757,InvalidRegion:32756,CustomAuthenticationFailed:32755,AuthenticationTicketExpired:32753,PluginReportedError:32752,PluginMismatch:32751,JoinFailedPeerAlreadyJoined:32750,JoinFailedFoundInactiveJoiner:32749,JoinFailedWithRejoinerNotFound:32748,JoinFailedFoundExcludedUserId:32747,JoinFailedFoundActiveJoiner:32746,HttpLimitReached:32745,ExternalHttpCallFailed:32744,SlotError:32742,InvalidEncryptionParameters:32741},t.ActorProperties={PlayerName:255},t.GameProperties={MaxPlayers:255,IsVisible:254,IsOpen:253,PlayerCount:252,Removed:251,PropsListedInLobby:250,CleanupCacheOnLeave:249,MasterClientId:248,PlayerTtl:246,EmptyRoomTtl:245},t.EventCode={GameList:230,GameListUpdate:229,QueueState:228,AppStats:226,AzureNodeInfo:210,Join:o.Join,Leave:o.Leave,PropertiesChanged:o.PropertiesChanged,Disconnect:252,LobbyStats:224},t.ParameterCode={Address:230,PeerCount:229,GameCount:228,MasterPeerCount:227,UserId:225,ApplicationId:224,Position:223,MatchMakingType:223,GameList:222,Secret:221,AppVersion:220,AzureNodeInfo:210,AzureLocalNodeId:209,AzureMasterNodeId:208,RoomName:n.GameId,Broadcast:n.Broadcast,ActorList:n.ActorList,ActorNr:n.ActorNr,PlayerProperties:n.ActorProperties,CustomEventContent:n.Data,Data:n.Data,Code:n.Code,GameProperties:n.GameProperties,Properties:n.Properties,TargetActorNr:n.TargetActorNr,ReceiverGroup:n.ReceiverGroup,Cache:n.Cache,CleanupCacheOnLeave:241,Group:n.Group,Remove:n.Remove,Add:n.Add,EmptyRoomTTL:n.EmptyRoomLiveTime,PlayerTTL:235,Plugins:204,ClientAuthenticationType:217,ClientAuthenticationParams:216,ClientAuthenticationData:214,JoinMode:215,MasterClientId:203,FindFriendsRequestList:1,FindFriendsResponseOnlineList:1,FindFriendsResponseRoomIdList:2,LobbyName:213,LobbyType:212,LobbyStats:211,Region:210,IsInactive:233,CheckUserOnJoin:232,ExpectedValues:231,UriPath:209,RpcCallParams:208,RpcCallRetCode:207,RpcCallRetMessage:206,RpcCallRetData:208,WebFlags:234,Nickname:202},t.OperationCode={Authenticate:230,JoinLobby:229,LeaveLobby:228,CreateGame:227,JoinGame:226,JoinRandomGame:225,Leave:r.Leave,RaiseEvent:r.RaiseEvent,SetProperties:r.SetProperties,GetProperties:r.GetProperties,ChangeGroups:r.ChangeGroups,FindFriends:222,LobbyStats:221,GetRegions:220,Rpc:219},t.MatchmakingMode={FillRoom:0,SerialMatching:1,RandomMatching:2},t.EventCaching={DoNotCache:0,MergeCache:1,ReplaceCache:2,RemoveCache:3,AddToRoomCache:4,AddToRoomCacheGlobal:5,RemoveFromRoomCache:6,RemoveFromRoomCacheForActorsLeft:7},t.ReceiverGroup={Others:0,All:1,MasterClient:2},t.CustomAuthenticationType={Custom:0,Steam:1,Facebook:2,None:255},t.LobbyType={Default:0,SqlLobby:2}})(t.Constants||(t.Constants={}))})(e.LoadBalancing||(e.LoadBalancing={}))}(o||(o={})),function(e){(function(e){(function(e){e.ParameterCode={Channels:0,Channel:1,Messages:2,Message:3,Senders:4,Sender:5,ChannelUserCount:6,UserId:225,MsgId:8,MsgIds:9,SubscribeResults:15,Status:10,Friends:11,SkipMessage:12,HistoryLength:14,WebFlags:21},e.OperationCode={Subscribe:0,Unsubscribe:1,Publish:2,SendPrivate:3,ChannelHistory:4,UpdateStatus:5,AddFriendds:6,RemoveFriends:7},e.EventCode={ChatMessages:0,Users:1,PrivateMessage:2,FriendsList:3,StatusUpdate:4,Subscribe:5,Unsubscribe:6},e.UserStatus={Offline:0,Invisible:1,Online:2,Away:3,Dnd:4,Lfg:5,Playing:6},e.UserStatusToName=function(t){return r.Common.Util.getEnumKeyByValue(e.UserStatus,t)}})(e.Constants||(e.Constants={}))})(e.Chat||(e.Chat={}))}(o||(o={})),function(e){(function(t){var n=function(){function e(e,t){this.sender=e,this.content=t}return e.prototype.getSender=function(){return this.sender},e.prototype.getContent=function(){return this.content},e}();t.Message=n;var o=function(){function e(e,t){this.name=e,this.isPrivat=t,this.messages=[]}return e.prototype.getName=function(){return this.name},e.prototype.isPrivate=function(){return this.isPrivat},e.prototype.getMessages=function(){return this.messages},e.prototype.getLastId=function(){return this.lastId},e.prototype.clearMessages=function(){this.messages.splice(0)},e.prototype.addMessages=function(e,t){var r=[];for(var o in e)if(parseInt(o)<t.length){var s=new n(e[o],t[o]);this.messages.push(s),r.push(s)}return r},e}();t.Channel=o;var a=function(a){function i(e,t,n){var r=a.call(this,e,t,n)||this;return r.publicChannels={},r.privateChannels={},r.subscribeRequests=[],r.unsubscribeRequests=[],r.autoJoinLobby=!1,r}return s(i,a),i.prototype.onStateChange=function(){},i.prototype.onError=function(){},i.prototype.onSubscribeResult=function(){},i.prototype.onUnsubscribeResult=function(){},i.prototype.onChatMessages=function(){},i.prototype.onPrivateMessage=function(){},i.prototype.onUserStatusUpdate=function(){},i.prototype.connectToRegionFrontEnd=function(e){return this.connectToRegionMaster(e)},i.prototype.isConnectedToFrontEnd=function(){return this.state==i.ChatState.ConnectedToFrontEnd},i.prototype.subscribe=function(n,r){if("number"==typeof r&&(r={historyLength:r}),this.isConnectedToFrontEnd()){this.logger.debug("Subscribe channels:",n);var o=[];return o.push(t.Constants.ParameterCode.Channels,e.TypeExt.String(n)),r&&(r.historyLength&&o.push(t.Constants.ParameterCode.HistoryLength,e.TypeExt.Int(r.historyLength)),r.lastIds&&(o.push(t.Constants.ParameterCode.MsgIds,e.TypeExt.Int(r.lastIds)),void 0===r.historyLength&&o.push(t.Constants.ParameterCode.HistoryLength,e.TypeExt.Int(-1)))),this.masterPeer.sendOperation(t.Constants.OperationCode.Subscribe,o),!0}return this.logger.error("subscribe request error:","Not connected to Front End"),!1},i.prototype.unsubscribe=function(n){if(this.isConnectedToFrontEnd()){this.logger.debug("Unsubscribe channels:",n);var r=[];return r.push(t.Constants.ParameterCode.Channels,e.TypeExt.String(n)),this.masterPeer.sendOperation(t.Constants.OperationCode.Unsubscribe,r),!0}return this.logger.error("unsubscribe request error:","Not connected to Front End"),!1},i.prototype.publishMessage=function(n,r,o){if(this.isConnectedToFrontEnd()){var s=[];return s.push(t.Constants.ParameterCode.Channel,n),s.push(t.Constants.ParameterCode.Message,r),o&&o.webForward&&(s.push(t.Constants.ParameterCode.WebFlags),s.push(e.TypeExt.Byte(1))),this.masterPeer.sendOperation(t.Constants.OperationCode.Publish,s),!0}return this.logger.error("publishMessage request error:","Not connected to Front End"),!1},i.prototype.sendPrivateMessage=function(n,r,o){if(this.isConnectedToFrontEnd()){var s=[];return s.push(t.Constants.ParameterCode.UserId,n),s.push(t.Constants.ParameterCode.Message,r),o&&o.webForward&&(s.push(t.Constants.ParameterCode.WebFlags),s.push(e.TypeExt.Byte(1))),this.masterPeer.sendOperation(t.Constants.OperationCode.SendPrivate,s),!0}return this.logger.error("sendPrivateMessage request error:","Not connected to Front End"),!1},i.prototype.setUserStatus=function(n,r,o){if(void 0===r&&(r=null),void 0===o&&(o=!1),this.isConnectedToFrontEnd()){var s=[];return s.push(t.Constants.ParameterCode.Status,e.TypeExt.Int(n)),o?s.push(t.Constants.ParameterCode.SkipMessage,!0):s.push(t.Constants.ParameterCode.Message,r),this.masterPeer.sendOperation(t.Constants.OperationCode.UpdateStatus,s),!0}return this.logger.error("setUserStatus request error:","Not connected to Front End"),!1},i.prototype.addFriends=function(n){if(this.isConnectedToFrontEnd()){var r=[];return r.push(t.Constants.ParameterCode.Friends,e.TypeExt.String(n)),this.masterPeer.sendOperation(t.Constants.OperationCode.AddFriendds,r),!0}return this.logger.error("addFriends request error:","Not connected to Front End"),!1},i.prototype.removeFriends=function(n){if(this.isConnectedToFrontEnd()){var r=[];return r.push(t.Constants.ParameterCode.Friends,e.TypeExt.String(n)),this.masterPeer.sendOperation(t.Constants.OperationCode.RemoveFriends,r),!0}return this.logger.error("removeFriends request error:","Not connected to Front End"),!1},i.prototype.getPublicChannels=function(){return this.publicChannels},i.prototype.getPrivateChannels=function(){return this.privateChannels},i.prototype.getOrAddChannel=function(e,t,n){return null==e[t]&&(e[t]=new o(t,n)),e[t]},i.prototype.initMasterPeer=function(e){var r=this;a.prototype.initMasterPeer.call(this,e),e.addEventListener(t.Constants.EventCode.ChatMessages,function(n){var o=n.vals[t.Constants.ParameterCode.Senders],s=n.vals[t.Constants.ParameterCode.Messages],a=n.vals[t.Constants.ParameterCode.Channel],i=r.publicChannels[a];if(i){var c=i.addMessages(o,s);i.lastId=n.vals[t.Constants.ParameterCode.MsgId],r.onChatMessages(a,c)}else e._logger.warn("ev ChatMessages: Got message from unsubscribed channel ",a)}),e.addEventListener(t.Constants.EventCode.PrivateMessage,function(e){var o,s=e.vals[t.Constants.ParameterCode.Sender],a=e.vals[t.Constants.ParameterCode.Message],i=e.vals[t.Constants.ParameterCode.UserId];o=r.getUserId()==s?i:s,r.getOrAddChannel(r.privateChannels,o,!0).lastId=e.vals[t.Constants.ParameterCode.MsgId],r.onPrivateMessage(o,new n(s,a))}),e.addEventListener(t.Constants.EventCode.StatusUpdate,function(e){var n=e.vals[t.Constants.ParameterCode.Sender],o=e.vals[t.Constants.ParameterCode.Status],s=e.vals[t.Constants.ParameterCode.Message],a=void 0!==s;r.onUserStatusUpdate(n,o,a,s)}),e.addEventListener(t.Constants.EventCode.Subscribe,function(n){e._logger.debug("ev Subscribe",n);var o={},s=n.vals[t.Constants.ParameterCode.Channels]||[],a=n.vals[t.Constants.ParameterCode.SubscribeResults]||[];for(var i in s){var c=s[i];o[c]=!1,i<a.length&&a[i]&&(r.getOrAddChannel(r.publicChannels,c,!1),o[c]=!0)}r.onSubscribeResult(o)}),e.addEventListener(t.Constants.EventCode.Unsubscribe,function(n){e._logger.debug("ev Unsubscribe",n);var o={},s=n.vals[t.Constants.ParameterCode.Channels]||[];for(var a in s){var i=s[a];delete r.publicChannels[i],o[i]=!0}r.onUnsubscribeResult(o)})},i.StateToName=function(e){var t=r.Common.Util.getEnumKeyByValue(i.ChatState,e);return void 0===t?r.Common.Util.getEnumKeyByValue(i.State,e):t},i.ChatPeerErrorCode={Ok:0,FrontEndError:1001,FrontEndConnectFailed:1002,FrontEndConnectClosed:1003,FrontEndTimeout:1004,FrontEndEncryptionEstablishError:1005,FrontEndAuthenticationFailed:1101,NameServerError:3001,NameServerConnectFailed:3002,NameServerConnectClosed:3003,NameServerTimeout:3004,NameServerEncryptionEstablishError:300,NameServerAuthenticationFailed:3101},i.ChatState={Error:-1,Uninitialized:0,ConnectingToNameServer:1,ConnectedToNameServer:2,ConnectingToFrontEnd:3,ConnectedToFrontEnd:4,Disconnected:10},i}(e.LoadBalancing.LoadBalancingClient);t.ChatClient=a})(e.Chat||(e.Chat={}))}(o||(o={})),t.exports=o,cc._RF.pop()},{}],Photon_Interface:[function(e,t){"use strict";cc._RF.push(t,"1d3092UE5JFUbiiQ9S4HGIj","Photon_Interface");var n,r=e("./Photon-Javascript_SDK");(function(e){var t=function(){function e(e,t){this._ppr=new r.PhotonPeer(e,t,"","")}return e.prototype.InitCallbackFunction=function(e,t,n,o){this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.connecting,function(){t(r.PhotonPeer.StatusCodes.connecting,e)}),this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.connect,function(){t(r.PhotonPeer.StatusCodes.connect,e)}),this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.connectFailed,function(){t(r.PhotonPeer.StatusCodes.connectFailed,e)}),this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.disconnect,function(){t(r.PhotonPeer.StatusCodes.disconnect,e)}),this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.timeout,function(){t(r.PhotonPeer.StatusCodes.timeout,e)}),this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.error,function(){t(r.PhotonPeer.StatusCodes.error,e)}),this._ppr.addPeerStatusListener(r.PhotonPeer.StatusCodes.connectClosed,function(){t(r.PhotonPeer.StatusCodes.connectClosed,e)}),this._ppr.addResponseListener(1,function(t){var r=JSON.stringify(t),o=JSON.parse(r);0==o.errCode?n(o.vals,e):console.log("errCode:"+o.errCode+", errMsg:"+o.errMsg)}),this._ppr.addEventListener(2,function(t){var n=JSON.stringify(t),r=JSON.parse(n);o(r.vals,e)})},e.prototype.connect=function(){this._ppr.connect()},e.prototype.sendData=function(e){for(var t=[0,e],n=0;n<(arguments.length<=1?0:arguments.length-1);++n)t.push(n+1,n+1<1||arguments.length<=n+1?void 0:arguments[n+1]);console.log("send cmd"+t),this._ppr.sendOperation(1,t)},e}();e.PhotonIf=t})(n||(n={})),t.exports=n,cc._RF.pop()},{"./Photon-Javascript_SDK":"Photon-Javascript_SDK"}],PublicSetUp:[function(e,t){"use strict";cc._RF.push(t,"bbe52wi27NIprLdPswHxN19","PublicSetUp"),t.exports={account:"",password:"",loginMessage:0,audio1:null,MusicClip:null,loginType:0,sound:0,auto:0},cc._RF.pop()},{}],autoPlayButton:[function(e,t){"use strict";cc._RF.push(t,"e82e68PrlpDUKUade1bQ3Zp","autoPlayButton"),e("PublicSetUp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){cc.store.auto=!1,console.log(cc.store.auto);var e=cc.find("Canvas/Game/Machine/UI/AutoPlayButton");e.active=!1,e.getComponent(cc.Button).interactable=!1;var t=cc.find("Canvas/Game/Machine/UI/ManuaPlayButton");t.active=!0,t.getComponent(cc.Button).interactable=!0})}}),cc._RF.pop()},{PublicSetUp:"PublicSetUp"}],buildSymbols:[function(e,t,n){"use strict";cc._RF.push(t,"4af37ximRlFnqqqfZsvqA7u","buildSymbols"),n.__esModule=!0,n.default=void 0,n.setSymbol=function(e,t,n){cc.find("Canvas/Game/Machine/Performance/Cols/"+(e+1)).getChildByName(""+(t+1)).getComponent(cc.Sprite).spriteFrame=(0,r.default)(n).spriteFrame},o(e("./getSymbolAnchor"));var r=o(e("./getSymbolSprite"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,o){var s=t<0?""+t:""+(t+1),a=e.getChildByName(s);null===a&&((a=new cc.Node(s)).y=t*o,e.addChild(a));var i=a.getComponent(cc.Sprite);null===i&&((i=a.addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.RAW),i.spriteFrame=(0,r.default)(n).spriteFrame}function a(e,t,n){for(var r=cc.find("Canvas/Game/Machine/Performance/Cols/"+(t+1)),o=0;o<e.length;o++)s(r,o,e[o],n)}var i;n.default=function(e){for(var t=cc.find("Canvas/Game/Machine/Performance/Anchors"),n=cc.find("Canvas/Game/Machine/Performance/Cols"),r=1;r<=5;r++){var o=n.getChildByName(""+r),s=t.getChildByName(""+r);o.x=s.x,o.y=s.getChildByName("3").y,o.baseY=o.y}if(void 0===i){var c=t.getChildByName("1");i=Math.abs(c.getChildByName("1").y-c.getChildByName("2").y)}for(var u=0;u<e.length;u++)a(e[u],u,i)},cc._RF.pop()},{"./getSymbolAnchor":"getSymbolAnchor","./getSymbolSprite":"getSymbolSprite"}],"co.cc":[function(e,t){"use strict";function n(){return(n=r()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return n&&o(s,n.prototype),s}).apply(null,arguments)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"53fe6raOH5McIXi3lJzAGsq","co.cc");var s=e("./value-types.cc"),a="[object AsyncFunction]",i="[object GeneratorFunction]",c="[object Generator]",u="[object Promise]",p=Object.prototype.toString;function l(e){return p.call(e)}function d(e){return h(p.call(e))}function h(e){switch(e){case a:case i:case c:case u:return!0;default:return!1}}function f(){}var m=new WeakSet,v=0,C=1,g=2,y=3;function b(e,t){var r,o,a,i,c,u=v,p=!1,l=new Array(24),d=-1,h=function(e){return l[++d]=e,e},m=function(){if(d>=0)return--d,b()},b=function(){if(d>=0)return l[d]},S=function(e){if(void 0===e&&(e=f),E(),u===v){u=g;for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(_===M)throw n(e,r);a=n(e,r)}},R=function(){return u===g},L=function(){return p},x=function(){u===v&&(u=C,e.onSuspend(M))},A=function(){return u===C},E=function(){u===C&&(u=v,e.onResume(M))},F=function(){return u===y},T=(c={get group(){return e.toPublic()},get result(){return r},get exception(){return o},stop:S,isStopping:R,isStopped:L,suspend:x,isSuspended:A,resume:E,isDone:F},function(){return c});h(t);var M={get group(){return e},get result(){return r},get exception(){return o},stop:S,isStopping:R,isStopped:L,suspend:x,isSuspended:A,resume:E,isDone:F,execute:function(){if(u===v||u===g){var e;_=M;try{for(var t=b();;){if(void 0===t){u===g&&(p=!0),u=y;break}var n=t.run(a,e);if((a=n.exception)!==i&&(void 0===(i=a)||i instanceof f||console.error("[co.Coroutine] runtime error: "+s.errorToString(i))),!0===n.nextTick)break;e=n.result,void 0===n.nextExecutor?!0!==n.directlyValue&&(t=m()):t=h(n.nextExecutor)}}catch(l){console.error("[co.Coroutine] internal error: "+s.errorToString(l))}if(u===y){for(var c=b();void 0!==c;)c.abort(),c=m();o=a,r=e}_=null}},toPublic:T};return P(M)}function P(e){return m.add(e),m.add(e.toPublic()),e}function S(e){return m.has(e)}var _=null;function R(){return _}var L={get Lowest(){return-2e7},get BelowNormal(){return-1e7},get Normal(){return 0},get AboveNormal(){return 1e7},get Highest(){return 2e7}},x=0,A=1,E=2;function F(e){var t,n=x;return e.then(function(e){n=A,t=e},function(e){n=E,t=e}),regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n===x){e.next=5;break}if(n!==E){e.next=4;break}throw t;case 4:return e.abrupt("return",t);case 5:return void(e.next=7);case 7:e.next=0;break;case 9:case"end":return e.stop()}},e)})()}var T=new WeakSet;function M(e){var t={run:function(t,n){var r,o,s={};try{r=void 0!==t?e.throw(t):e.next(n)}catch(d){s.exception=d,r={done:!0}}if(r.done)s.result=r.value;else{var p=r.value;if(void 0===p)s.nextTick=!0;else if(T.has(p))s.nextExecutor=p;else if(S(p))s.nextExecutor=M((o=p,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isDone()){e.next=5;break}if(void 0===o.exception){e.next=4;break}throw o.exception;case 4:return e.abrupt("return",o.result);case 5:return void(e.next=7);case 7:e.next=0;break;case 9:case"end":return e.stop()}},e)})()));else switch(l(p)){case i:s.nextExecutor=M(p());break;case c:s.nextExecutor=M(p);break;case u:s.nextExecutor=M(F(p));break;case a:s.nextExecutor=M(F(p()));break;default:s.result=p,s.directlyValue=!0}}return s},abort:function(){try{e.return()}catch(t){}}};return T.add(t),t}var k=new WeakSet;function G(e,t,n){if(void 0===n&&(n={}),e.hasByName(t))throw new Error("coroutine group '"+t+"' exists");null!=n.priority||(n.priority=L.Normal);var r,o,a,i=e.runtime,c=[],u=new Map,p=function(e){var t=b(h,M(e()));return u.set(t,{tickWhile:i.currentTickCount}),c.push(t),t},l=function(e){void 0===e&&(e=f);var n,r=R();if((null==r?void 0:r.group.name)===t){if(c.forEach(function(t){if(r===t)try{t.stop(e)}catch(o){if(!(o instanceof e))throw o;n=o}else t.stop(e)}),n)throw n}else c.forEach(function(t){t.stop(e)})},d=(o={get name(){return t},get size(){return c.length},get priority(){return r},start:function(e){return p(e).toPublic()},stopAll:l},function(){return o}),h={get name(){return t},get groupSet(){return e},get size(){return c.length},get priority(){return r},onSuspend:function(){},onResume:function(e){u.get(e).tickWhile=i.currentTickCount},start:p,stopAll:l,update:function(){if(0!==c.length){var e=i.currentTickCount;try{for(var t,n=-1,r=0,o=c.length;r<o;){var a=c[r];u.get(a).tickWhile<e&&a.execute(),a.isDone()?(u.delete(a),n>-1?t++:(n=r,t=1)):n>-1&&(c.splice(n,t),o-=t,r-=t,n=-1),r++}n>-1&&c.splice(n,t)}catch(p){console.error("[co.CoroutineGroup] internal error: "+s.errorToString(p))}}},toPublic:d};return a=n.priority,void 0!==r&&r===a||(r=a,e.updatePriority(h,r)),O(e.add(h))}function O(e){return k.add(e),k.add(e.toPublic()),e}function w(e){return k.has(e)}function I(e){var t=new Set,n=new Map,r=[],o=0;function s(e){0!=(2&e)&&(r.splice(0,r.length),n.forEach(function(e){r.push(e)})),r.sort(function(e,t){return t.priority-e.priority})}return{get runtime(){return e},add:function(e){return t.add(e),t.add(e.toPublic()),n.set(e.name,e),o|=2,e},has:function(e){return t.has(e)},hasByName:function(e){return n.has(e)},getByName:function(e){if(n.has(e))return n.get(e)},updatePriority:function(){o|=1},update:function(){if(0!==o){var e=o;o=0,s(e)}r.forEach(function(e){e.update()})}}}function N(e){void 0===e&&(e=0);var t=!1,n=0,r=0;function o(e){if(e<=0)throw new Error("'tickRate' must be greater than 0");if(!0===t)throw new Error("auto-tick has already enabled");t=!0,s(e)}function s(e){var t,n=Math.floor(1e3/e);try{if(window&&"requestAnimationFrame"in window){var r=function(e){e-o>=n&&(a(e),o=e),t()},o=0;(t=function(){requestAnimationFrame(r)})()}}catch(c){}if(void 0===t){var s=function(){var e=Date.now();if(e>=i){a(e);var r=Date.now();r-e<n?(i=e+n,t(Math.floor(.85*(i-r)))):(i=r,t(0))}else t(0)},i=0;(t=function(e){setTimeout(s,e)})(0)}}function a(e){++n,r=e,B=l,u.update(),B=null}var i,c=(i={get mainGroup(){return p.toPublic()},get currentTickCount(){return n},get lastTickTime(){return r},enableAutoTick:o,performTick:function(e){if(!0===t)throw new Error("running in auto-tick mode");++n,r=e;var o=B;B=l,u.update(),B=o}},function(){return i}),u=I({get currentTickCount(){return n},get lastTickTime(){return r}}),p=G(u,"main",{priority:L.Normal}),l={get groupSet(){return u},get mainGroup(){return p},get currentTickCount(){return n},get lastTickTime(){return r},toPublic:c};return e>0&&o(e),l}var B=null;function U(){return B}function J(e,t){return S(t)?t:e.start(t)}function D(e){e.size>0&&e.forEach(function(e){e.stop()})}function q(e,t){var n,r=null==(n=R())?void 0:n.group;if(!r)throw new Error("'"+e+"' must be run in coroutine");var o=new Map;return s.isArray(t)?t.forEach(function(e,t){o.set(t,J(r,e))}):s.isObject(t)&&Object.keys(t).forEach(function(e){o.set(e,J(r,t[e]))}),o.stopAll=function(){D(o)},o}var j=regeneratorRuntime.mark(V);function V(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t={},!((n=q("waitForAll",e)).size>0)){r.next=18;break}r.prev=3;case 4:if(n.forEach(function(e,r){e.isDone()&&(t[r]={exception:e.exception,result:e.result},n.delete(r))}),0!==n.size){r.next=8;break}return r.abrupt("break",12);case 8:return void(r.next=10);case 10:r.next=4;break;case 12:r.next=18;break;case 14:throw r.prev=14,r.t0=r.catch(3),n.stopAll(),r.t0;case 18:return r.abrupt("return",t);case 19:case"end":return r.stop()}},j,null,[[3,14]])}var W=regeneratorRuntime.mark(K);function K(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t={},!((n=q("waitForAny",e)).size>0)){o.next=20;break}o.prev=3;case 4:if(r=!1,n.forEach(function(e,o){e.isDone()&&(t[o]={exception:e.exception,result:e.result},n.delete(o),r=!0)}),!r){o.next=10;break}return n.stopAll(),o.abrupt("break",14);case 10:return void(o.next=12);case 12:o.next=4;break;case 14:o.next=20;break;case 16:throw o.prev=16,o.t0=o.catch(3),n.stopAll(),o.t0;case 20:return o.abrupt("return",t);case 21:case"end":return o.stop()}},W,null,[[3,16]])}var z=regeneratorRuntime.mark(H);function H(e,t){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t>0)){r.next=10;break}n=e.lastTickTime;case 2:if(!(e.lastTickTime-n>=t)){r.next=6;break}return r.abrupt("break",10);case 6:return void(r.next=8);case 8:r.next=2;break;case 10:case"end":return r.stop()}},z)}var Z=regeneratorRuntime.mark(Q);function Q(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=U()){n.next=3;break}throw new Error("'waitForMilliseconds' must be run in coroutine");case 3:return n.next=5,H(t,Math.max(e,0));case 5:case"end":return n.stop()}},Z)}var Y=regeneratorRuntime.mark(X);function X(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=U()){n.next=3;break}throw new Error("'waitForSeconds' must be run in coroutine");case 3:return n.next=5,H(t,Math.max(1e3*e,0));case 5:case"end":return n.stop()}},Y)}var $=regeneratorRuntime.mark(ee);function ee(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!((t=Math.max(e,0))>0)){r.next=10;break}n=0;case 3:if(!(++n>t)){r.next=6;break}return r.abrupt("break",10);case 6:return void(r.next=8);case 8:r.next=3;break;case 10:case"end":return r.stop()}},$)}var te=regeneratorRuntime.mark(ne);function ne(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===e()){t.next=5;break}return void(t.next=3);case 3:t.next=0;break;case 5:case"end":return t.stop()}},te)}var re=regeneratorRuntime.mark(oe);function oe(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==e()){t.next=5;break}return void(t.next=3);case 3:t.next=0;break;case 5:case"end":return t.stop()}},re)}var se=Object.freeze({__proto__:null,asAsync:function(e){return regeneratorRuntime.mark(function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a,i,c,u,p,l,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this,c=!1,r=r.slice(0),l=r.length-1,"function"==typeof(d=r[l])&&(i=d,r[l]=function(){try{var e=i.apply(null,arguments);s.isObject(e)?(u=e.exception,p=e.result):p=e}catch(t){u=t}c=!0}),!i){t.next=17;break}e.apply(a,r);case 8:if(c){t.next=13;break}return void(t.next=11);case 11:t.next=8;break;case 13:if(!u){t.next=15;break}throw u;case 15:t.next=18;break;case 17:p=e.apply(a,r);case 18:return t.abrupt("return",p);case 19:case"end":return t.stop()}},t,this)})},startStopwatch:function(){var e,t,n=U();if(!n)throw new Error("'startStopwatch' must be run in coroutine");var r={get elapsedSeconds(){return(n.lastTickTime-e)/1e3},get elapsedMilliseconds(){return n.lastTickTime-e},get elapsedTicks(){return n.currentTickCount-t},restart:function(){e=n.lastTickTime,t=n.currentTickCount}};return r.restart(),r},waitForAll:V,waitForAny:K,waitForMilliseconds:Q,waitForSeconds:X,waitForTicks:ee,waitUntil:ne,waitWhile:oe});function ae(e){return l(e)===c}function ie(e){return l(e)===i}function ce(e){return l(e)===a}function ue(e){return l(e)===u}var pe=function e(t){var n=t.groupSet,r=t.mainGroup;function o(e,t,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n})}var s=t.toPublic();return o(s,"current",function(){var e;return null==(e=R())?void 0:e.toPublic()}),o(s,"currentRuntime",function(){var e;return null==(e=U())?void 0:e.toPublic()}),o(s,"CoroutineStop",function(){return f}),s.start=function(e){return r.start(e).toPublic()},s.isCoroutine=S,s.isCoroutineGroup=w,s.isGenerator=ae,s.isGeneratorFunction=ie,s.isAsyncFunction=ce,s.isPromise=ue,s.isSupportedAsync=d,s.promiseToGenerator=F,s.Runtime=function(t){return e(N(t))},s.CoroutineGroup=function(e,t){return G(n,e,t).toPublic()},s.CoroutineGroup.getGroupByName=function(e){var t;return null==(t=n.getByName(e))?void 0:t.toPublic()},s.CoroutineGroup.hasGroup=n.has,s.CoroutineGroup.hasGroupByName=n.hasByName,Reflect.ownKeys(L).forEach(function(e){o(s.CoroutineGroup,e+"Priority",function(){return L[e]})}),Reflect.ownKeys(se).forEach(function(e){s[e]=se[e]}),s}(N());t.exports=pe,cc._RF.pop()},{"./value-types.cc":"value-types.cc"}],connectToServer:[function(e,t,n){"use strict";cc._RF.push(t,"ad6388hSVFLlJETm5TwUemS","connectToServer"),n.__esModule=!0,n.default=function(e,t,n,a,i){var c=new r.MainSrvCmdLogic(new s.default.PhotonIf("Ws",e+":"+t)),u=new r.LobbySrvCmdLogic(101,1),p=new r.GameSrvBaseCmdLogic({});c.SetLbSrvCmdLogicObj(u),u.SetGameSrvCmdLogicObj(p),p.SetGameCmdFunc(o.default),cc.store.mainServer=c,cc.store.lobbyServer=u,cc.store.gameServer=p,c.RunLogin(n,a,i)};var r=e("./BaseCmdLogic"),o=a(e("./handleGameCommand")),s=a(e("./Photon_Interface"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default,cc._RF.pop()},{"./BaseCmdLogic":"BaseCmdLogic","./Photon_Interface":"Photon_Interface","./handleGameCommand":"handleGameCommand"}],decBetButton:[function(e,t){"use strict";cc._RF.push(t,"71bd3ud10FANbZ3VcXhLvvA","decBetButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){var e=cc.find("Canvas/Game/Machine/UI/BetPanel/Value").getComponent(cc.Label),t=parseFloat(e.string);t>cc.store.minBet&&t<=cc.store.maxBet&&(e.string=cc.store.currentBet=t<=1?parseFloat((t-.1).toPrecision(12)):t<=10?t-1:t-10)})}}),cc._RF.pop()},{}],freeSpinAnim:[function(e,t,n){"use strict";cc._RF.push(t,"b0b669BCXVCUpQgg5VRna7b","freeSpinAnim"),n.__esModule=!0,n.default=a;var r,o=(r=e("./co.cc"))&&r.__esModule?r:{default:r},s=regeneratorRuntime.mark(a);function a(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=cc.store.gameResult.type,console.log(e),2!=e){t.next=7;break}return t.next=5,o.default.waitForSeconds(5);case 5:t.next=9;break;case 7:return void(t.next=9);case 9:case"end":return t.stop()}},s)}t.exports=n.default,cc._RF.pop()},{"./co.cc":"co.cc"}],getSymbolAnchor:[function(e,t,n){"use strict";cc._RF.push(t,"e0de66QVMBJKYV/WAVPXtub","getSymbolAnchor"),n.__esModule=!0,n.default=void 0;var r,o=(r={},function(e){var t="Canvas/Game/Machine/Performance/Anchors/"+(Math.floor(e/3)+1)+"/"+(e%3+1),n=r[t];return void 0===n&&(n=r[t]=cc.find(t)),n});n.default=o,t.exports=n.default,cc._RF.pop()},{}],getSymbolSprite:[function(e,t,n){"use strict";cc._RF.push(t,"228bf6KrtxN0qHJ1bjh23br","getSymbolSprite"),n.__esModule=!0,n.default=void 0;var r,o=(r={},function(e){var t="Canvas/Game/Machine/Performance/Symbols/"+(e+1),n=r[t];return void 0===n&&(n=r[t]=cc.find(t).getComponent(cc.Sprite)),n});n.default=o,t.exports=n.default,cc._RF.pop()},{}],handleGameCommand:[function(e,t,n){"use strict";cc._RF.push(t,"547502AtRxEfq8fxpX3tzx8","handleGameCommand"),n.__esModule=!0,n.default=void 0;var r,o=(r=!0,function(e){switch(console.log("--%o",e),e[0]){case 3072:!0===r&&(r=!1,cc.store.userPoints=e[4],cc.find("Canvas/Game/Machine/UI/GamePoint/Value").getComponent(cc.Label).string=cc.store.userPoints,cc.store.maxBet=e[2],cc.store.minBet=cc.store.currentBet=e[3],cc.store.gameResult.iGrid=e[8],cc.find("Canvas/Game/Machine/UI/BetPanel/Value").getComponent(cc.Label).string=cc.store.currentBet,cc.find("Canvas/Game").active=!0),cc.store.freeGameCnts=e[9];break;case 3073:if(1===cc.store.gameResultGotStatus){var t=cc.store.gameResult;t.type=e[1],t.iGrid=e[2],t.iLine=e[3],t.iFrame=e[4],t.freeGameNCnts=e[5],t.WinPointLine=e[6],t.WinTotalPoint=e[7],cc.store.userPoints=e[8],!1===t.iGrid.some(function(e){return-1===e})&&(cc.store.gameResultGotStatus=2)}break;case 3074:cc.store.FreeTotalPoint=e[1],cc.store.userPoints=e[2]}});n.default=o,t.exports=n.default,cc._RF.pop()},{}],historyButton:[function(e,t){"use strict";cc._RF.push(t,"8babavgekZPEpL8e3kJT8gt","historyButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){})}}),cc._RF.pop()},{}],homeButton:[function(e,t){"use strict";cc._RF.push(t,"e0f0fpDjTFD5KItGQKTAbjQ","homeButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){history.back()})}}),cc._RF.pop()},{}],incBetButton:[function(e,t){"use strict";cc._RF.push(t,"f2aafML1QxASK398CLTW68w","incBetButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){var e=cc.find("Canvas/Game/Machine/UI/BetPanel/Value").getComponent(cc.Label),t=parseFloat(e.string);t>=cc.store.minBet&&t<cc.store.maxBet&&(e.string=cc.store.currentBet=t<=.9?parseFloat((t+.1).toPrecision(12)):t<=9?t+1:t+10)})}}),cc._RF.pop()},{}],lineFrames:[function(e,t,n){"use strict";cc._RF.push(t,"39601ETg/9KGoLPsbyMzon/","lineFrames"),n.__esModule=!0,n.default=void 0;n.default={1:[1,4,7,10,13],2:[0,3,6,9,12],3:[2,5,8,11,14],4:[0,4,8,10,12],5:[2,4,6,10,14],6:[0,3,7,9,12],7:[2,5,7,11,14],8:[1,5,8,11,13],9:[1,3,6,9,13]},t.exports=n.default,cc._RF.pop()},{}],login:[function(e,t){"use strict";cc._RF.push(t,"85648I+CixBf4DWMENK4Ole","login");var n,r=(n=e("./connectToServer"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,onLoad:function(){var e=this.node.getChildByName("Account").getComponent(cc.EditBox),t=this.node.getChildByName("Password").getComponent(cc.EditBox),n=this.node.getChildByName("Ok").getComponent(cc.Button);n.node.on("click",function(){0!==e.string.length&&0!==t.string.length&&(e.enabled=!1,t.enabled=!1,n.interactable=!1,(0,r.default)("213.139.235.73",6380,e.string,t.string))})}}),cc._RF.pop()},{"./connectToServer":"connectToServer"}],mainController:[function(e,t){"use strict";cc._RF.push(t,"1446fW+futK1KApvESDrZxQ","mainController");var n=o(e("./co.cc")),r=o(e("./connectToServer"));function o(e){return e&&e.__esModule?e:{default:e}}var s=e("PublicSetUp");cc.Class({extends:cc.Component,properties:{MusicClip:{default:null,type:cc.AudioClip},AudioClip:{default:[],type:[cc.AudioClip]}},onLoad:function(){s.audio1=this.AudioClip[0],s.MusicClip=this.MusicClip,cc.store={type:0,minBet:0,maxBet:0,currentBet:0,freeGameCnts:0,FreeTotalPoint:0,soundEnabled:!0,gameResult:{},gameResultGotStatus:0,isGameResultGot:function(){return 3===cc.store.gameResultGotStatus},playing:!1,auto:!1,canPlay:function(){return!0},mainServer:null,lobbyServer:null,gameServer:null}},start:function(){cc.audioEngine.playMusic(this.MusicClip,!0),cc.assetManager.loadBundle("mp4",function(e,t){e||t.preloadDir("./",cc.VideoClip)}),console.log(s.account),cc.find("Canvas/Game").active=!1;var e=location.href,t=new URL(e);""==s.account?(s.account=t.searchParams.get("WebToken"),(0,r.default)("213.139.235.73",6380,t.searchParams.get("WebToken"),s.password,2)):(0,r.default)("213.139.235.73",6380,s.account,s.password,0)},update:function(){n.default.performTick(cc.director._lastUpdate)}}),cc._RF.pop()},{"./co.cc":"co.cc","./connectToServer":"connectToServer",PublicSetUp:"PublicSetUp"}],manualPlayButton:[function(e,t){"use strict";cc._RF.push(t,"b9566A1+5FBDIzPZ8OTD7hx","manualPlayButton"),e("PublicSetUp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){cc.store.auto=!0,console.log(cc.store.auto);var e=cc.find("Canvas/Game/Machine/UI/AutoPlayButton");e.active=!0,e.getComponent(cc.Button).interactable=!0;var t=cc.find("Canvas/Game/Machine/UI/ManuaPlayButton");t.active=!1,t.getComponent(cc.Button).interactable=!1})}}),cc._RF.pop()},{PublicSetUp:"PublicSetUp"}],maxBetButton:[function(e,t){"use strict";cc._RF.push(t,"425daQsnfJASJOUlZYhhJGG","maxBetButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){var e=cc.find("Canvas/Game/Machine/UI/BetPanel/Value").getComponent(cc.Label);parseInt(e.string)!==cc.store.maxBet&&(e.string=cc.store.currentBet=cc.store.maxBet)})}}),cc._RF.pop()},{}],menuButton:[function(e,t){"use strict";cc._RF.push(t,"5d7a75w+adBHZkh/QGIIFoc","menuButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){cc.find("Canvas/Game/Machine/UI/Menu").getComponent("menuController").dropDown()})}}),cc._RF.pop()},{}],menuController:[function(e,t){"use strict";cc._RF.push(t,"94c83znD15MILrkKX56KJvR","menuController");var n,r=(n=e("./co.cc"))&&n.__esModule?n:{default:n};cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=regeneratorRuntime.mark(n),t=cc.find("SettingsPanel",this.node);function n(){var n,s,c,u,p,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==o&&2!==o){e.next=23;break}e.prev=1,n=1.6,s=r.default.currentRuntime.lastTickTime,c=0;case 5:return(u=n*c)>a&&(u=a),a-=u,p=1===o?-1:1,t.y+=u*p,void(e.next=13);case 13:if(!(a<=0)){e.next=15;break}return e.abrupt("break",20);case 15:l=r.default.currentRuntime.lastTickTime,c=l-s,s=l,e.next=5;break;case 20:return e.prev=20,i=null,e.finish(20);case 23:case"end":return e.stop()}},e,null,[[1,,20,23]])}t.y=this.node.height;var o=0,s=this.node.height,a=0,i=null;this.dropDown=function(){1===o?o=2:0!==o&&2!==o||(o=1),a=0===a?s:s-a,null===i&&(i=r.default.start(n))}},start:function(){var e=cc.find("SettingsPanel",this.node);if(!0===cc.store.soundEnabled){var t=cc.find("SoundOnButton",e);t.active=!1,t.getComponent(cc.Button).interactable=!1;var n=cc.find("SoundOffButton",e);n.active=!0,n.getComponent(cc.Button).interactable=!0}else{var r=cc.find("SoundOnButton",e);r.active=!0,r.getComponent(cc.Button).interactable=!0;var o=cc.find("SoundOffButton",e);o.active=!1,o.getComponent(cc.Button).interactable=!1}}}),cc._RF.pop()},{"./co.cc":"co.cc"}],"observable.cc":[function(e,t,n){"use strict";cc._RF.push(t,"6051cnGfspElqNWqRW7U1y5","observable.cc");var r=["type"];function o(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./co.cc"),a=e("./value-types.cc");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=i(s),u=Object.freeze([]),p={active:function(e,t){var n=e.dispatch,r=e.unsubscribe,o=e.complete,s=[],i=function(){var e;return 0===s.length?e=u:(e=s,s=[]),e};return t.coroutineGroup.start(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({getStates:i});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("[observable.createActiveScheduler] error: "+a.errorToString(e.t0));case 8:s.length>0&&(s=[]),r(),o();case 11:case"end":return e.stop()}},e,null,[[0,5]])})),{schedule:function(e){s.push(e)}}},immediate:function(e){var t=e.dispatch,n=e.unsubscribe,r=e.isUnsubscribed,o=e.complete;return{schedule:function(e){var s=!0===e.end;try{t(e)}catch(i){console.error("[observable.ImmediateScheduler] error: "+a.errorToString(i))}(s||r())&&(n(),o())}}},queue:function(e,t){var n=e.dispatch,r=e.unsubscribe,o=e.isUnsubscribed,s=e.complete,i=[],c=t.coroutineGroup.start(regeneratorRuntime.mark(function e(){var t,u,p,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0,u=!1,e.prev=3,p=i.length;case 5:if(!(t<p)){e.next=12;break}return l=i[t++],u=u||!0===l.end,e.next=10,n(l);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("[observable.QueueScheduler] error: "+a.errorToString(e.t0));case 17:if(t>0&&i.splice(0,t),0!==i.length){e.next=26;break}if(!u&&!o()){e.next=23;break}return r(),s(),e.abrupt("break",28);case 23:return c.suspend(),void(e.next=26);case 26:e.next=0;break;case 28:case"end":return e.stop()}},e,null,[[3,14]])}));return{schedule:function(e){i.push(e),c.resume()}}},async:function(e,t){var n,r=e.dispatch,o=e.unsubscribe,s=e.isUnsubscribed,i=e.complete,c=Math.max(null!=(n=t.maxConcurrentLimit)?n:0,0),u=[],p=0,l=!1,d=function(){var e;0===u.length?0===p&&(l||s())&&(o(),i()):!(p<c||0===c)||!1!==u[0].end&&0!==p||(e=u.shift(),l=l||!0===e.end,++p,t.coroutineGroup.start(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("[observable.AsyncScheduler] error: "+a.errorToString(t.t0));case 8:--p,d();case 10:case"end":return t.stop()}},t,null,[[0,5]])})))};return{schedule:function(e){u.push(e),d()}}}};function l(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return null==(t=p[e])?void 0:t.call.apply(t,[p].concat(r))}function d(e,t,n,s){var a,i;null!=s.scheduler||(s.scheduler={}),null!=(a=s.scheduler).type||(a.type="queue"),null!=(i=s.scheduler).coroutineGroup||(i.coroutineGroup=e.coroutineGroup);var c=h(e,t),u=n({unsubscribe:c.unsubscribe,isUnsubscribed:c.isUnsubscribed,getSubscribedCount:c.getSubscribedCount,next:c.next,complete:c.complete}),p=s.scheduler,d=p.type,f=o(p,r),m=l(d,{dispatch:u,unsubscribe:c.unsubscribe,isUnsubscribed:c.isUnsubscribed,complete:c.complete},f);if(void 0===m)throw new Error("not supported scheduler: "+d);return c.push=function(e){c.isUnsubscribed()||m.schedule(e)},c}function h(e,t){void 0===t&&(t=null);var n=new Set,r=!1,o=!1,s=function(e){n.forEach(function(t){t.push(e)})},a={subscribe:function(t,r){void 0===r&&(r={});var s=d(e,a,t,r);return s.isUnsubscribed()||(n.add(s),!0===o&&s.push({end:!0})),{subscribe:s.subscribe}},unsubscribe:function(){!1===r&&(r=!0,null!==t&&t.unsubscribeChild(a))},unsubscribeChild:function(e){n.has(e)&&e.isUnsubscribed()&&n.delete(e)},isUnsubscribed:function(){return!0===r},getSubscribedCount:function(){return n.size},next:function(e){!1===o&&s({value:e,end:!1})},complete:function(e){!1===o&&(o=!0,s({error:e,end:!0}))}};return a}function f(e,t){void 0===t&&(t=c.default.mainGroup),e&&c.default.isCoroutineGroup(e)&&(t=e,e=void 0);var n=h({coroutineGroup:t});return void 0===e?{subscribe:n.subscribe,getSubscribedCount:n.getSubscribedCount,next:n.next,complete:n.complete}:(t.start(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e({getSubscribedCount:n.getSubscribedCount,next:n.next,complete:n.complete});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("[observable.Observable] error: "+a.errorToString(t.t0));case 8:n.complete();case 9:case"end":return t.stop()}},t,null,[[0,5]])})),{subscribe:n.subscribe})}function m(){}var v=f;v.from=function(){throw new Error("not implemented")},n.EventEmitter=function(){var e=0,t=-1,n=new Map,r=new Map,o=new Set,s=function(o,s){return t>0?(e=t,t=-1):++e,n.has(o)?n.get(o).set(e,s):n.set(o,new Map([[e,s]])),r.set(e,o),e},i=function(e,t){var n=s(e,t);return o.add(t),n},c=function(e){if(r.has(e)){var o=r.get(e);r.delete(e);var s=n.get(o);if(s.has(e))return s.delete(e),t=e,!0}return!1},u=function(e){n.has(e)&&n.get(e).clear()},p=function(e,t,n){try{e.apply(void 0,n)}catch(r){console.error("[observable.EventEmitter] error: "+a.errorToString(r))}finally{o.has(e)&&(o.delete(e),c(t))}};return{addListener:s,addOnceListener:i,removeListener:c,removeAllListeners:u,getListeners:function(e){if(n.has(e)){var t=[];return n.get(e).forEach(function(e){t.push(e)}),t}},getListenerCount:function(e){return n.has(e)?n.get(e).size:0},getEventNames:function(){var e=[];return n.forEach(function(t,n){e.push(n)}),e},emit:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n.has(e)&&n.get(e).forEach(function(e,t){p(e,t,r)})},on:s,once:i,off:c,offAll:u}},n.Observable=v,n.Task=function(e,t){void 0===t&&(t=c.default.mainGroup);var n,r=f(t),o=function(e){return r.subscribe(e)},s=regeneratorRuntime.mark(function e(t){var r,o;return void 0===t&&(t=-1),regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=c.default.currentRuntime,o=t>0?r.lastTickTime:0;case 2:if(!n.isDone()){e.next=5;break}return e.abrupt("break",14);case 5:if(!(t>0&&t<r.lastTickTime-o)){e.next=10;break}return n.stop(m),e.next=9,c.default.waitUntil(function(){return n.isDone()});case 9:return e.abrupt("break",14);case 10:return void(e.next=12);case 12:e.next=2;break;case 14:if(void 0===n.exception){e.next=16;break}throw n.exception;case 16:return e.abrupt("return",n.result);case 17:case"end":return e.stop()}},e)}),a=function(){n.stop()},i=function(){return n.isStopping()},u=function(){return n.isStopped()},p=function(){return n.isDone()};return{subscribe:o,start:function(){return void 0===n&&(n=t.start(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e({getSubscribedCount:r.getSubscribedCount,next:r.next,complete:r.complete});case 3:return t.abrupt("return",t.sent);case 4:return t.prev=4,r.complete(),t.finish(4);case 7:case"end":return t.stop()}},t,null,[[0,,4,7]])}))),{get result(){return n.result},get exception(){return n.exception},subscribe:o,wait:s,cancel:a,isCanceling:i,isCanceled:u,isDone:p}}}},n.TaskTimeout=m,n.mapEventListener=function(e,t){var n;return(n={})["add"+t+"Listener"]=function(n){return e.addListener(t,n)},n["add"+t+"OnceListener"]=function(n){return e.addOnceListener(t,n)},n["remove"+t+"Listener"]=e.removeListener,n["removeAll"+t+"Listeners"]=function(){return e.removeAllListeners(t)},n["get"+t+"ListenerCount"]=function(){return e.getListenerCount(t)},n["get"+t+"Listeners"]=function(){return e.getListeners(t)},n["emit"+t]=function(){return e.emit(t)},n},cc._RF.pop()},{"./co.cc":"co.cc","./value-types.cc":"value-types.cc"}],pauseButton:[function(e,t){"use strict";cc._RF.push(t,"6130716dp1L2KxcVD41hLFh","pauseButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){!0===cc.store.playing&&(cc.store.playing=!1,cc.find("Canvas/Game/Machine/UI/playButton").active=!0,cc.find("Canvas/Game/Machine/UI/PauseButton").active=!1)})}}),cc._RF.pop()},{}],performanceController:[function(e,t){"use strict";cc._RF.push(t,"56909yQz7dAZqiahqpg8Jba","performanceController");var n=c(e("./buildSymbols")),r=c(e("./co.cc")),o=c(e("./playAll")),s=c(e("./shuffle")),a=c(e("./requestTableInfo")),i=c(e("./requestGameResult"));function c(e){return e&&e.__esModule?e:{default:e}}e("PublicSetUp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.find("Symbols",this.node).active=!1,cc.find("Effect",this.node).active=!1;for(var e=cc.find("Lines",this.node),t=0;t<e.childrenCount;t++)e.getChildByName(""+(t+1)).active=!1;for(var n=cc.find("Anchors",this.node),r=1;r<=5;r++)for(var o=n.getChildByName(""+r),s=1;s<=3;s++)o.getChildByName(""+s).getComponent(cc.Sprite).spriteFrame=null},start:function(){cc.store.symbolDataList=new Array(5),cc.store.randomSymbolDataList=new Array(cc.store.symbolDataList.length);for(var e=cc.store,t=e.symbolDataList,c=e.randomSymbolDataList,u=0;u<c.length;u++){t[u]=new Array(24),c[u]=new Array(t[u].length);for(var p=0,l=c[u].length;p<l;p++)c[u][p]=Math.floor(11*Math.random())}for(var d=cc.store.gameResult.iGrid,h=0;h<t.length;h++){(0,s.default)(c[h]);var f,m=void 0;for(m=0;m<3;)t[h][m]=d[h+5*(2-m)],m++;for(f=t[h].length;m<f;)t[h][m]=c[h][m],m++}(0,n.default)(t),r.default.start(regeneratorRuntime.mark(function e(){var t,c,u,p,l,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(cc.store.gameResultGotStatus=0,t=cc.store,c=t.symbolDataList,u=t.randomSymbolDataList,p=cc.store.gameResult.iGrid,l=0;l<c.length;l++){for((0,s.default)(u[l]),d=void 0,h=void 0,d=0,h=c[l].length-1;d<3;)c[l][d]=p[l+5*(2-d)],c[l][h-d]=p[l+5*d],d++;for(h=c[l].length-3;d<h;)c[l][d]=u[l][d],d++}return(0,n.default)(c),e.next=8,r.default.waitUntil(function(){return!0===cc.store.playing});case 8:return(0,i.default)(),e.next=11,(0,o.default)();case 11:if((0,a.default)(),!0!==cc.store.playing){e.next=16;break}return 0==cc.store.auto&&(cc.store.playing=!1,cc.find("Canvas/Game/Machine/UI/playButton").active=!0,cc.find("Canvas/Game/Machine/UI/PauseButton").active=!1),e.next=16,r.default.waitForSeconds(1.2);case 16:e.next=0;break;case 18:case"end":return e.stop()}},e)}))}}),cc._RF.pop()},{"./buildSymbols":"buildSymbols","./co.cc":"co.cc","./playAll":"playAll","./requestGameResult":"requestGameResult","./requestTableInfo":"requestTableInfo","./shuffle":"shuffle",PublicSetUp:"PublicSetUp"}],playAll:[function(e,t,n){"use strict";cc._RF.push(t,"09f22Z8iyxG6rlCefOne9ya","playAll"),n.__esModule=!0,n.default=p;var r=i(e("./co.cc")),o=i(e("./playLine")),s=i(e("./playSymbolCol")),a=i(e("./playVideo"));function i(e){return e&&e.__esModule?e:{default:e}}var c=regeneratorRuntime.mark(p),u=e("PublicSetUp");function p(){var e,t,n,i,p,l,d,h,f,m,v,C,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(e=[],t=function(t){e.push(r.default.start(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)(t,3);case 2:case"end":return e.stop()}},e)})))},n=0;n<5;n++)t(n);return c.next=5,r.default.waitForAll(e);case 5:i=cc.store.gameResult,p=i.iLine,l=i.iFrame,d=i.freeGameNCnts,i.WinPointLine,i.WinTotalPoint,h=-1,f=8;case 8:if(!(f>=0)){c.next=15;break}if(1!==p[f]){c.next=12;break}return h=f,c.abrupt("break",15);case 12:f--,c.next=8;break;case 15:if(!(h>-1)){c.next=38;break}m=0;case 17:if(!(m<9)){c.next=25;break}if(1!==p[m]){c.next=22;break}return cc.find("Canvas/Game/Machine/UI/GameScore/Value").getComponent(cc.Label).string=cc.store.gameResult.WinPointLine[m],c.next=22,(0,o.default)(m,l[m],!0,m===h,4.5,3200);case 22:m++,c.next=17;break;case 25:for(v=[],C=function(e){1===p[e]&&v.push(r.default.start(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.default)(e,l[e],!1,!1,4.5,3700);case 2:case"end":return t.stop()}},t)})))},g=0;g<9;g++)C(g);return cc.find("Canvas/Game/Machine/UI/GameScore/Value").getComponent(cc.Label).string=cc.store.gameResult.WinTotalPoint,c.next=31,r.default.waitForAll(v);case 31:if(!(v.length>=2)){c.next=38;break}return c.next=34,(0,a.default)("random");case 34:cc.find("Canvas/Game/Machine/Particle_coin").active=!1,cc.find("Canvas/Game/Machine/VideoFrame").active=!1,cc.audioEngine.stopAll(u.audio1,!1),1==u.sound&&cc.audioEngine.playMusic(u.MusicClip,!0);case 38:d[0],cc.find("Canvas/Game/Machine/UI/GameScore/Value").getComponent(cc.Label).string=0,cc.find("Canvas/Game/Machine/UI/GamePoint/Value").getComponent(cc.Label).string=cc.store.userPoints;case 41:case"end":return c.stop()}},c)}t.exports=n.default,cc._RF.pop()},{"./co.cc":"co.cc","./playLine":"playLine","./playSymbolCol":"playSymbolCol","./playVideo":"playVideo",PublicSetUp:"PublicSetUp"}],playButton:[function(e,t){"use strict";cc._RF.push(t,"34956yDn7NGKbw+iIlWp/76","playButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){!0===cc.store.canPlay()&&!1===cc.store.playing&&(cc.store.playing=!0,cc.find("Canvas/Game/Machine/UI/playButton").active=!1,cc.find("Canvas/Game/Machine/UI/PauseButton").active=!0)})}}),cc._RF.pop()},{}],playEffect:[function(e,t,n){"use strict";cc._RF.push(t,"905532h4/pGgooz7sOid5re","playEffect"),n.__esModule=!0,n.default=void 0;var r,o,s=(r=e("./co.cc"))&&r.__esModule?r:{default:r},a=(o={},regeneratorRuntime.mark(function e(t,n,r){var a,i,c,u,p,l,d,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=!0),null===(a=t.getChildByName("Effect"))&&((a=new cc.Node("Effect")).active=!1,t.addChild(a)),null===(i=a.getComponent(cc.Sprite))&&(i=a.addComponent(cc.Sprite)),!0!==a.active){e.next=7;break}return e.abrupt("return");case 7:c=cc.find("Canvas/Game/Machine/Performance/Effect"),e.prev=8,a.active=!0;case 10:u=s.default.currentRuntime.lastTickTime,p=!1;case 13:if(!1!==p){e.next=25;break}return l=(s.default.currentRuntime.lastTickTime-u)/n,(d=Math.floor(c.childrenCount*l))>=c.childrenCount&&(d=c.childrenCount-1,p=!0),h="SlotEffect_"+d.toString().padStart(5,"0"),void 0===(f=o[h])&&(o[h]=f=c.getChildByName(h).getComponent(cc.Sprite).spriteFrame),i.spriteFrame=f,void(e.next=23);case 23:e.next=13;break;case 25:if(!0===r){e.next=27;break}return e.abrupt("break",29);case 27:e.next=10;break;case 29:return e.prev=29,a.active=!1,e.finish(29);case 32:case"end":return e.stop()}},e,null,[[8,,29,32]])}));n.default=a,t.exports=n.default,cc._RF.pop()},{"./co.cc":"co.cc"}],playLine:[function(e,t,n){"use strict";cc._RF.push(t,"7df3cW5mitLtr6VKY359Ywe","playLine"),n.__esModule=!0,n.default=u;var r=i(e("./co.cc")),o=i(e("./getSymbolAnchor")),s=i(e("./lineFrames")),a=i(e("./playEffect"));function i(e){return e&&e.__esModule?e:{default:e}}var c=regeneratorRuntime.mark(u);function u(e,t,n,i,u,p){var l,d,h;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(l=cc.find("Canvas/Game/Machine/Performance/Lines"),(d=l.getChildByName(""+(e+1))).active=!0,!0!==n){c.next=7;break}return d.x-=l.width,c.next=7,r.default.start(regeneratorRuntime.mark(function e(){var t,n,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=r.default.currentRuntime.lastTickTime,n=0;case 3:if(o=u*n,d.x+=o,!(d.x>=0)){e.next=9;break}return d.x=0,e.abrupt("break",16);case 9:return void(e.next=11);case 11:s=r.default.currentRuntime.lastTickTime,n=s-t,t=s,e.next=3;break;case 16:return e.prev=16,d.x=0,e.finish(16);case 19:case"end":return e.stop()}},e,null,[[0,,16,19]])}));case 7:return c.prev=7,h=[],c.prev=9,c.delegateYield(regeneratorRuntime.mark(function n(){var i,c,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(i=s.default[e+1],c=function(e){h.push(r.default.start(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.default)((0,o.default)(i[e]),2e3);case 2:case"end":return t.stop()}},t)})))},u=0;u<t;u++)c(u);return n.next=5,r.default.waitForMilliseconds(p);case 5:case"end":return n.stop()}},n)})(),"t0",11);case 11:return c.prev=11,h.forEach(function(e){return e.stop()}),c.finish(11);case 14:return c.prev=14,!1===i&&(d.active=!1),c.finish(14);case 17:case"end":return c.stop()}},c,null,[[7,,14,17],[9,,11,14]])}t.exports=n.default,cc._RF.pop()},{"./co.cc":"co.cc","./getSymbolAnchor":"getSymbolAnchor","./lineFrames":"lineFrames","./playEffect":"playEffect"}],playSymbolCol:[function(e,t,n){"use strict";cc._RF.push(t,"2eb7deXGDJNl6WX8kLesyPk","playSymbolCol"),n.__esModule=!0,n.default=a;var r,o=(r=e("./co.cc"))&&r.__esModule?r:{default:r},s=regeneratorRuntime.mark(a);function a(e,t){var n,r,a,i,c,u,p,l,d,h;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n=cc.find("Canvas/Game/Machine/Performance/Cols"),r=n.getChildByName(""+(e+1)),a=r.children[1].y-r.children[0].y,i=r.children[r.childrenCount-3].y-r.children[0].y,c=i,u=o.default.currentRuntime.lastTickTime,p=0;case 7:return(l=t*p)>=a&&(l=t*(1/60)*1e3),l>=c?!0===cc.store.isGameResultGot()?r.redist>0?(r.y=r.baseY,l-=c,i=r.children[r.redist].y-r.children[0].y,c=i,r.redist=0):l=c:(r.y=r.baseY,l-=c,c=i):r.redist2>0&&(d=r.children[r.redist2].y-r.children[0].y,c=i=d-(i-c),r.redist2=0),c-=l,r.y-=l,void(s.next=15);case 15:if(!(c<=0)){s.next=17;break}return s.abrupt("break",22);case 17:h=o.default.currentRuntime.lastTickTime,p=h-u,u=h,s.next=7;break;case 22:case"end":return s.stop()}},s)}t.exports=n.default,cc._RF.pop()},{"./co.cc":"co.cc"}],playVideo:[function(e,t,n){"use strict";cc._RF.push(t,"0c65dzSrlBHP6e1UaxRHn2s","playVideo"),n.__esModule=!0,n.default=void 0;var r=o(e("./co.cc"));function o(e){return e&&e.__esModule?e:{default:e}}o(e("./sound"));var s=e("PublicSetUp"),a=function(){var e=null,t=null,n=!1;function o(e){e.enabled=!1,e.clip=null,n=!1}return regeneratorRuntime.mark(function a(i){var c,u,p;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==e){a.next=7;break}if(null!==(e=cc.find("Canvas/Game/Machine/Performance/VideoPlayer"))){a.next=4;break}return a.abrupt("return");case 4:e.on("ready-to-play",function(e){e.enabled=!0,e.play(),1==s.sound&&cc.audioEngine.playEffect(s.audio1,!0),cc.find("Canvas/Game/Machine/Particle_coin").active=!0,cc.find("Canvas/Game/Machine/VideoFrame").active=!0}),e.on("error",o),e.on("completed",o);case 7:if(null!=t){a.next=11;break}if(null!==(t=cc.assetManager.getBundle("mp4"))){a.next=11;break}return a.abrupt("return");case 11:if("random"===i&&(i=(c=["LINE_MOVIE_1643105941778","LINE_MOVIE_1643105948791"])[Math.floor(Math.random()*c.length)]),null!=(u=t.get(i,cc.VideoClip))){a.next=18;break}return p=!1,t.load(i,cc.VideoClip,function(e,t){p=!0,e||(u=t)}),a.next=18,r.default.waitUntil(function(){return!0===p});case 18:if(null==u){a.next=23;break}return e.getComponent(cc.VideoPlayer).clip=u,n=!0,a.next=23,r.default.waitUntil(function(){return!1===n});case 23:case"end":return a.stop()}},a)})}();n.default=a,t.exports=n.default,cc._RF.pop()},{"./co.cc":"co.cc","./sound":"sound",PublicSetUp:"PublicSetUp"}],readMeButton:[function(e,t){"use strict";cc._RF.push(t,"bce97NYoj9IO59QL1TApEv3","readMeButton"),cc.Class({extends:cc.Component,onLoad:function(){this.node.getComponent(cc.Button).node.on("click",function(){})}}),cc._RF.pop()},{}],requestGameResult:[function(e,t,n){"use strict";cc._RF.push(t,"53e61tB6ghOP4phobMRUcRW","requestGameResult"),n.__esModule=!0,n.default=void 0;var r,o=(r=e("./co.cc"))&&r.__esModule?r:{default:r},s=e("./buildSymbols");function a(e){e.parent._updateWorldMatrix();var t=e._contentSize.width,n=e._contentSize.height,r=cc.rect(-e._anchorPoint.x*t,-e._anchorPoint.y*n,t,n);return e._calculWorldMatrix(),r.transformMat4(r,e._worldMatrix),r}var i=function(){var e=o.default.CoroutineGroup("RequestGameResult",{priority:o.default.CoroutineGroup.NormalPriority+1});function t(e){for(var t=cc.store.symbolDataList,n=cc.store.gameResult.iGrid,r=0;r<t.length;r++)for(var o=0;o<3;o++){var a=n[r+5*o];t[r][e-o]=a,(0,s.setSymbol)(r,e-o,a)}}function n(e,t,n){for(var r=0;r<e.childrenCount;r++)e.getChildByName(""+(r+1))[t]=n}return function(){var r,s=cc.find("Canvas/Game/Machine/Performance/Cols");n(s,"redist",0),n(s,"redist2",0),cc.store.gameResultGotStatus=1,null==(r=cc.store)||r.gameServer.GetPI().sendData(3162,cc.store.currentBet),console.log(3162),e.start(regeneratorRuntime.mark(function e(){var r,i,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,i=s.getChildByName(""+(r+1)),c=a(s),u=!1;case 4:if(2!==cc.store.gameResultGotStatus){e.next=23;break}if(!0!==c.intersects(a(i.children[i.childrenCount-3]))){e.next=14;break}return t(5),n(s,"redist",3),cc.store.gameResultGotStatus=3,e.next=12,o.default.waitUntil(function(){return!0===c.intersects(a(i.children[3]))});case 12:e.next=19;break;case 14:if(!0!==u&&!1!==cc.store.playing){e.next=18;break}return e.delegateYield(regeneratorRuntime.mark(function e(){var r,u,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.childrenCount-4;!0!==c.intersects(a(i.children[--r])););return t(u=r+3),n(s,"redist2",p=u-2),cc.store.gameResultGotStatus=3,e.next=9,o.default.waitUntil(function(){return!0===c.intersects(a(i.children[p]))});case 9:case"end":return e.stop()}},e)})(),"t0",16);case 16:e.next=19;break;case 18:cc.store.gameResultGotStatus=3;case 19:return t(cc.store.symbolDataList[r].length-1),e.abrupt("break",28);case 23:!1===u&&(u=c.intersects(a(i.children[i.childrenCount-3])));case 24:return void(e.next=26);case 26:e.next=4;break;case 28:case"end":return e.stop()}},e)}))}}();n.default=i,t.exports=n.default,cc._RF.pop()},{"./buildSymbols":"buildSymbols","./co.cc":"co.cc"}],requestTableInfo:[function(e,t,n){"use strict";cc._RF.push(t,"ea41dwm6KNGRr/Hhs6XSq53","requestTableInfo"),n.__esModule=!0,n.default=function(){var e;null==(e=cc.store)||e.gameServer.GetPI().sendData(3161)},t.exports=n.default,cc._RF.pop()},{}],shuffle:[function(e,t,n){"use strict";cc._RF.push(t,"3088bIf7hFLLb+KojLFSOpO","shuffle"),n.__esModule=!0,n.default=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}},t.exports=n.default,cc._RF.pop()},{}],soundOffButton:[function(e,t){"use strict";cc._RF.push(t,"c7e77eYJVZJbpCXbZ8oqtld","soundOffButton");var n=e("PublicSetUp");cc.Class({extends:cc.Component,onLoad:function(){var e=this.node.getComponent(cc.Button);e.node.on("click",function(){if(!0===cc.store.soundEnabled){cc.store.soundEnabled=!1,e.node.active=!1,e.getComponent(cc.Button).interactable=!1,cc.audioEngine.stopAll(n.audio1,!1),cc.audioEngine.stopMusic();var t=cc.find("Canvas/Game/Machine/UI/Menu/SettingsPanel/SoundOnButton");t.active=!0,t.getComponent(cc.Button).interactable=!0}})}}),cc._RF.pop()},{PublicSetUp:"PublicSetUp"}],soundOnButton:[function(e,t){"use strict";cc._RF.push(t,"ffb6fjQ0+RNLo0s6j9YDXb0","soundOnButton");var n=e("PublicSetUp");cc.Class({extends:cc.Component,onLoad:function(){var e=this.node.getComponent(cc.Button);e.node.on("click",function(){if(!1===cc.store.soundEnabled){cc.store.soundEnabled=!0,n.sound=1,cc.audioEngine.playMusic(n.MusicClip,!0),e.node.active=!1,e.getComponent(cc.Button).interactable=!1;var t=cc.find("Canvas/Game/Machine/UI/Menu/SettingsPanel/SoundOffButton");t.active=!0,t.getComponent(cc.Button).interactable=!0}})}}),cc._RF.pop()},{PublicSetUp:"PublicSetUp"}],sound:[function(e,t,n){"use strict";cc._RF.push(t,"bb130IWGFNKM7n3PNczQ2B1","sound"),n.__esModule=!0,n.default=void 0;var r=e("PublicSetUp"),o=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("*"),0==r.sound&&cc.audioEngine.playEffect(t,!0);case 2:case"end":return e.stop()}},e)});n.default=o,t.exports=n.default,cc._RF.pop()},{PublicSetUp:"PublicSetUp"}],symbolGridIndexMapping:[function(e,t,n){"use strict";cc._RF.push(t,"b60119mLBhMQby66QcdkI7P","symbolGridIndexMapping"),n.__esModule=!0,n.default=void 0;n.default={0:0,1:3,2:6,3:9,4:12,5:1,6:4,7:7,8:10,9:13,10:2,11:5,12:8,13:11,14:14},t.exports=n.default,cc._RF.pop()},{}],"value-types.cc":[function(e,t,n){"use strict";function r(e){var t=typeof e;return("number"===t||"string"===t&&""!==e)&&Number.isInteger(1*e)}cc._RF.push(t,"49246LeIZxFhqidu40sdZdX","value-types.cc"),Object.defineProperty(n,"__esModule",{value:!0});var o=Object.prototype.hasOwnProperty,s=function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function a(e,t){if(s(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++){var i=n[a];if(!o.call(t,i)||!s(e[i],t[i]))return!1}return!0}function i(){var e,t=regeneratorRuntime.mark(C),n=regeneratorRuntime.mark(g),r={},o=null,s=null,c=0,u=0,p=!0;function l(e,t){var n=e[t];return n?p?n.public:n:null}function d(e){var t=null;if(e){p=!1;try{(t=e.next)?t=t.prev:(t=e.prev)?t=t.next:1===c&&a(o.value,e.value)&&(t=o)}finally{p=!0}}return t}function h(e,t,n){++c;var o={nid:++u,value:e,next:t,prev:n,public:{get value(){return o.value},get next(){return l(o,"next")},get prev(){return l(o,"prev")}}};return r[u]=o,o}function f(e){--c,e.prev=e.next=e.public=null,delete r[e.nid]}function m(){var e;if(o){var t=o.next;e=o.value,f(o),(o=t)?o.prev=null:s=null}return e}function v(){var e;if(s){var t=s.prev;e=s.value,f(s),(s=t)?s.next=null:o=null}return e}function C(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=o;case 1:if(!e){t.next=8;break}return n=e.next,t.next=5,e.value;case 5:e=n,t.next=1;break;case 8:case"end":return t.stop()}},t)}function g(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=s;case 1:if(!e){n.next=8;break}return t=e.prev,n.next=5,e.value;case 5:e=t,n.next=1;break;case 8:case"end":return n.stop()}},n)}function y(){for(var e=new Array(c),t=0,n=o;n;){var r=n.next;e[t++]=n.value,n=r}return e}return(e={get head(){return o?o.public:null},get tail(){return s?s.public:null},get size(){return c},addToHead:function(e){var t=h(e,o,null);return o?o.prev=t:s=t,o=t,t.public},addToTail:function(e){var t=h(e,null,s);return s?s.next=t:o=t,s=t,t.public},moveToHead:function(e){(e=d(e))&&r[e.nid]&&o.nid!==e.nid&&(s.nid===e.nid?(s=e.prev).next=null:(e.next.prev=e.prev,e.prev.next=e.next),e.next=o,e.prev=null,o.prev=e,o=e)},moveToTail:function(e){(e=d(e))&&r[e.nid]&&s.nid!==e.nid&&(o.nid===e.nid?(o=e.next).prev=null:(e.next.prev=e.prev,e.prev.next=e.next),e.prev=s,e.next=null,s.next=e,s=e)},removeHead:m,removeTail:v,remove:function(e){(e=d(e))&&r[e.nid]&&(o.nid===e.nid?m():s.nid===e.nid?v():(e.prev.next=e.next,e.next.prev=e.prev,f(e)))},removeAll:function(){for(var e=o;e;){var t=e.next;f(e),e=t}o=s=null},insertBefore:function(e,t){var n;return(e=d(e))&&r[e.nid]&&(n=h(t,e,e.prev),o.nid===e.nid?o=n:e.prev.next=n,e.prev=n),n?n.public:null},insertAfter:function(e,t){var n;return(e=d(e))&&r[e.nid]&&(n=h(t,e.next,e),s.nid===e.nid?s=n:e.next.prev=n,e.next=n),n?n.public:null},map:function(e){for(var t=i(),n=o;n;){var r=n.next;t.addToTail(e(n.value)),n=r}return t},forEach:function(e){for(var t=o;t;){var n=t.next;e(t.value),t=n}},filter:function(e){for(var t=i(),n=o;n;){var r=n.next;!0===e(n.value)&&t.addToTail(n.value),n=r}return t},getIterable:C,getReverseIterable:g,toArray:y,toJSON:y,toString:function(){return y().toString()}})[Symbol.iterator]=C,e}i.from=function(e){var t=i();return Array.isArray(e)&&e.forEach(function(e){t.addToTail(e)}),t};var c=function(e){return"string"==typeof e},u=function(e){return 0===e.length};n.LinkedList=i,n.errorToString=function(e){return e instanceof Error?JSON.stringify(Reflect.ownKeys(e).reduce(function(t,n){return t[n]=e[n],t},{})):"object"==typeof e?null!==e&&e.constructor&&""!==e.constructor.name&&"Object"!==e.constructor.name&&"Array"!==e.constructor.name?e.constructor.name:JSON.stringify(e):"string"==typeof e?e:JSON.stringify(e)},n.isArray=function(e){return Array.isArray(e)},n.isArrayEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},n.isBoolean=function(e){return"boolean"==typeof e},n.isEmptyString=u,n.isFunction=function(e){return"function"==typeof e},n.isInteger=r,n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isPlainObject=function(e){if(!e||"object"!=typeof e||"[object Object]"!={}.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)},n.isString=c,n.isValidString=function(e){return c(e)&&u(e)},n.shallowEqual=a,n.toInteger=function(e,t){return r(e)?parseInt(e,10):t},cc._RF.pop()},{}],videoReady:[function(e,t){"use strict";cc._RF.push(t,"3df78yNr2lJfpYZ5OYGLZOU","videoReady"),cc.Class({extends:cc.Component,start:function(){this.node.getComponent(cc.VideoPlayer).enabled=!1}}),cc._RF.pop()},{}]},{},["BaseCmdLogic","LoginScene","Photon-Javascript_SDK","Photon_Interface","PublicSetUp","autoPlayButton","buildSymbols","co.cc","connectToServer","decBetButton","freeSpinAnim","getSymbolAnchor","getSymbolSprite","handleGameCommand","historyButton","homeButton","incBetButton","lineFrames","login","mainController","manualPlayButton","maxBetButton","menuButton","menuController","observable.cc","pauseButton","performanceController","playAll","playButton","playEffect","playLine","playSymbolCol","playVideo","readMeButton","requestGameResult","requestTableInfo","shuffle","sound","soundOffButton","soundOnButton","symbolGridIndexMapping","value-types.cc","videoReady"]);