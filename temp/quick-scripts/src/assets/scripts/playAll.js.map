{"version":3,"sources":["assets\\scripts\\playAll.js"],"names":["playAll","PublicSetUp","require","cols","i","push","co","start","waitForAll","cc","store","gameResult","iLine","iFrame","freeGameNCnts","WinPointLine","WinTotalPoint","lastLine","find","getComponent","Label","string","lines","length","active","audioEngine","stopAll","audio1","sound","playMusic","MusicClip","userPoints"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;mDAEyBA;;AADzB,IAAIC,WAAW,GAACC,OAAO,CAAC,aAAD,CAAvB;;AACe,SAAUF,OAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AACb;AACMG,UAAAA,IAFO,GAEA,EAFA;;AAAA,iCAGJC,CAHI;AAIXD,YAAAA,IAAI,CAACE,IAAL,CACEC,eAAGC,KAAH,uCAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAEP,6BAAM,+BAAcH,CAAd,EAAiB,GAAjB,CAAN;;AAFO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAT,EADF;AAJW;;AAGb,eAASA,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAAA,kBAAnBA,CAAmB;AAQ3B;;AAXY;AAYb,iBAAME,eAAGE,UAAH,CAAcL,IAAd,CAAN;;AAZa;AAAA,iCAawDM,EAAE,CAACC,KAAH,CAASC,UAbjE,EAaLC,KAbK,wBAaLA,KAbK,EAaEC,MAbF,wBAaEA,MAbF,EAaSC,aAbT,wBAaSA,aAbT,EAawBC,YAbxB,wBAawBA,YAbxB,EAasCC,aAbtC,wBAasCA,aAbtC,EAeb;;AACIC,UAAAA,QAhBS,GAgBE,CAAC,CAhBH;AAiBJb,UAAAA,EAjBI,GAiBA,IAAI,CAjBJ;;AAAA;AAAA,gBAiBOA,EAAC,IAAI,CAjBZ;AAAA;AAAA;AAAA;;AAAA,gBAkBPQ,KAAK,CAACR,EAAD,CAAL,KAAa,CAlBN;AAAA;AAAA;AAAA;;AAmBTa,UAAAA,QAAQ,GAAGb,EAAX;AAnBS;;AAAA;AAiBeA,UAAAA,EAAC,EAjBhB;AAAA;AAAA;;AAAA;AAAA,gBAuBTa,QAAQ,GAAG,CAAC,CAvBH;AAAA;AAAA;AAAA;;AAwBFb,UAAAA,GAxBE,GAwBE,CAxBF;;AAAA;AAAA,gBAwBKA,GAAC,GAAG,CAxBT;AAAA;AAAA;AAAA;;AAAA,gBAyBLQ,KAAK,CAACR,GAAD,CAAL,KAAa,CAzBR;AAAA;AAAA;AAAA;;AA0BPK,UAAAA,EAAE,CAACS,IAAH,CAAQ,wCAAR,EAAkDC,YAAlD,CAA+DV,EAAE,CAACW,KAAlE,EAAyEC,MAAzE,GAAkFZ,EAAE,CAACC,KAAH,CAASC,UAAT,CAAoBI,YAApB,CAAiCX,GAAjC,CAAlF;AA1BO;AA2BP,iBAAM,0BAASA,GAAT,EAAYS,MAAM,CAACT,GAAD,CAAlB,EAAuB,IAAvB,EAA6BA,GAAC,KAAKa,QAAnC,EAA6C,GAA7C,EAAkD,IAAlD,CAAN;;AA3BO;AAwBYb,UAAAA,GAAC,EAxBb;AAAA;AAAA;;AAAA;AAgCX;AACMkB,UAAAA,KAjCK,GAiCG,EAjCH;;AAAA,mCAkCFlB,GAlCE;AAmCT,gBAAIQ,KAAK,CAACR,GAAD,CAAL,KAAa,CAAjB,EAAoB;AAClBkB,cAAAA,KAAK,CAACjB,IAAN,CACEC,eAAGC,KAAH,uCAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AACP,+BAAM,0BAASH,GAAT,EAAYS,MAAM,CAACT,GAAD,CAAlB,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,GAArC,EAA0C,IAA1C,CAAN;;AADO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAT,EADF;AAMD;AA1CQ;;AAkCX,eAASA,GAAT,GAAa,CAAb,EAAgBA,GAAC,GAAG,CAApB,EAAuBA,GAAC,EAAxB,EAA4B;AAAA,mBAAnBA,GAAmB;AAS3B;;AACDK,UAAAA,EAAE,CAACS,IAAH,CAAQ,wCAAR,EAAkDC,YAAlD,CAA+DV,EAAE,CAACW,KAAlE,EAAyEC,MAAzE,GAAkFZ,EAAE,CAACC,KAAH,CAASC,UAAT,CAAoBK,aAAtG;AA5CW;AA8CX,iBAAMV,eAAGE,UAAH,CAAcc,KAAd,CAAN;;AA9CW;AAAA,gBAiDPA,KAAK,CAACC,MAAN,IAAgB,CAjDT;AAAA;AAAA;AAAA;;AAAA;AAkDT,iBAAM,2BAAU,QAAV,CAAN;;AAlDS;AAmDTd,UAAAA,EAAE,CAACS,IAAH,CAAQ,mCAAR,EAA6CM,MAA7C,GAAoD,KAApD;AACAf,UAAAA,EAAE,CAACS,IAAH,CAAQ,gCAAR,EAA0CM,MAA1C,GAAiD,KAAjD;AACAf,UAAAA,EAAE,CAACgB,WAAH,CAAeC,OAAf,CAAuBzB,WAAW,CAAC0B,MAAnC,EAA2C,KAA3C;;AACA,cAAG1B,WAAW,CAAC2B,KAAZ,IAAmB,CAAtB,EAAwB;AACtBnB,YAAAA,EAAE,CAACgB,WAAH,CAAeI,SAAf,CAAyB5B,WAAW,CAAC6B,SAArC,EAAgD,IAAhD;AACD;;AAxDQ;AA8DX;AACA,cAAGhB,aAAa,CAAC,CAAD,CAAb,IAAkB,CAArB,EAAuB,CACrB;AAED;;AAGHL,UAAAA,EAAE,CAACS,IAAH,CAAQ,wCAAR,EAAkDC,YAAlD,CAA+DV,EAAE,CAACW,KAAlE,EAAyEC,MAAzE,GAAkF,CAAlF,CArEa,CAuEb;;AACAZ,UAAAA,EAAE,CAACS,IAAH,CAAQ,wCAAR,EAAkDC,YAAlD,CAA+DV,EAAE,CAACW,KAAlE,EAAyEC,MAAzE,GAAkFZ,EAAE,CAACC,KAAH,CAASqB,UAA3F;;AAxEa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourceRoot":"/","sourcesContent":["import co from './co.cc';\r\nimport playLine from './playLine';\r\nimport playSymbolCol from './playSymbolCol';\r\nimport playVideo from './playVideo';\r\nlet PublicSetUp=require('PublicSetUp');\r\nexport default function* playAll() {\r\n  // 1\r\n  const cols = [];\r\n  for (let i = 0; i < 5; i++) {\r\n    cols.push(\r\n      co.start(function* () {\r\n\r\n        yield playSymbolCol(i, 3.0);\r\n\r\n      })\r\n    );\r\n  }\r\n  yield co.waitForAll(cols);\r\n  const { iLine, iFrame,freeGameNCnts, WinPointLine, WinTotalPoint } = cc.store.gameResult;\r\n\r\n  // 2\r\n  let lastLine = -1;\r\n  for (let i = 9 - 1; i >= 0; i--) {\r\n    if (iLine[i] === 1) {\r\n      lastLine = i;\r\n      break;\r\n    }\r\n  }\r\n  if (lastLine > -1) {\r\n    for (let i = 0; i < 9; i++) {\r\n      if (iLine[i] === 1) {\r\n        cc.find('Canvas/Game/Machine/UI/GameScore/Value').getComponent(cc.Label).string = cc.store.gameResult.WinPointLine[i];\r\n        yield playLine(i, iFrame[i], true, i === lastLine, 4.5, 3200);\r\n\r\n      }\r\n    }\r\n\r\n    // 3\r\n    const lines = [];\r\n    for (let i = 0; i < 9; i++) {\r\n      if (iLine[i] === 1) {\r\n        lines.push(\r\n          co.start(function* () {\r\n            yield playLine(i, iFrame[i], false, false, 4.5, 3700);\r\n\r\n          })\r\n        );\r\n      }\r\n    }\r\n    cc.find('Canvas/Game/Machine/UI/GameScore/Value').getComponent(cc.Label).string = cc.store.gameResult.WinTotalPoint;\r\n\r\n    yield co.waitForAll(lines);\r\n\r\n    // 4\r\n    if (lines.length >= 2) {\r\n      yield playVideo('random');\r\n      cc.find('Canvas/Game/Machine/Particle_coin').active=false;\r\n      cc.find('Canvas/Game/Machine/VideoFrame').active=false;\r\n      cc.audioEngine.stopAll(PublicSetUp.audio1, false);\r\n      if(PublicSetUp.sound==1){\r\n        cc.audioEngine.playMusic(PublicSetUp.MusicClip, true);\r\n      }\r\n      \r\n      \r\n    }\r\n  }\r\n\r\n    //freeSpin\r\n    if(freeGameNCnts[0]==1){\r\n      //有中免費遊戲(第一次)\r\n      \r\n    }\r\n\r\n\r\n  cc.find('Canvas/Game/Machine/UI/GameScore/Value').getComponent(cc.Label).string = 0;\r\n\r\n  // update user points\r\n  cc.find('Canvas/Game/Machine/UI/GamePoint/Value').getComponent(cc.Label).string = cc.store.userPoints;\r\n}\r\n"]}