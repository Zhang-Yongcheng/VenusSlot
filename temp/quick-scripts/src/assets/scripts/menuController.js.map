{"version":3,"sources":["assets\\scripts\\menuController.js"],"names":["cc","Class","Component","properties","onLoad","doDropDown","settingsPanel","find","node","y","height","droppingDown","speed","t0","co","currentRuntime","lastTickTime","dt","dy","dist","sd","t1","coRunning","maxDist","dropDown","start","store","soundEnabled","soundOnButton","active","getComponent","Button","interactable","soundOffButton"],"mappings":"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","sourceRoot":"/","sourcesContent":["import co from './co.cc';\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {},\r\n\r\n  onLoad() {\r\n    const settingsPanel = cc.find('SettingsPanel', this.node);\r\n    settingsPanel.y = this.node.height;\r\n\r\n    function* doDropDown() {\r\n      if (droppingDown === 1 || droppingDown === 2) {\r\n        try {\r\n          const speed = 1.6;\r\n\r\n          let t0 = co.currentRuntime.lastTickTime;\r\n          let dt = 0;\r\n\r\n          while (true) {\r\n            const dy = speed * dt;\r\n            if (dy > dist) {\r\n              dy = dist;\r\n            }\r\n            dist -= dy;\r\n\r\n            const sd = droppingDown === 1 ? -1 : +1;\r\n            settingsPanel.y += dy * sd;\r\n\r\n            yield;\r\n\r\n            if (dist <= 0) {\r\n              break;\r\n            }\r\n\r\n            const t1 = co.currentRuntime.lastTickTime;\r\n            dt = t1 - t0;\r\n            t0 = t1;\r\n          }\r\n        } finally {\r\n          coRunning = null;\r\n        }\r\n      }\r\n    }\r\n\r\n    let droppingDown = 0;\r\n    const maxDist = this.node.height;\r\n    let dist = 0;\r\n    let coRunning = null;\r\n\r\n    this.dropDown = () => {\r\n      if (droppingDown === 1) {\r\n        droppingDown = 2;\r\n      } else if (droppingDown === 0 || droppingDown === 2) {\r\n        droppingDown = 1;\r\n      }\r\n      dist = dist === 0 ? maxDist : maxDist - dist;\r\n      if (coRunning === null) {\r\n        coRunning = co.start(doDropDown);\r\n      }\r\n    };\r\n  },\r\n\r\n  start() {\r\n    const settingsPanel = cc.find('SettingsPanel', this.node);\r\n    if (cc.store.soundEnabled === true) {\r\n      const soundOnButton = cc.find('SoundOnButton', settingsPanel);\r\n      soundOnButton.active = false;\r\n      soundOnButton.getComponent(cc.Button).interactable = false;\r\n\r\n      const soundOffButton = cc.find('SoundOffButton', settingsPanel);\r\n      soundOffButton.active = true;\r\n      soundOffButton.getComponent(cc.Button).interactable = true;\r\n    } else {\r\n      const soundOnButton = cc.find('SoundOnButton', settingsPanel);\r\n      soundOnButton.active = true;\r\n      soundOnButton.getComponent(cc.Button).interactable = true;\r\n\r\n      const soundOffButton = cc.find('SoundOffButton', settingsPanel);\r\n      soundOffButton.active = false;\r\n      soundOffButton.getComponent(cc.Button).interactable = false;\r\n    }\r\n  }\r\n});\r\n"]}