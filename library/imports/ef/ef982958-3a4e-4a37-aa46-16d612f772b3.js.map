{"version":3,"sources":["assets\\scripts\\LoginScene.js"],"names":["PublicSetUp","require","cc","Class","Component","properties","onLoad","start","getUrlString","location","href","url","URL","searchParams","get","find","active","director","loadScene","accountEditBox","getComponent","EditBox","passwordEditBox","message","Label","okButton","Button","node","on","string","length","loginType","account","password"],"mappings":";;;;;;AAAA,IAAIA,WAAW,GAACC,OAAO,CAAC,aAAD,CAAvB;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAOL;AAECC,EAAAA,MATI,oBASM,CACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIE,GAzBG;AA2BLC,EAAAA,KA3BK,mBA2BI;AAGP;AACA,QAAIC,YAAY,GAAGC,QAAQ,CAACC,IAA5B;AACA,QAAIC,GAAG,GAAG,IAAIC,GAAJ,CAAQJ,YAAR,CAAV;;AAEA,QAAGG,GAAG,CAACE,YAAJ,CAAiBC,GAAjB,CAAqB,UAArB,KAAkC,IAArC,EAA0C;AACxCZ,MAAAA,EAAE,CAACa,IAAH,CAAQ,cAAR,EAAwBC,MAAxB,GAA+B,KAA/B;AACAd,MAAAA,EAAE,CAACe,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACA;AACD,KAXM,CAaP;;;AACA,QAAIC,cAAc,GAAGjB,EAAE,CAACa,IAAH,CAAQ,sBAAR,EAAgCK,YAAhC,CAA6ClB,EAAE,CAACmB,OAAhD,CAArB;AACE,QAAIC,eAAe,GAAGpB,EAAE,CAACa,IAAH,CAAQ,uBAAR,EAAiCK,YAAjC,CAA8ClB,EAAE,CAACmB,OAAjD,CAAtB;AACA,QAAIE,OAAO,GAAGrB,EAAE,CAACa,IAAH,CAAQ,sBAAR,EAAgCK,YAAhC,CAA6ClB,EAAE,CAACsB,KAAhD,CAAd,CAhBK,CAkBL;AACA;;AACA,QAAMC,QAAQ,GAAGvB,EAAE,CAACa,IAAH,CAAQ,iBAAR,EAA2BK,YAA3B,CAAwClB,EAAE,CAACwB,MAA3C,CAAjB;AAEAD,IAAAA,QAAQ,CAACE,IAAT,CAAcC,EAAd,CAAiB,OAAjB,EAA0B,YAAM;AAC9B,UAAIT,cAAc,CAACU,MAAf,CAAsBC,MAAtB,KAAiC,CAAjC,IAAsCR,eAAe,CAACO,MAAhB,CAAuBC,MAAvB,KAAkC,CAA5E,EAA+E;AAC7E;AACD;;AACD9B,MAAAA,WAAW,CAAC+B,SAAZ,GAAsB,CAAtB;AACA/B,MAAAA,WAAW,CAACgC,OAAZ,GAAoBb,cAAc,CAACU,MAAnC;AACA7B,MAAAA,WAAW,CAACiC,QAAZ,GAAqBX,eAAe,CAACO,MAArC;AACA3B,MAAAA,EAAE,CAACa,IAAH,CAAQ,aAAR,EAAuBC,MAAvB,GAA8B,IAA9B;AAEAd,MAAAA,EAAE,CAACe,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACD,KAVD;AAeH,GAhEI,CAkEL;;AAlEK,CAAT","sourceRoot":"/","sourcesContent":["let PublicSetUp=require('PublicSetUp');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n     \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n     onLoad () {\r\n    //   cc.resources.loadDir(\"Music/sound/\", cc.AudioClip, function (err, Clip) {\r\n    //     if (err) {\r\n    //         cc.error(err);\r\n    //         return;\r\n    //     } else {\r\n    //         for (let i = 0; i < Clip.length; i++) {\r\n    //             PublicSetUp.audio[Clip[i].name] = Clip[i];\r\n    //         }\r\n    //         cc.log(PublicSetUp.audio);\r\n\r\n    //     }\r\n    // });\r\n\r\n\r\n   \r\n     },\r\n\r\n    start () {\r\n      \r\n      \r\n      //Token登入\r\n      var getUrlString = location.href;\r\n      var url = new URL(getUrlString);   \r\n\r\n      if(url.searchParams.get('WebToken')!=null){\r\n        cc.find(\"Canvas/Login\").active=false\r\n        cc.director.loadScene('slot');\r\n        return;\r\n      }\r\n\r\n      //帳號登入\r\n      let accountEditBox = cc.find(\"Canvas/Login/Account\").getComponent(cc.EditBox);\r\n        let passwordEditBox = cc.find(\"Canvas/Login/Password\").getComponent(cc.EditBox);\r\n        let message = cc.find(\"Canvas/Login/message\").getComponent(cc.Label);\r\n\r\n        //accountEditBox.string='gtest001';\r\n        //passwordEditBox.string='gtest001';\r\n        const okButton = cc.find(\"Canvas/Login/Ok\").getComponent(cc.Button);\r\n\r\n        okButton.node.on('click', () => {\r\n          if (accountEditBox.string.length === 0 || passwordEditBox.string.length === 0) {\r\n            return;\r\n          }\r\n          PublicSetUp.loginType=0;\r\n          PublicSetUp.account=accountEditBox.string;\r\n          PublicSetUp.password=passwordEditBox.string;\r\n          cc.find(\"Canvas/lock\").active=true;\r\n          \r\n          cc.director.loadScene('slot');\r\n        });\r\n       \r\n      \r\n        \r\n        \r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}