{"version":3,"sources":["assets\\scripts\\handleGameCommand.js"],"names":["handleGameCommand","bonusGameState","first3072","PublicSetUp","require","vals","pi","gameObj","cc","store","userPoints","find","getComponent","Button","enabled","auto","playing","active","Label","string","Math","floor","maxBet","minBet","currentBet","gameResult","iGrid","freeGameCnts","gameResultGotStatus","type","iLine","iFrame","freeGameNCnts","WinPointLine","WinTotalPoint","heart","VideoIdx","BonusGame","some","val","FreeTotalPoint","timeout","cardPot","num","round","Number","EPSILON","cardRatio","cardcnts","ProgressBar","progress","bonusGameClick","bonusGameQuestion"],"mappings":"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","sourceRoot":"/","sourcesContent":["import winBonusGame from './winBonusGame.js';\nconst handleGameCommand = (function () {\n  let bonusGameState = 0; // 0: 沒有bonusGame, 1: 進入bonusGame\n  let first3072 = true;\n  let PublicSetUp=require('PublicSetUp');\n  return function handleGameCommand(vals, pi, gameObj) {\n    \n    if(vals[0]!=3075){\n      //console.log(\"--%o\",vals);\n    }\n    \n    switch (vals[0]) {\n      case 3072: //　回傳本桌的資訊\n        if (bonusGameState === 1) {\n          cc.store.userPoints = vals[4];\n          bonusGameState = 0\n          // cc.find('Canvas/Game/Machine/UpUI/MenuPanel/PlayButton').getComponent(cc.Button).enabled = true;\n          cc.find('Canvas/Game/Machine/UpUI/MenuPanel/PauseButton').getComponent(cc.Button).enabled = true;\n          if (cc.store.auto === true) {\n            cc.store.playing = true;\n          } else {\n            cc.store.playing = false;\n            cc.find('Canvas/Game/Machine/UpUI/MenuPanel/playButton').active = true;\n          }\n          cc.find('Canvas/Game/Machine/UI/PointScore/GameScore/Value').getComponent(cc.Label).string = 0\n          cc.find('Canvas/Game/Machine/UI/PointScore/GamePoint/Value').getComponent(cc.Label).string = cc.store.userPoints\n        }\n\n        if (first3072 === true) {\n          first3072 = false;\n\n          cc.store.userPoints = vals[4];\n\n          cc.find('Canvas/Game/Machine/UI/PointScore/GamePoint/Value').getComponent(cc.Label).string = Math.floor(cc.store.userPoints);\n          \n          cc.store.maxBet = vals[2];\n          cc.store.minBet = cc.store.currentBet = vals[3];\n          cc.store.gameResult.iGrid = vals[8];\n\n          cc.find('Canvas/Game/Machine/UpUI/MenuPanel/BetPanel/Value').getComponent(cc.Label).string = cc.store.currentBet;\n\n          \n\n          // hide login\n\n\n          // play bg music\n          cc.find('Canvas/LoginMessage').active = false;\n\n          cc.find('Canvas/Game').active = true;\n        }\n\n        \n        cc.store.freeGameCnts = vals[9];\n        break;\n\n      case 3073: //　回傳押注結果資訊\n        if (cc.store.gameResultGotStatus === 1) {\n          const { gameResult } = cc.store;\n          gameResult.type = vals[1];\n          gameResult.iGrid = vals[2];\n          gameResult.iLine = vals[3];\n          gameResult.iFrame = vals[4];\n          gameResult.freeGameNCnts=vals[5];\n          gameResult.WinPointLine = vals[6];\n          gameResult.WinTotalPoint = vals[7];\n          cc.store.userPoints = vals[8];\n          gameResult.heart=vals[9];\n          gameResult.VideoIdx=vals[10];\n          cc.store.BonusGame=vals[11];\n          bonusGameState=vals[11]\n\n          // console.log(vals[3]);\n          // console.log(vals[4]);\n\n          if (gameResult.iGrid.some(val => val === -1) === false) {\n            cc.store.gameResultGotStatus = 2;\n          }\n        }\n        break;\n\n      case 3074: //　通知遊戲端免費遊戲結束\n        cc.store.type=1;\n        cc.store.FreeTotalPoint=vals[1];\n        cc.store.userPoints = vals[2];\n        break;\n      case 3075: //　jackpot點數\n        PublicSetUp.timeout=0;\n        cc.store.cardPot=vals[1];\n        var num=vals[1];\n        cc.find('Canvas/Game/Machine/UI/GameJP/Value').getComponent(cc.Label).string=Math.floor(Math.round((num+Number.EPSILON) * 100) / 100);\n\n\n        break;\n      case 3181: //　特殊卡牌\n        cc.store.cardRatio = vals[1];\n        cc.store.cardcnts = vals[2];\n        cc.find('Canvas/Game/Card/ProgressBar').getComponent(cc.ProgressBar).progress = cc.store.cardRatio;\n        cc.find('Canvas/Game/Card/cardback/Value').getComponent(cc.Label).string = cc.store.cardcnts;\n        if(cc.store.cardcnts==0){\n          cc.find('Canvas/Game/Card/ProgressBar').active=false;\n          cc.find('Canvas/Game/Card/cardback').active=false;\n        }else{\n          cc.find('Canvas/Game/Card/ProgressBar').active=true;\n          cc.find('Canvas/Game/Card/cardback').active=true;\n        }\n        break;\n        case 3182: // 翻牌遊戲 \n          winBonusGame(cc.store.bonusGameClick, vals[1], cc.store.bonusGameQuestion, Math.round(vals[2]))\n          cc.find('Canvas/Game/Machine/UI/PointScore/GameScore/Value').getComponent(cc.Label).string = Math.round(vals[2])\n          break;\n    }\n  };\n})();\n\nexport default handleGameCommand;\n"]}