{"version":3,"sources":["assets\\scripts\\handleGameCommand.js"],"names":["handleGameCommand","first3072","vals","pi","gameObj","cc","store","userPoints","find","getComponent","Label","string","Math","floor","maxBet","minBet","currentBet","gameResult","iGrid","active","freeGameCnts","gameResultGotStatus","type","iLine","iFrame","freeGameNCnts","WinPointLine","WinTotalPoint","heart","VideoIdx","some","val","FreeTotalPoint","cardPot","num","round","Number","EPSILON","cardRatio","cardcnts","ProgressBar","progress"],"mappings":"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","sourceRoot":"/","sourcesContent":["const handleGameCommand = (function () {\r\n  let first3072 = true;\r\n\r\n  return function handleGameCommand(vals, pi, gameObj) {\r\n    if(vals[0]!=3075){\r\n      //console.log(\"--%o\",vals);\r\n    }\r\n    \r\n    switch (vals[0]) {\r\n      case 3072: //　回傳本桌的資訊\r\n        if (first3072 === true) {\r\n          first3072 = false;\r\n\r\n          cc.store.userPoints = vals[4];\r\n          cc.find('Canvas/Game/Machine/UI/GamePoint/Value').getComponent(cc.Label).string = Math.floor(cc.store.userPoints);\r\n\r\n          cc.store.maxBet = vals[2];\r\n          cc.store.minBet = cc.store.currentBet = vals[3];\r\n          cc.store.gameResult.iGrid = vals[8];\r\n\r\n          cc.find('Canvas/Game/Machine/UI/BetPanel/Value').getComponent(cc.Label).string = cc.store.currentBet;\r\n\r\n          // console.log(vals[8]);\r\n\r\n          // hide login\r\n\r\n\r\n          // play bg music\r\n          cc.find('Canvas/LoginMessage').active = false;\r\n\r\n          cc.find('Canvas/Game').active = true;\r\n        }\r\n        cc.store.freeGameCnts = vals[9];\r\n        break;\r\n\r\n      case 3073: //　回傳押注結果資訊\r\n        if (cc.store.gameResultGotStatus === 1) {\r\n          const { gameResult } = cc.store;\r\n          gameResult.type = vals[1];\r\n          gameResult.iGrid = vals[2];\r\n          gameResult.iLine = vals[3];\r\n          gameResult.iFrame = vals[4];\r\n          gameResult.freeGameNCnts=vals[5];\r\n          gameResult.WinPointLine = vals[6];\r\n          gameResult.WinTotalPoint = vals[7];\r\n          cc.store.userPoints = vals[8];\r\n          gameResult.heart=vals[9];\r\n          gameResult.VideoIdx=vals[10];\r\n\r\n          // console.log(vals[3]);\r\n          // console.log(vals[4]);\r\n\r\n          if (gameResult.iGrid.some(val => val === -1) === false) {\r\n            cc.store.gameResultGotStatus = 2;\r\n          }\r\n        }\r\n        break;\r\n\r\n      case 3074: //　通知遊戲端免費遊戲結束\r\n        cc.store.type=1;\r\n        cc.store.FreeTotalPoint=vals[1];\r\n        cc.store.userPoints = vals[2];\r\n        break;\r\n      case 3075: //　jackpot點數\r\n        cc.store.cardPot=vals[1];\r\n        var num=vals[1];\r\n        cc.find('Canvas/Game/Machine/UI/GameJP/Value').getComponent(cc.Label).string=Math.floor(Math.round((num+Number.EPSILON) * 100) / 100);\r\n\r\n\r\n        break;\r\n      case 3181: //　特殊卡牌\r\n        cc.store.cardRatio = vals[1];\r\n        cc.store.cardcnts = vals[2];\r\n        cc.find('Canvas/Game/Card/ProgressBar').getComponent(cc.ProgressBar).progress = cc.store.cardRatio;\r\n        cc.find('Canvas/Game/Card/cardback/Value').getComponent(cc.Label).string = cc.store.cardcnts;\r\n        if(cc.store.cardcnts==0){\r\n          cc.find('Canvas/Game/Card/ProgressBar').active=false;\r\n          cc.find('Canvas/Game/Card/cardback').active=false;\r\n        }else{\r\n          cc.find('Canvas/Game/Card/ProgressBar').active=true;\r\n          cc.find('Canvas/Game/Card/cardback').active=true;\r\n        }\r\n        break;\r\n    }\r\n  };\r\n})();\r\n\r\nexport default handleGameCommand;\r\n"]}