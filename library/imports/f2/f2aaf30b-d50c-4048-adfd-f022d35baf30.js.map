{"version":3,"sources":["assets\\scripts\\incBetButton.js"],"names":["isTouch","touchTime","cc","Class","Component","onLoad","button","node","getComponent","Button","on","currentBetValue","find","Label","currentBet","parseFloat","string","store","maxBet","minBet","userPoints","message","show","Node","EventType","TOUCH_START","touchStart","TOUCH_END","touchEnd","Date","touchHold","touchHoldTime","millisecons","getTime","update"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nlet isTouch;\r\nlet touchTime;\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  onLoad() {\r\n    const button = this.node.getComponent(cc.Button);\r\n    button.node.on('click', () => {\r\n      const currentBetValue = cc.find('Canvas/Game/Machine/UI/BetPanel/Value').getComponent(cc.Label);\r\n      const currentBet = parseFloat(currentBetValue.string);\r\n      if(currentBet>cc.store.maxBet){\r\n        currentBetValue.string=cc.store.currentBet=cc.store.maxBet;\r\n      }\r\n      if (currentBet >= cc.store.minBet && currentBet < cc.store.maxBet) {\r\n        if(cc.store.userPoints>=currentBet + 10){\r\n          currentBetValue.string = cc.store.currentBet = currentBet + 10;\r\n        }else{\r\n          let message=cc.find('Canvas/Game/message').getComponent(\"message\");\r\n          message.show(0);\r\n        }\r\n        \r\n        // if(currentBet<=0.9){\r\n        //   currentBetValue.string = cc.store.currentBet =parseFloat((currentBet + 0.1).toPrecision(12)) ;\r\n        // }else if(currentBet<=9){\r\n        //   currentBetValue.string = cc.store.currentBet = currentBet + 1;\r\n        // }else{\r\n        //   currentBetValue.string = cc.store.currentBet = currentBet + 10;\r\n        // }\r\n        \r\n      }\r\n    });\r\n\r\n  isTouch=false\r\n  touchTime=null;\r\n  button.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this);\r\n\r\n  button.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this);\r\n  },\r\n  touchStart(){\r\n    isTouch=true;\r\n    touchTime=new Date();\r\n  },\r\n\r\n  touchHold(){\r\n    if(isTouch && touchTime!=null){\r\n      let touchHoldTime=new Date();\r\n      let millisecons=touchHoldTime.getTime()-touchTime.getTime();\r\n      if(millisecons>300){\r\n        isTouch=true;\r\n        const currentBetValue = cc.find('Canvas/Game/Machine/UI/BetPanel/Value').getComponent(cc.Label);\r\n        const currentBet = parseFloat(currentBetValue.string);\r\n        if (currentBet >= cc.store.minBet && currentBet < cc.store.maxBet) {\r\n          if(cc.store.userPoints>=currentBet + 10){\r\n            currentBetValue.string = cc.store.currentBet = currentBet + 10;\r\n          }else{\r\n            let message=cc.find('Canvas/Game/message').getComponent(\"message\");\r\n            message.show(0);\r\n          }\r\n          \r\n \r\n          \r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  touchEnd(){\r\n    isTouch=false;\r\n    touchTime=null;\r\n  },\r\n\r\n  update() {\r\n \r\n   if(isTouch){\r\n     this.touchHold();\r\n   }\r\n\r\n  }\r\n\r\n});\r\n"]}