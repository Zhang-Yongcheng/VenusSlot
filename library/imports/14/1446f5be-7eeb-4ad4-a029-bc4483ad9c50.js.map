{"version":3,"sources":["assets\\scripts\\mainController.js"],"names":["PublicSetUp","require","cc","Class","Component","properties","MusicClip","type","AudioClip","onLoad","callback","timeout","unschedule","message","find","getComponent","show","schedule","i","length","audio","name","store","minBet","maxBet","cardPot","cardRatio","cardcnts","currentBet","freeGameCnts","FreeTotalPoint","Heart","VideoIdx","soundEnabled","gameResult","gameResultGotStatus","isGameResultGot","playing","auto","test","canPlay","mainServer","lobbyServer","gameServer","start","document","oncontextmenu","Function","audioEngine","playMusic","assetManager","loadBundle","error","bundle","preloadDir","VideoClip","active","getUrlString","location","href","url","URL","account","searchParams","get","password","update","co","performTick","director","_lastUpdate"],"mappings":"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","sourceRoot":"/","sourcesContent":["import co from './co.cc';\r\nimport connectToServer from './connectToServer';\r\nlet PublicSetUp=require('PublicSetUp');\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    MusicClip: {\r\n      default: null,\r\n      type: cc.AudioClip,\r\n  },\r\n\r\n    AudioClip: {\r\n      default: [],\r\n      type: [cc.AudioClip],\r\n  },\r\n\r\n  },\r\n\r\n  onLoad() {\r\n    this.callback = function () {\r\n      if(PublicSetUp.timeout>20){\r\n\r\n        this.unschedule(this.callback);\r\n        let message=cc.find('Canvas/Game/message').getComponent(\"message\");\r\n        message.show(1);\r\n    }\r\n    PublicSetUp.timeout++;\r\n\r\n  }\r\n    this.schedule(this.callback, 1);\r\n\r\n    // co.enableAutoTick(30);\r\n    for (let i = 0; i < this.AudioClip.length; i++) {\r\n      PublicSetUp.audio[this.AudioClip[i].name] = this.AudioClip[i];\r\n  }\r\n    PublicSetUp.MusicClip=this.MusicClip;\r\n    cc.store = {\r\n      type: 0,\r\n      minBet: 0,\r\n      maxBet: 0,\r\n      cardPot:0,\r\n      cardRatio:0,\r\n      cardcnts:0,\r\n      currentBet: 0,\r\n      freeGameCnts: 0,\r\n      FreeTotalPoint: 0,\r\n      Heart:0,\r\n      VideoIdx:0,\r\n      soundEnabled: true,\r\n\r\n      gameResult: {},\r\n      gameResultGotStatus: 0,\r\n      isGameResultGot() {\r\n        return cc.store.gameResultGotStatus === 3;\r\n      },\r\n\r\n      playing: false,\r\n      auto:false,\r\n      test:0,\r\n      canPlay() {\r\n        return true;\r\n      },\r\n\r\n      mainServer: null,\r\n      lobbyServer: null,\r\n      gameServer: null\r\n    };\r\n\r\n    // cc.find('Canvas/Game').active = false;\r\n  },\r\n\r\n  start() {\r\n    document.oncontextmenu = new Function(\"return false\");\r\n    cc.audioEngine.playMusic(this.MusicClip, true);\r\n\r\n    cc.assetManager.loadBundle('mp4', (error, bundle) => {\r\n      if (!error) {\r\n        bundle.preloadDir('./', cc.VideoClip);\r\n      }\r\n    });\r\n\r\n\r\n    cc.find('Canvas/Game').active = false;\r\n    var getUrlString = location.href;\r\n    var url = new URL(getUrlString);  \r\n    if(PublicSetUp.account==\"\"){\r\n      PublicSetUp.account=url.searchParams.get('WebToken');\r\n      connectToServer('213.139.235.73', 6380, url.searchParams.get('WebToken'), PublicSetUp.password,2);\r\n    }else{\r\n      connectToServer('213.139.235.73', 6380, PublicSetUp.account, PublicSetUp.password,0);\r\n    }\r\n    \r\n\r\n  },\r\n\r\n  update() {\r\n    co.performTick(cc.director._lastUpdate);\r\n\r\n  }\r\n});\r\n"]}