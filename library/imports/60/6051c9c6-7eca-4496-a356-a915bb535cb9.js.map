{"version":3,"sources":["assets\\scripts\\observable.cc.js"],"names":["Object","defineProperty","exports","value","co","require","valueTypes_cc","_interopDefaultLegacy","e","co__default","emptyArray","freeze","createActiveScheduler","options","dispatch","unsubscribe","complete","states","getStates","result","length","coroutineGroup","start","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","console","error","errorToString","stop","schedule","state","push","createAsyncScheduler","isUnsubscribed","_options$maxConcurren","maxConcurrentLimit","Math","max","running","end","dispatchOne","dispatchNext","shift","createImmediateScheduler","createQueueScheduler","coroutine","i","imax","splice","abrupt","suspend","resume","schedulers","active","immediate","queue","async","createScheduler","type","args","createSubscribeableChild","observable","subscribeableParent","subscriber","_options$scheduler","_options$scheduler2","_options$scheduler2$t","_options$scheduler3","_options$scheduler3$c","scheduler","subscribeable","createSubscribeable","getSubscribedCount","schedulerType","schedulerOptions","undefined","Error","subscribeableChildren","Set","unsubscribed","completed","subscribe","subscribeableChild","add","unsubscribeChild","has","size","notify","forEach","createObservable","observer","mainGroup","isCoroutineGroup","toObservable","to","createTask","worker","sent","finish","exception","wait","cancel","isCanceling","isCanceled","isDone","timeout","runtime","time0","wait$","_context2","currentRuntime","lastTickTime","TaskTimeout","waitUntil","isStopping","isStopped","createEventEmitter","currentListenerId","freeListenerId","listeners","Map","listenerIdToEventNameMapping","onceListeners","addListener","eventName","listener","set","get","addOnceListener","listenerId","removeListener","eventListeners","removeAllListeners","clear","getListeners","getListenerCount","getEventNames","eventNames","emit","invokeListener","on","once","off","offAll","mapEventListener","eventEmitter","Observable","from","EventEmitter","Task"],"mappings":";;;;AAAA;AACA;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,EAAE,GAAGC,OAAO,CAAC,SAAD,CAAhB;;AACA,IAAIC,aAAa,GAAGD,OAAO,CAAC,kBAAD,CAA3B;;AAEA,SAASE,qBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,aAAaA,CAA3C,GAA+CA,CAA/C,GAAmD;AAAE,eAAWA;AAAb,GAA1D;AAA6E;;AAElH,IAAIC,WAAW,GAAG,aAAaF,qBAAqB,CAACH,EAAD,CAApD,EAEA;AACA;AACA;;;AAEA,IAAMM,UAAU,GAAGV,MAAM,CAACW,MAAP,CAAc,EAAd,CAAnB;;AACA,SAASC,qBAAT,OAIGC,OAJH,EAIY;AAAA,MAHVC,QAGU,QAHVA,QAGU;AAAA,MAFVC,WAEU,QAFVA,WAEU;AAAA,MADVC,QACU,QADVA,QACU;AACV,MAAIC,MAAM,GAAG,EAAb;;AAEA,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,QAAIC,MAAJ;;AAEA,QAAIF,MAAM,CAACG,MAAP,KAAkB,CAAtB,EAAyB;AACvBD,MAAAA,MAAM,GAAGT,UAAT;AACD,KAFD,MAEO;AACLS,MAAAA,MAAM,GAAGF,MAAT;AACAA,MAAAA,MAAM,GAAG,EAAT;AACD;;AAED,WAAOE,MAAP;AACD,GAXD;;AAaAN,EAAAA,OAAO,CAACQ,cAAR,CAAuBC,KAAvB,EAA8B,aAAaC,kBAAkB,CAACC,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AACpF,WAAOF,kBAAkB,CAACG,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,aAAO,CAAP;AAAU,gBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACR,eAAK,CAAL;AACEF,YAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,mBAAOhB,QAAQ,CAAC;AACdI,cAAAA,SAAS,EAATA;AADc,aAAD,CAAf;;AAIF,eAAK,CAAL;AACEU,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;;AAEF,eAAK,CAAL;AACEF,YAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,YAAAA,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;AACAI,YAAAA,OAAO,CAACC,KAAR,gDAA2D3B,aAAa,CAAC4B,aAAd,CAA4BN,QAAQ,CAACG,EAArC,CAA3D;;AAEF,eAAK,CAAL;AACE,gBAAId,MAAM,CAACG,MAAP,GAAgB,CAApB,EAAuB;AACrBH,cAAAA,MAAM,GAAG,EAAT;AACD;;AAEDF,YAAAA,WAAW;AACXC,YAAAA,QAAQ;;AAEV,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAOY,QAAQ,CAACO,IAAT,EAAP;AA3BM;AAAV;AA6BD,KA9BM,EA8BJV,OA9BI,EA8BK,IA9BL,EA8BW,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CA9BX,CAAP;AA+BD,GAhC0C,CAA3C;AAiCA,SAAO;AACLW,IAAAA,QADK,oBACIC,KADJ,EACW;AACdpB,MAAAA,MAAM,CAACqB,IAAP,CAAYD,KAAZ;AACD;AAHI,GAAP;AAMD,EAED;AACA;AACA;;;AAEA,SAASE,oBAAT,QAKG1B,OALH,EAKY;AAAA,MAJVC,QAIU,SAJVA,QAIU;AAAA,MAHVC,WAGU,SAHVA,WAGU;AAAA,MAFVyB,cAEU,SAFVA,cAEU;AAAA,MADVxB,QACU,SADVA,QACU;;AACV,MAAIyB,qBAAJ;;AAEA,MAAMC,kBAAkB,GAAGC,IAAI,CAACC,GAAL,CAAS,CAACH,qBAAqB,GAAG5B,OAAO,CAAC6B,kBAAjC,KAAwD,IAAxD,GAA+DD,qBAA/D,GAAuF,CAAhG,EAAmG,CAAnG,CAA3B;AACA,MAAMxB,MAAM,GAAG,EAAf;AACA,MAAI4B,OAAO,GAAG,CAAd;AACA,MAAIC,GAAG,GAAG,KAAV;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAV,KAAK,EAAI;AAC3BS,IAAAA,GAAG,GAAGA,GAAG,IAAIT,KAAK,CAACS,GAAN,KAAc,IAA3B;AACA,MAAED,OAAF;AACAhC,IAAAA,OAAO,CAACQ,cAAR,CAAuBC,KAAvB,EAA8B,aAAaC,kBAAkB,CAACC,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AACpF,aAAOF,kBAAkB,CAACG,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,eAAO,CAAP;AAAU,kBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACR,iBAAK,CAAL;AACEF,cAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,cAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,qBAAOhB,QAAQ,CAACuB,KAAD,CAAf;;AAEF,iBAAK,CAAL;AACET,cAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;;AAEF,iBAAK,CAAL;AACEF,cAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,cAAAA,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;AACAI,cAAAA,OAAO,CAACC,KAAR,yCAAoD3B,aAAa,CAAC4B,aAAd,CAA4BN,QAAQ,CAACG,EAArC,CAApD;;AAEF,iBAAK,CAAL;AACE,gBAAEc,OAAF;AACAG,cAAAA,YAAY;;AAEd,iBAAK,EAAL;AACA,iBAAK,KAAL;AACE,qBAAOpB,QAAQ,CAACO,IAAT,EAAP;AArBM;AAAV;AAuBD,OAxBM,EAwBJV,OAxBI,EAwBK,IAxBL,EAwBW,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAxBX,CAAP;AAyBD,KA1B0C,CAA3C;AA2BD,GA9BD;;AAgCA,MAAMuB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAI/B,MAAM,CAACG,MAAP,KAAkB,CAAtB,EAAyB;AACvB,UAAIyB,OAAO,KAAK,CAAZ,KAAkBC,GAAG,IAAIN,cAAc,EAAvC,CAAJ,EAAgD;AAC9CzB,QAAAA,WAAW;AACXC,QAAAA,QAAQ;AACT;AACF,KALD,MAKO,IAAI,CAAC6B,OAAO,GAAGH,kBAAV,IAAgCA,kBAAkB,KAAK,CAAxD,MAA+DzB,MAAM,CAAC,CAAD,CAAN,CAAU6B,GAAV,KAAkB,KAAlB,IAA2BD,OAAO,KAAK,CAAtG,CAAJ,EAA8G;AACnHE,MAAAA,WAAW,CAAC9B,MAAM,CAACgC,KAAP,EAAD,CAAX;AACD;AACF,GATD;;AAWA,SAAO;AACLb,IAAAA,QADK,oBACIC,KADJ,EACW;AACdpB,MAAAA,MAAM,CAACqB,IAAP,CAAYD,KAAZ;AACAW,MAAAA,YAAY;AACb;AAJI,GAAP;AAOD,EAED;AACA;AACA;;;AAEA,SAASE,wBAAT,QAKG;AAAA,MAJDpC,QAIC,SAJDA,QAIC;AAAA,MAHDC,WAGC,SAHDA,WAGC;AAAA,MAFDyB,cAEC,SAFDA,cAEC;AAAA,MADDxB,QACC,SADDA,QACC;AACD,SAAO;AACLoB,IAAAA,QADK,oBACIC,KADJ,EACW;AACd,UAAMS,GAAG,GAAGT,KAAK,CAACS,GAAN,KAAc,IAA1B;;AAEA,UAAI;AACFhC,QAAAA,QAAQ,CAACuB,KAAD,CAAR;AACD,OAFD,CAEE,OAAO7B,CAAP,EAAU;AACVwB,QAAAA,OAAO,CAACC,KAAR,6CAAwD3B,aAAa,CAAC4B,aAAd,CAA4B1B,CAA5B,CAAxD;AACD;;AAED,UAAIsC,GAAG,IAAIN,cAAc,EAAzB,EAA6B;AAC3BzB,QAAAA,WAAW;AACXC,QAAAA,QAAQ;AACT;AACF;AAdI,GAAP;AAiBD,EAED;AACA;AACA;;;AAEA,SAASmC,oBAAT,QAKGtC,OALH,EAKY;AAAA,MAJVC,QAIU,SAJVA,QAIU;AAAA,MAHVC,WAGU,SAHVA,WAGU;AAAA,MAFVyB,cAEU,SAFVA,cAEU;AAAA,MADVxB,QACU,SADVA,QACU;AACV,MAAMC,MAAM,GAAG,EAAf;AACA,MAAMmC,SAAS,GAAGvC,OAAO,CAACQ,cAAR,CAAuBC,KAAvB,EAA8B,aAAaC,kBAAkB,CAACC,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AACtG,QAAI4B,CAAJ,EAAOP,GAAP,EAAYQ,IAAZ,EAAkBjB,KAAlB;AACA,WAAOd,kBAAkB,CAACG,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,aAAO,CAAP;AAAU,gBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACR,eAAK,CAAL;AAEEuB,YAAAA,CAAC,GAAG,CAAJ;AACAP,YAAAA,GAAG,GAAG,KAAN;AACAlB,YAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAyB,YAAAA,IAAI,GAAGrC,MAAM,CAACG,MAAd;;AAEF,eAAK,CAAL;AACE,gBAAI,EAAEiC,CAAC,GAAGC,IAAN,CAAJ,EAAiB;AACf1B,cAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;AACD;;AAEDO,YAAAA,KAAK,GAAGpB,MAAM,CAACoC,CAAC,EAAF,CAAd;AACAP,YAAAA,GAAG,GAAGA,GAAG,IAAIT,KAAK,CAACS,GAAN,KAAc,IAA3B;AACAlB,YAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA,mBAAOhB,QAAQ,CAACuB,KAAD,CAAf;;AAEF,eAAK,EAAL;AACET,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;;AAEF,eAAK,EAAL;AACEF,YAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;;AAEF,eAAK,EAAL;AACEF,YAAAA,QAAQ,CAACC,IAAT,GAAgB,EAAhB;AACAD,YAAAA,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;AACAI,YAAAA,OAAO,CAACC,KAAR,yCAAoD3B,aAAa,CAAC4B,aAAd,CAA4BN,QAAQ,CAACG,EAArC,CAApD;;AAEF,eAAK,EAAL;AACE,gBAAIsB,CAAC,GAAG,CAAR,EAAW;AACTpC,cAAAA,MAAM,CAACsC,MAAP,CAAc,CAAd,EAAiBF,CAAjB;AACD;;AAED,gBAAI,EAAEpC,MAAM,CAACG,MAAP,KAAkB,CAApB,CAAJ,EAA4B;AAC1BQ,cAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,gBAAI,EAAEgB,GAAG,IAAIN,cAAc,EAAvB,CAAJ,EAAgC;AAC9BZ,cAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;AACD;;AAEDf,YAAAA,WAAW;AACXC,YAAAA,QAAQ;AACR,mBAAOY,QAAQ,CAAC4B,MAAT,CAAgB,OAAhB,EAAyB,EAAzB,CAAP;;AAEF,eAAK,EAAL;AACEJ,YAAAA,SAAS,CAACK,OAAV;AACA7B,YAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;;AAEF,eAAK,EAAL;AACEF,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;;AAEF,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAOF,QAAQ,CAACO,IAAT,EAAP;AA9DM;AAAV;AAgED,KAjEM,EAiEJV,OAjEI,EAiEK,IAjEL,EAiEW,CAAC,CAAC,CAAD,EAAI,EAAJ,CAAD,CAjEX,CAAP;AAkED,GApE4D,CAA3C,CAAlB;AAqEA,SAAO;AACLW,IAAAA,QADK,oBACIC,KADJ,EACW;AACdpB,MAAAA,MAAM,CAACqB,IAAP,CAAYD,KAAZ;AACAe,MAAAA,SAAS,CAACM,MAAV;AACD;AAJI,GAAP;AAOD;;AAED,IAAMC,UAAU,GAAG;AACjBC,EAAAA,MAAM,EAAEhD,qBADS;AAEjBiD,EAAAA,SAAS,EAAEX,wBAFM;AAGjBY,EAAAA,KAAK,EAAEX,oBAHU;AAIjBY,EAAAA,KAAK,EAAExB;AAJU,CAAnB;;AAMA,SAASyB,eAAT,CAAyBC,IAAzB,EAAwC;AAAA;;AAAA,oCAANC,IAAM;AAANA,IAAAA,IAAM;AAAA;;AACtC,6BAAOP,UAAU,CAACM,IAAD,CAAjB,qBAAO,+CAAAN,UAAU,QAAV,CAAsBO,IAAtB,EAAP;AACD;;AAED,SAASC,wBAAT,CAAkCC,UAAlC,EAA8CC,mBAA9C,EAAmEC,UAAnE,EAA+EzD,OAA/E,EAAwF;AACtF,MAAI0D,kBAAJ,EAAwBC,mBAAxB,EAA6CC,qBAA7C,EAAoEC,mBAApE,EAAyFC,qBAAzF;;AAEA,GAACJ,kBAAkB,GAAG1D,OAAO,CAAC+D,SAA9B,KAA4C,IAA5C,GAAmDL,kBAAnD,GAAwE1D,OAAO,CAAC+D,SAAR,GAAoB,EAA5F;AACA,GAACH,qBAAqB,GAAG,CAACD,mBAAmB,GAAG3D,OAAO,CAAC+D,SAA/B,EAA0CX,IAAnE,KAA4E,IAA5E,GAAmFQ,qBAAnF,GAA2GD,mBAAmB,CAACP,IAApB,GAA2B,OAAtI;AACA,GAACU,qBAAqB,GAAG,CAACD,mBAAmB,GAAG7D,OAAO,CAAC+D,SAA/B,EAA0CvD,cAAnE,KAAsF,IAAtF,GAA6FsD,qBAA7F,GAAqHD,mBAAmB,CAACrD,cAApB,GAAqC+C,UAAU,CAAC/C,cAArK;AACA,MAAMwD,aAAa,GAAGC,mBAAmB,CAACV,UAAD,EAAaC,mBAAb,CAAzC;AACA,MAAMvD,QAAQ,GAAGwD,UAAU,CAAC;AAC1BvD,IAAAA,WAAW,EAAE8D,aAAa,CAAC9D,WADD;AAE1ByB,IAAAA,cAAc,EAAEqC,aAAa,CAACrC,cAFJ;AAG1BuC,IAAAA,kBAAkB,EAAEF,aAAa,CAACE,kBAHR;AAI1BjD,IAAAA,IAAI,EAAE+C,aAAa,CAAC/C,IAJM;AAK1Bd,IAAAA,QAAQ,EAAE6D,aAAa,CAAC7D;AALE,GAAD,CAA3B;;AAOA,4BAGIH,OAAO,CAAC+D,SAHZ;AAAA,MACQI,aADR,uBACEf,IADF;AAAA,MAEKgB,gBAFL;;AAIA,MAAML,SAAS,GAAGZ,eAAe,CAACgB,aAAD,EAAgB;AAC/ClE,IAAAA,QAAQ,EAARA,QAD+C;AAE/CC,IAAAA,WAAW,EAAE8D,aAAa,CAAC9D,WAFoB;AAG/CyB,IAAAA,cAAc,EAAEqC,aAAa,CAACrC,cAHiB;AAI/CxB,IAAAA,QAAQ,EAAE6D,aAAa,CAAC7D;AAJuB,GAAhB,EAK9BiE,gBAL8B,CAAjC;;AAOA,MAAIL,SAAS,KAAKM,SAAlB,EAA6B;AAC3B,UAAM,IAAIC,KAAJ,+BAAsCH,aAAtC,CAAN;AACD;;AAEDH,EAAAA,aAAa,CAACvC,IAAd,GAAqB,UAAAD,KAAK,EAAI;AAC5B,QAAI,CAACwC,aAAa,CAACrC,cAAd,EAAL,EAAqC;AACnCoC,MAAAA,SAAS,CAACxC,QAAV,CAAmBC,KAAnB;AACD;AACF,GAJD;;AAMA,SAAOwC,aAAP;AACD;;AAED,SAASC,mBAAT,CAA6BV,UAA7B,EAAyCC,mBAAzC,EAAqE;AAAA,MAA5BA,mBAA4B;AAA5BA,IAAAA,mBAA4B,GAAN,IAAM;AAAA;;AACnE,MAAMe,qBAAqB,GAAG,IAAIC,GAAJ,EAA9B;AACA,MAAIC,YAAY,GAAG,KAAnB;AACA,MAAIC,SAAS,GAAG,KAAhB;;AAEA,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAAClB,UAAD,EAAazD,OAAb,EAA8B;AAAA,QAAjBA,OAAiB;AAAjBA,MAAAA,OAAiB,GAAP,EAAO;AAAA;;AAC9C,QAAM4E,kBAAkB,GAAGtB,wBAAwB,CAACC,UAAD,EAAaS,aAAb,EAA4BP,UAA5B,EAAwCzD,OAAxC,CAAnD;;AAEA,QAAI,CAAC4E,kBAAkB,CAACjD,cAAnB,EAAL,EAA0C;AACxC4C,MAAAA,qBAAqB,CAACM,GAAtB,CAA0BD,kBAA1B;;AAEA,UAAIF,SAAS,KAAK,IAAlB,EAAwB;AACtBE,QAAAA,kBAAkB,CAACnD,IAAnB,CAAwB;AACtBQ,UAAAA,GAAG,EAAE;AADiB,SAAxB;AAGD;AACF;;AAED,WAAO;AACL0C,MAAAA,SAAS,EAAEC,kBAAkB,CAACD;AADzB,KAAP;AAGD,GAhBD;;AAkBA,MAAMzE,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAIuE,YAAY,KAAK,KAArB,EAA4B;AAC1BA,MAAAA,YAAY,GAAG,IAAf;;AAEA,UAAIjB,mBAAmB,KAAK,IAA5B,EAAkC;AAChCA,QAAAA,mBAAmB,CAACsB,gBAApB,CAAqCd,aAArC;AACD;AACF;AACF,GARD;;AAUA,MAAMc,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAF,kBAAkB,EAAI;AAC7C,QAAIL,qBAAqB,CAACQ,GAAtB,CAA0BH,kBAA1B,KAAiDA,kBAAkB,CAACjD,cAAnB,EAArD,EAA0F;AACxF4C,MAAAA,qBAAqB,UAArB,CAA6BK,kBAA7B;AACD;AACF,GAJD;;AAMA,MAAMjD,cAAc,GAAG,SAAjBA,cAAiB;AAAA,WAAM8C,YAAY,KAAK,IAAvB;AAAA,GAAvB;;AAEA,MAAMP,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,WAAMK,qBAAqB,CAACS,IAA5B;AAAA,GAA3B;;AAEA,MAAM/D,IAAI,GAAG,SAAPA,IAAO,CAAA3B,KAAK,EAAI;AACpB,QAAIoF,SAAS,KAAK,KAAlB,EAAyB;AACvBO,MAAAA,MAAM,CAAC;AACL3F,QAAAA,KAAK,EAALA,KADK;AAEL2C,QAAAA,GAAG,EAAE;AAFA,OAAD,CAAN;AAID;AACF,GAPD;;AASA,MAAM9B,QAAQ,GAAG,SAAXA,QAAW,CAAAiB,KAAK,EAAI;AACxB,QAAIsD,SAAS,KAAK,KAAlB,EAAyB;AACvBA,MAAAA,SAAS,GAAG,IAAZ;AACAO,MAAAA,MAAM,CAAC;AACL7D,QAAAA,KAAK,EAALA,KADK;AAELa,QAAAA,GAAG,EAAE;AAFA,OAAD,CAAN;AAID;AACF,GARD;;AAUA,MAAMgD,MAAM,GAAG,SAATA,MAAS,CAAAzD,KAAK;AAAA,WAAI,KAAK+C,qBAAqB,CAACW,OAAtB,CAA8B,UAAAN,kBAAkB;AAAA,aAAI,KAAKA,kBAAkB,CAACnD,IAAnB,CAAwBD,KAAxB,CAAT;AAAA,KAAhD,CAAT;AAAA,GAApB;;AAEA,MAAMwC,aAAa,GAAG;AACpBW,IAAAA,SAAS,EAATA,SADoB;AAEpBzE,IAAAA,WAAW,EAAXA,WAFoB;AAGpB4E,IAAAA,gBAAgB,EAAhBA,gBAHoB;AAIpBnD,IAAAA,cAAc,EAAdA,cAJoB;AAKpBuC,IAAAA,kBAAkB,EAAlBA,kBALoB;AAMpBjD,IAAAA,IAAI,EAAJA,IANoB;AAOpBd,IAAAA,QAAQ,EAARA;AAPoB,GAAtB;AASA,SAAO6D,aAAP;AACD,EAED;AACA;AACA;AACA;;;AAEA,SAASmB,gBAAT,CAA0BC,QAA1B,EAAoC5E,cAApC,EAAuF;AAAA,MAAnDA,cAAmD;AAAnDA,IAAAA,cAAmD,GAAlCZ,WAAW,CAAC,SAAD,CAAX,CAAuByF,SAAW;AAAA;;AACrF,MAAID,QAAQ,IAAIxF,WAAW,CAAC,SAAD,CAAX,CAAuB0F,gBAAvB,CAAwCF,QAAxC,CAAhB,EAAmE;AACjE5E,IAAAA,cAAc,GAAG4E,QAAjB;AACAA,IAAAA,QAAQ,GAAGf,SAAX;AACD;;AAED,MAAML,aAAa,GAAGC,mBAAmB,CAAC;AACxCzD,IAAAA,cAAc,EAAdA;AADwC,GAAD,CAAzC;;AAIA,MAAI4E,QAAQ,KAAKf,SAAjB,EAA4B;AAC1B,WAAO;AACLM,MAAAA,SAAS,EAAEX,aAAa,CAACW,SADpB;AAELT,MAAAA,kBAAkB,EAAEF,aAAa,CAACE,kBAF7B;AAGLjD,MAAAA,IAAI,EAAE+C,aAAa,CAAC/C,IAHf;AAILd,MAAAA,QAAQ,EAAE6D,aAAa,CAAC7D;AAJnB,KAAP;AAMD;;AAEDK,EAAAA,cAAc,CAACC,KAAf,EAAsB,aAAaC,kBAAkB,CAACC,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AAC5E,WAAOF,kBAAkB,CAACG,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,aAAO,CAAP;AAAU,gBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACR,eAAK,CAAL;AACEF,YAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,mBAAOmE,QAAQ,CAAC;AACdlB,cAAAA,kBAAkB,EAAEF,aAAa,CAACE,kBADpB;AAEdjD,cAAAA,IAAI,EAAE+C,aAAa,CAAC/C,IAFN;AAGdd,cAAAA,QAAQ,EAAE6D,aAAa,CAAC7D;AAHV,aAAD,CAAf;;AAMF,eAAK,CAAL;AACEY,YAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;;AAEF,eAAK,CAAL;AACEF,YAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,YAAAA,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;AACAI,YAAAA,OAAO,CAACC,KAAR,qCAAgD3B,aAAa,CAAC4B,aAAd,CAA4BN,QAAQ,CAACG,EAArC,CAAhD;;AAEF,eAAK,CAAL;AACE8C,YAAAA,aAAa,CAAC7D,QAAd;;AAEF,eAAK,CAAL;AACA,eAAK,KAAL;AACE,mBAAOY,QAAQ,CAACO,IAAT,EAAP;AAxBM;AAAV;AA0BD,KA3BM,EA2BJV,OA3BI,EA2BK,IA3BL,EA2BW,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CA3BX,CAAP;AA4BD,GA7BkC,CAAnC;AA8BA,SAAO;AACL+D,IAAAA,SAAS,EAAEX,aAAa,CAACW;AADpB,GAAP;AAGD;;AAED,IAAMY,YAAY,GAAG,YAAY;AAC/B,MAAIC,EAAJ;AAEA;AACEA,IAAAA,EAAE,GAAG,SAASD,YAAT,GAAwB;AAC3B,YAAM,IAAIjB,KAAJ,CAAU,iBAAV,CAAN;AACD,KAFD;AAGD;AAED,SAAOkB,EAAP;AACD,CAVoB,EAArB,EAYA;;;AAEA,SAASC,UAAT,CAAoBC,MAApB,EAA4BlF,cAA5B,EAA+E;AAAA,MAAnDA,cAAmD;AAAnDA,IAAAA,cAAmD,GAAlCZ,WAAW,CAAC,SAAD,CAAX,CAAuByF,SAAW;AAAA;;AAC7E,MAAM9B,UAAU,GAAG4B,gBAAgB,CAAC3E,cAAD,CAAnC;AACA,MAAI+B,SAAJ;;AAEA,MAAMoC,SAAS,GAAG,SAAZA,SAAY,CAAAlB,UAAU;AAAA,WAAIF,UAAU,CAACoB,SAAX,CAAqBlB,UAArB,CAAJ;AAAA,GAA5B;;AAEA,MAAMhD,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClB,QAAI8B,SAAS,KAAK8B,SAAlB,EAA6B;AAC3B9B,MAAAA,SAAS,GAAG/B,cAAc,CAACC,KAAf,EAAsB,aAAaC,kBAAkB,CAACC,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AACxF,eAAOF,kBAAkB,CAACG,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,iBAAO,CAAP;AAAU,oBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACR,mBAAK,CAAL;AACEF,gBAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,gBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,uBAAOyE,MAAM,CAAC;AACZxB,kBAAAA,kBAAkB,EAAEX,UAAU,CAACW,kBADnB;AAEZjD,kBAAAA,IAAI,EAAEsC,UAAU,CAACtC,IAFL;AAGZd,kBAAAA,QAAQ,EAAEoD,UAAU,CAACpD;AAHT,iBAAD,CAAb;;AAMF,mBAAK,CAAL;AACE,uBAAOY,QAAQ,CAAC4B,MAAT,CAAgB,QAAhB,EAA0B5B,QAAQ,CAAC4E,IAAnC,CAAP;;AAEF,mBAAK,CAAL;AACE5E,gBAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAuC,gBAAAA,UAAU,CAACpD,QAAX;AACA,uBAAOY,QAAQ,CAAC6E,MAAT,CAAgB,CAAhB,CAAP;;AAEF,mBAAK,CAAL;AACA,mBAAK,KAAL;AACE,uBAAO7E,QAAQ,CAACO,IAAT,EAAP;AApBM;AAAV;AAsBD,SAvBM,EAuBJV,OAvBI,EAuBK,IAvBL,EAuBW,CAAC,CAAC,CAAD,GAAK,CAAL,EAAQ,CAAR,CAAD,CAvBX,CAAP;AAwBD,OAzB8C,CAAnC,CAAZ;AA0BD;;AAED,WAAO;AACL,UAAIN,MAAJ,GAAa;AACX,eAAOiC,SAAS,CAACjC,MAAjB;AACD,OAHI;;AAKL,UAAIuF,SAAJ,GAAgB;AACd,eAAOtD,SAAS,CAACsD,SAAjB;AACD,OAPI;;AASLlB,MAAAA,SAAS,EAATA,SATK;AAULmB,MAAAA,IAAI,EAAJA,IAVK;AAWLC,MAAAA,MAAM,EAANA,MAXK;AAYLC,MAAAA,WAAW,EAAXA,WAZK;AAaLC,MAAAA,UAAU,EAAVA,UAbK;AAcLC,MAAAA,MAAM,EAANA;AAdK,KAAP;AAgBD,GA9CD;;AAgDA,MAAMJ,IAAI,GAAG,aAAapF,kBAAkB,CAACC,IAAnB,CAAwB,SAASmF,IAAT,CAAcK,OAAd,EAA4B;AAAA,QAAdA,OAAc;AAAdA,MAAAA,OAAc,GAAJ,CAAC,CAAG;AAAA;;AAC5E,QAAIC,OAAJ,EAAaC,KAAb;AACA,WAAO3F,kBAAkB,CAACG,IAAnB,CAAwB,SAASyF,KAAT,CAAeC,SAAf,EAA0B;AACvD,aAAO,CAAP;AAAU,gBAAQA,SAAS,CAACvF,IAAV,GAAiBuF,SAAS,CAACtF,IAAnC;AACR,eAAK,CAAL;AACEmF,YAAAA,OAAO,GAAGxG,WAAW,CAAC,SAAD,CAAX,CAAuB4G,cAAjC;AACAH,YAAAA,KAAK,GAAGF,OAAO,GAAG,CAAV,GAAcC,OAAO,CAACK,YAAtB,GAAqC,CAA7C;;AAEF,eAAK,CAAL;AAEE,gBAAI,CAAClE,SAAS,CAAC2D,MAAV,EAAL,EAAyB;AACvBK,cAAAA,SAAS,CAACtF,IAAV,GAAiB,CAAjB;AACA;AACD;;AAED,mBAAOsF,SAAS,CAAC5D,MAAV,CAAiB,OAAjB,EAA0B,EAA1B,CAAP;;AAEF,eAAK,CAAL;AACE,gBAAI,EAAEwD,OAAO,GAAG,CAAV,IAAeA,OAAO,GAAGC,OAAO,CAACK,YAAR,GAAuBJ,KAAlD,CAAJ,EAA8D;AAC5DE,cAAAA,SAAS,CAACtF,IAAV,GAAiB,EAAjB;AACA;AACD;;AAEDsB,YAAAA,SAAS,CAACjB,IAAV,CAAeoF,WAAf,EANF,CAM+B;;AAE7BH,YAAAA,SAAS,CAACtF,IAAV,GAAiB,CAAjB;AACA,mBAAOrB,WAAW,CAAC,SAAD,CAAX,CAAuB+G,SAAvB,CAAiC;AAAA,qBAAMpE,SAAS,CAAC2D,MAAV,EAAN;AAAA,aAAjC,CAAP;;AAEF,eAAK,CAAL;AACE,mBAAOK,SAAS,CAAC5D,MAAV,CAAiB,OAAjB,EAA0B,EAA1B,CAAP;;AAEF,eAAK,EAAL;AACE4D,YAAAA,SAAS,CAACtF,IAAV,GAAiB,EAAjB;AACA;;AAEF,eAAK,EAAL;AACEsF,YAAAA,SAAS,CAACtF,IAAV,GAAiB,CAAjB;AACA;;AAEF,eAAK,EAAL;AACE,gBAAI,EAAEsB,SAAS,CAACsD,SAAV,KAAwBxB,SAA1B,CAAJ,EAA0C;AACxCkC,cAAAA,SAAS,CAACtF,IAAV,GAAiB,EAAjB;AACA;AACD;;AAED,kBAAMsB,SAAS,CAACsD,SAAhB;;AAEF,eAAK,EAAL;AACE,mBAAOU,SAAS,CAAC5D,MAAV,CAAiB,QAAjB,EAA2BJ,SAAS,CAACjC,MAArC,CAAP;;AAEF,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAOiG,SAAS,CAACjF,IAAV,EAAP;AAjDM;AAAV;AAmDD,KApDM,EAoDJwE,IApDI,CAAP;AAqDD,GAvDyB,CAA1B;;AAyDA,MAAMC,MAAM,GAAG,SAATA,MAAS;AAAA,WAAM,KAAKxD,SAAS,CAACjB,IAAV,EAAX;AAAA,GAAf;;AAEA,MAAM0E,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMzD,SAAS,CAACqE,UAAV,EAAN;AAAA,GAApB;;AAEA,MAAMX,UAAU,GAAG,SAAbA,UAAa;AAAA,WAAM1D,SAAS,CAACsE,SAAV,EAAN;AAAA,GAAnB;;AAEA,MAAMX,MAAM,GAAG,SAATA,MAAS;AAAA,WAAM3D,SAAS,CAAC2D,MAAV,EAAN;AAAA,GAAf;;AAEA,SAAO;AACLvB,IAAAA,SAAS,EAATA,SADK;AAELlE,IAAAA,KAAK,EAALA;AAFK,GAAP;AAID;;AACD,SAASiG,WAAT,GAAuB,CAAE;;AAEzB,SAASI,kBAAT,GAA8B;AAC5B,MAAIC,iBAAiB,GAAG,CAAxB;AACA,MAAIC,cAAc,GAAG,CAAC,CAAtB;AACA,MAAMC,SAAS,GAAG,IAAIC,GAAJ,EAAlB;AACA,MAAMC,4BAA4B,GAAG,IAAID,GAAJ,EAArC;AACA,MAAME,aAAa,GAAG,IAAI5C,GAAJ,EAAtB;;AAEA,MAAM6C,WAAW,GAAG,SAAdA,WAAc,CAACC,SAAD,EAAYC,QAAZ,EAAyB;AAC3C,QAAIP,cAAc,GAAG,CAArB,EAAwB;AACtBD,MAAAA,iBAAiB,GAAGC,cAApB;AACAA,MAAAA,cAAc,GAAG,CAAC,CAAlB;AACD,KAHD,MAGO;AACL,QAAED,iBAAF;AACD;;AAED,QAAI,CAACE,SAAS,CAAClC,GAAV,CAAcuC,SAAd,CAAL,EAA+B;AAC7BL,MAAAA,SAAS,CAACO,GAAV,CAAcF,SAAd,EAAyB,IAAIJ,GAAJ,CAAQ,CAAC,CAACH,iBAAD,EAAoBQ,QAApB,CAAD,CAAR,CAAzB;AACD,KAFD,MAEO;AACLN,MAAAA,SAAS,CAACQ,GAAV,CAAcH,SAAd,EAAyBE,GAAzB,CAA6BT,iBAA7B,EAAgDQ,QAAhD;AACD;;AAEDJ,IAAAA,4BAA4B,CAACK,GAA7B,CAAiCT,iBAAjC,EAAoDO,SAApD;AACA,WAAOP,iBAAP;AACD,GAhBD;;AAkBA,MAAMW,eAAe,GAAG,SAAlBA,eAAkB,CAACJ,SAAD,EAAYC,QAAZ,EAAyB;AAC/C,QAAMI,UAAU,GAAGN,WAAW,CAACC,SAAD,EAAYC,QAAZ,CAA9B;AACAH,IAAAA,aAAa,CAACvC,GAAd,CAAkB0C,QAAlB;AACA,WAAOI,UAAP;AACD,GAJD;;AAMA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAD,UAAU,EAAI;AACnC,QAAIR,4BAA4B,CAACpC,GAA7B,CAAiC4C,UAAjC,CAAJ,EAAkD;AAChD,UAAML,SAAS,GAAGH,4BAA4B,CAACM,GAA7B,CAAiCE,UAAjC,CAAlB;AACAR,MAAAA,4BAA4B,UAA5B,CAAoCQ,UAApC;AACA,UAAME,cAAc,GAAGZ,SAAS,CAACQ,GAAV,CAAcH,SAAd,CAAvB;;AAEA,UAAIO,cAAc,CAAC9C,GAAf,CAAmB4C,UAAnB,CAAJ,EAAoC;AAClCE,QAAAA,cAAc,UAAd,CAAsBF,UAAtB;AACAX,QAAAA,cAAc,GAAGW,UAAjB;AACA,eAAO,IAAP;AACD;AACF;;AAED,WAAO,KAAP;AACD,GAdD;;AAgBA,MAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAR,SAAS,EAAI;AACtC,QAAIL,SAAS,CAAClC,GAAV,CAAcuC,SAAd,CAAJ,EAA8B;AAC5BL,MAAAA,SAAS,CAACQ,GAAV,CAAcH,SAAd,EAAyBS,KAAzB;AACD;AACF,GAJD;;AAMA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAV,SAAS,EAAI;AAChC,QAAIL,SAAS,CAAClC,GAAV,CAAcuC,SAAd,CAAJ,EAA8B;AAC5B,UAAMO,cAAc,GAAG,EAAvB;AACAZ,MAAAA,SAAS,CAACQ,GAAV,CAAcH,SAAd,EAAyBpC,OAAzB,CAAiC,UAAAqC,QAAQ;AAAA,eAAI,KAAKM,cAAc,CAACpG,IAAf,CAAoB8F,QAApB,CAAT;AAAA,OAAzC;AACA,aAAOM,cAAP;AACD;AACF,GAND;;AAQA,MAAMI,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAX,SAAS,EAAI;AACpC,WAAOL,SAAS,CAAClC,GAAV,CAAcuC,SAAd,IAA2BL,SAAS,CAACQ,GAAV,CAAcH,SAAd,EAAyBtC,IAApD,GAA2D,CAAlE;AACD,GAFD;;AAIA,MAAMkD,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAMC,UAAU,GAAG,EAAnB;AACAlB,IAAAA,SAAS,CAAC/B,OAAV,CAAkB,UAAC+B,SAAD,EAAYK,SAAZ;AAAA,aAA0B,KAAKa,UAAU,CAAC1G,IAAX,CAAgB6F,SAAhB,CAA/B;AAAA,KAAlB;AACA,WAAOa,UAAP;AACD,GAJD;;AAMA,MAAMC,IAAI,GAAG,SAAPA,IAAO,CAACd,SAAD,EAAwB;AAAA,uCAATjE,IAAS;AAATA,MAAAA,IAAS;AAAA;;AACnC,QAAI4D,SAAS,CAAClC,GAAV,CAAcuC,SAAd,CAAJ,EAA8B;AAC5BL,MAAAA,SAAS,CAACQ,GAAV,CAAcH,SAAd,EAAyBpC,OAAzB,CAAiC,UAACqC,QAAD,EAAWI,UAAX;AAAA,eAA0B,KAAKU,cAAc,CAACd,QAAD,EAAWI,UAAX,EAAuBtE,IAAvB,CAA7C;AAAA,OAAjC;AACD;AACF,GAJD;;AAMA,MAAMgF,cAAc,GAAG,SAAjBA,cAAiB,CAACd,QAAD,EAAWI,UAAX,EAAuBtE,IAAvB,EAAgC;AACrD,QAAI;AACFkE,MAAAA,QAAQ,MAAR,SAAYlE,IAAZ;AACD,KAFD,CAEE,OAAO1D,CAAP,EAAU;AACVwB,MAAAA,OAAO,CAACC,KAAR,uCAAkD3B,aAAa,CAAC4B,aAAd,CAA4B1B,CAA5B,CAAlD;AACD,KAJD,SAIU;AACR,UAAIyH,aAAa,CAACrC,GAAd,CAAkBwC,QAAlB,CAAJ,EAAiC;AAC/BH,QAAAA,aAAa,UAAb,CAAqBG,QAArB;AACAK,QAAAA,cAAc,CAACD,UAAD,CAAd;AACD;AACF;AACF,GAXD;;AAaA,SAAO;AACLN,IAAAA,WAAW,EAAXA,WADK;AAELK,IAAAA,eAAe,EAAfA,eAFK;AAGLE,IAAAA,cAAc,EAAdA,cAHK;AAILE,IAAAA,kBAAkB,EAAlBA,kBAJK;AAKLE,IAAAA,YAAY,EAAZA,YALK;AAMLC,IAAAA,gBAAgB,EAAhBA,gBANK;AAOLC,IAAAA,aAAa,EAAbA,aAPK;AAQLE,IAAAA,IAAI,EAAJA,IARK;AASLE,IAAAA,EAAE,EAAEjB,WATC;AAULkB,IAAAA,IAAI,EAAEb,eAVD;AAWLc,IAAAA,GAAG,EAAEZ,cAXA;AAYLa,IAAAA,MAAM,EAAEX;AAZH,GAAP;AAcD;;AACD,SAASY,gBAAT,CAA0BC,YAA1B,EAAwCrB,SAAxC,EAAmD;AAAA;;AACjD,mCACSA,SADT,iBAC+B,qBAAAC,QAAQ;AAAA,WAAIoB,YAAY,CAACtB,WAAb,CAAyBC,SAAzB,EAAoCC,QAApC,CAAJ;AAAA,GADvC,gBAESD,SAFT,qBAEmC,yBAAAC,QAAQ;AAAA,WAAIoB,YAAY,CAACjB,eAAb,CAA6BJ,SAA7B,EAAwCC,QAAxC,CAAJ;AAAA,GAF3C,mBAGYD,SAHZ,iBAGkCqB,YAAY,CAACf,cAH/C,sBAIeN,SAJf,kBAIsC;AAAA,WAAMqB,YAAY,CAACb,kBAAb,CAAgCR,SAAhC,CAAN;AAAA,GAJtC,gBAKSA,SALT,sBAKoC;AAAA,WAAMqB,YAAY,CAACV,gBAAb,CAA8BX,SAA9B,CAAN;AAAA,GALpC,gBAMSA,SANT,kBAMgC;AAAA,WAAMqB,YAAY,CAACX,YAAb,CAA0BV,SAA1B,CAAN;AAAA,GANhC,iBAOUA,SAPV,IAOwB;AAAA,WAAMqB,YAAY,CAACP,IAAb,CAAkBd,SAAlB,CAAN;AAAA,GAPxB;AASD;;AAED,IAAMsB,UAAU,GAAGzD,gBAAnB;AACAyD,UAAU,CAACC,IAAX,GAAkBtD,YAAlB;AAEAlG,OAAO,CAACyJ,YAAR,GAAuBhC,kBAAvB;AACAzH,OAAO,CAACuJ,UAAR,GAAqBA,UAArB;AACAvJ,OAAO,CAAC0J,IAAR,GAAetD,UAAf;AACApG,OAAO,CAACqH,WAAR,GAAsBA,WAAtB;AACArH,OAAO,CAACqJ,gBAAR,GAA2BA,gBAA3B","sourceRoot":"/","sourcesContent":["// @ts-nocheck\r\n'use strict';\r\n\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n\r\nvar co = require('./co.cc');\r\nvar valueTypes_cc = require('./value-types.cc');\r\n\r\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\r\n\r\nvar co__default = /*#__PURE__*/_interopDefaultLegacy(co);\r\n\r\n//   return function* dispatch({ getStates }) {\r\n//   };\r\n// }\r\n\r\nconst emptyArray = Object.freeze([]);\r\nfunction createActiveScheduler({\r\n  dispatch,\r\n  unsubscribe,\r\n  complete\r\n}, options) {\r\n  let states = [];\r\n\r\n  const getStates = () => {\r\n    let result;\r\n\r\n    if (states.length === 0) {\r\n      result = emptyArray;\r\n    } else {\r\n      result = states;\r\n      states = [];\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  options.coroutineGroup.start( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\r\n    return regeneratorRuntime.wrap(function _callee$(_context) {\r\n      while (1) switch (_context.prev = _context.next) {\r\n        case 0:\r\n          _context.prev = 0;\r\n          _context.next = 3;\r\n          return dispatch({\r\n            getStates\r\n          });\r\n\r\n        case 3:\r\n          _context.next = 8;\r\n          break;\r\n\r\n        case 5:\r\n          _context.prev = 5;\r\n          _context.t0 = _context[\"catch\"](0);\r\n          console.error(`[observable.createActiveScheduler] error: ${valueTypes_cc.errorToString(_context.t0)}`);\r\n\r\n        case 8:\r\n          if (states.length > 0) {\r\n            states = [];\r\n          }\r\n\r\n          unsubscribe();\r\n          complete();\r\n\r\n        case 11:\r\n        case \"end\":\r\n          return _context.stop();\r\n      }\r\n    }, _callee, null, [[0, 5]]);\r\n  }));\r\n  return {\r\n    schedule(state) {\r\n      states.push(state);\r\n    }\r\n\r\n  };\r\n}\r\n\r\n//   return function* dispatch(state) {\r\n//   };\r\n// }\r\n\r\nfunction createAsyncScheduler({\r\n  dispatch,\r\n  unsubscribe,\r\n  isUnsubscribed,\r\n  complete\r\n}, options) {\r\n  var _options$maxConcurren;\r\n\r\n  const maxConcurrentLimit = Math.max((_options$maxConcurren = options.maxConcurrentLimit) != null ? _options$maxConcurren : 0, 0);\r\n  const states = [];\r\n  let running = 0;\r\n  let end = false;\r\n\r\n  const dispatchOne = state => {\r\n    end = end || state.end === true;\r\n    ++running;\r\n    options.coroutineGroup.start( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\r\n      return regeneratorRuntime.wrap(function _callee$(_context) {\r\n        while (1) switch (_context.prev = _context.next) {\r\n          case 0:\r\n            _context.prev = 0;\r\n            _context.next = 3;\r\n            return dispatch(state);\r\n\r\n          case 3:\r\n            _context.next = 8;\r\n            break;\r\n\r\n          case 5:\r\n            _context.prev = 5;\r\n            _context.t0 = _context[\"catch\"](0);\r\n            console.error(`[observable.AsyncScheduler] error: ${valueTypes_cc.errorToString(_context.t0)}`);\r\n\r\n          case 8:\r\n            --running;\r\n            dispatchNext();\r\n\r\n          case 10:\r\n          case \"end\":\r\n            return _context.stop();\r\n        }\r\n      }, _callee, null, [[0, 5]]);\r\n    }));\r\n  };\r\n\r\n  const dispatchNext = () => {\r\n    if (states.length === 0) {\r\n      if (running === 0 && (end || isUnsubscribed())) {\r\n        unsubscribe();\r\n        complete();\r\n      }\r\n    } else if ((running < maxConcurrentLimit || maxConcurrentLimit === 0) && (states[0].end === false || running === 0)) {\r\n      dispatchOne(states.shift());\r\n    }\r\n  };\r\n\r\n  return {\r\n    schedule(state) {\r\n      states.push(state);\r\n      dispatchNext();\r\n    }\r\n\r\n  };\r\n}\r\n\r\n//   return function dispatch(state) {\r\n//   };\r\n// }\r\n\r\nfunction createImmediateScheduler({\r\n  dispatch,\r\n  unsubscribe,\r\n  isUnsubscribed,\r\n  complete\r\n}) {\r\n  return {\r\n    schedule(state) {\r\n      const end = state.end === true;\r\n\r\n      try {\r\n        dispatch(state);\r\n      } catch (e) {\r\n        console.error(`[observable.ImmediateScheduler] error: ${valueTypes_cc.errorToString(e)}`);\r\n      }\r\n\r\n      if (end || isUnsubscribed()) {\r\n        unsubscribe();\r\n        complete();\r\n      }\r\n    }\r\n\r\n  };\r\n}\r\n\r\n//   return function* dispatch(state) {\r\n//   };\r\n// }\r\n\r\nfunction createQueueScheduler({\r\n  dispatch,\r\n  unsubscribe,\r\n  isUnsubscribed,\r\n  complete\r\n}, options) {\r\n  const states = [];\r\n  const coroutine = options.coroutineGroup.start( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\r\n    var i, end, imax, state;\r\n    return regeneratorRuntime.wrap(function _callee$(_context) {\r\n      while (1) switch (_context.prev = _context.next) {\r\n        case 0:\r\n\r\n          i = 0;\r\n          end = false;\r\n          _context.prev = 3;\r\n          imax = states.length;\r\n\r\n        case 5:\r\n          if (!(i < imax)) {\r\n            _context.next = 12;\r\n            break;\r\n          }\r\n\r\n          state = states[i++];\r\n          end = end || state.end === true;\r\n          _context.next = 10;\r\n          return dispatch(state);\r\n\r\n        case 10:\r\n          _context.next = 5;\r\n          break;\r\n\r\n        case 12:\r\n          _context.next = 17;\r\n          break;\r\n\r\n        case 14:\r\n          _context.prev = 14;\r\n          _context.t0 = _context[\"catch\"](3);\r\n          console.error(`[observable.QueueScheduler] error: ${valueTypes_cc.errorToString(_context.t0)}`);\r\n\r\n        case 17:\r\n          if (i > 0) {\r\n            states.splice(0, i);\r\n          }\r\n\r\n          if (!(states.length === 0)) {\r\n            _context.next = 26;\r\n            break;\r\n          }\r\n\r\n          if (!(end || isUnsubscribed())) {\r\n            _context.next = 23;\r\n            break;\r\n          }\r\n\r\n          unsubscribe();\r\n          complete();\r\n          return _context.abrupt(\"break\", 28);\r\n\r\n        case 23:\r\n          coroutine.suspend();\r\n          _context.next = 26;\r\n          return;\r\n\r\n        case 26:\r\n          _context.next = 0;\r\n          break;\r\n\r\n        case 28:\r\n        case \"end\":\r\n          return _context.stop();\r\n      }\r\n    }, _callee, null, [[3, 14]]);\r\n  }));\r\n  return {\r\n    schedule(state) {\r\n      states.push(state);\r\n      coroutine.resume();\r\n    }\r\n\r\n  };\r\n}\r\n\r\nconst schedulers = {\r\n  active: createActiveScheduler,\r\n  immediate: createImmediateScheduler,\r\n  queue: createQueueScheduler,\r\n  async: createAsyncScheduler\r\n};\r\nfunction createScheduler(type, ...args) {\r\n  return schedulers[type]?.(...args);\r\n}\r\n\r\nfunction createSubscribeableChild(observable, subscribeableParent, subscriber, options) {\r\n  var _options$scheduler, _options$scheduler2, _options$scheduler2$t, _options$scheduler3, _options$scheduler3$c;\r\n\r\n  (_options$scheduler = options.scheduler) != null ? _options$scheduler : options.scheduler = {};\r\n  (_options$scheduler2$t = (_options$scheduler2 = options.scheduler).type) != null ? _options$scheduler2$t : _options$scheduler2.type = 'queue';\r\n  (_options$scheduler3$c = (_options$scheduler3 = options.scheduler).coroutineGroup) != null ? _options$scheduler3$c : _options$scheduler3.coroutineGroup = observable.coroutineGroup;\r\n  const subscribeable = createSubscribeable(observable, subscribeableParent);\r\n  const dispatch = subscriber({\r\n    unsubscribe: subscribeable.unsubscribe,\r\n    isUnsubscribed: subscribeable.isUnsubscribed,\r\n    getSubscribedCount: subscribeable.getSubscribedCount,\r\n    next: subscribeable.next,\r\n    complete: subscribeable.complete\r\n  });\r\n  const {\r\n    type: schedulerType,\r\n    ...schedulerOptions\r\n  } = options.scheduler;\r\n  const scheduler = createScheduler(schedulerType, {\r\n    dispatch,\r\n    unsubscribe: subscribeable.unsubscribe,\r\n    isUnsubscribed: subscribeable.isUnsubscribed,\r\n    complete: subscribeable.complete\r\n  }, schedulerOptions);\r\n\r\n  if (scheduler === undefined) {\r\n    throw new Error(`not supported scheduler: ${schedulerType}`);\r\n  }\r\n\r\n  subscribeable.push = state => {\r\n    if (!subscribeable.isUnsubscribed()) {\r\n      scheduler.schedule(state);\r\n    }\r\n  };\r\n\r\n  return subscribeable;\r\n}\r\n\r\nfunction createSubscribeable(observable, subscribeableParent = null) {\r\n  const subscribeableChildren = new Set();\r\n  let unsubscribed = false;\r\n  let completed = false;\r\n\r\n  const subscribe = (subscriber, options = {}) => {\r\n    const subscribeableChild = createSubscribeableChild(observable, subscribeable, subscriber, options);\r\n\r\n    if (!subscribeableChild.isUnsubscribed()) {\r\n      subscribeableChildren.add(subscribeableChild);\r\n\r\n      if (completed === true) {\r\n        subscribeableChild.push({\r\n          end: true\r\n        });\r\n      }\r\n    }\r\n\r\n    return {\r\n      subscribe: subscribeableChild.subscribe\r\n    };\r\n  };\r\n\r\n  const unsubscribe = () => {\r\n    if (unsubscribed === false) {\r\n      unsubscribed = true;\r\n\r\n      if (subscribeableParent !== null) {\r\n        subscribeableParent.unsubscribeChild(subscribeable);\r\n      }\r\n    }\r\n  };\r\n\r\n  const unsubscribeChild = subscribeableChild => {\r\n    if (subscribeableChildren.has(subscribeableChild) && subscribeableChild.isUnsubscribed()) {\r\n      subscribeableChildren.delete(subscribeableChild);\r\n    }\r\n  };\r\n\r\n  const isUnsubscribed = () => unsubscribed === true;\r\n\r\n  const getSubscribedCount = () => subscribeableChildren.size;\r\n\r\n  const next = value => {\r\n    if (completed === false) {\r\n      notify({\r\n        value,\r\n        end: false\r\n      });\r\n    }\r\n  };\r\n\r\n  const complete = error => {\r\n    if (completed === false) {\r\n      completed = true;\r\n      notify({\r\n        error,\r\n        end: true\r\n      });\r\n    }\r\n  };\r\n\r\n  const notify = state => void subscribeableChildren.forEach(subscribeableChild => void subscribeableChild.push(state));\r\n\r\n  const subscribeable = {\r\n    subscribe,\r\n    unsubscribe,\r\n    unsubscribeChild,\r\n    isUnsubscribed,\r\n    getSubscribedCount,\r\n    next,\r\n    complete\r\n  };\r\n  return subscribeable;\r\n}\r\n\r\n// }\r\n// (1) function createObservable(observer)\r\n// (2) function createObservable(observer, coroutineGroup)\r\n// (3) function createObservable(coroutineGroup)\r\n\r\nfunction createObservable(observer, coroutineGroup = co__default[\"default\"].mainGroup) {\r\n  if (observer && co__default[\"default\"].isCoroutineGroup(observer)) {\r\n    coroutineGroup = observer;\r\n    observer = undefined;\r\n  }\r\n\r\n  const subscribeable = createSubscribeable({\r\n    coroutineGroup\r\n  });\r\n\r\n  if (observer === undefined) {\r\n    return {\r\n      subscribe: subscribeable.subscribe,\r\n      getSubscribedCount: subscribeable.getSubscribedCount,\r\n      next: subscribeable.next,\r\n      complete: subscribeable.complete\r\n    };\r\n  }\r\n\r\n  coroutineGroup.start( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\r\n    return regeneratorRuntime.wrap(function _callee$(_context) {\r\n      while (1) switch (_context.prev = _context.next) {\r\n        case 0:\r\n          _context.prev = 0;\r\n          _context.next = 3;\r\n          return observer({\r\n            getSubscribedCount: subscribeable.getSubscribedCount,\r\n            next: subscribeable.next,\r\n            complete: subscribeable.complete\r\n          });\r\n\r\n        case 3:\r\n          _context.next = 8;\r\n          break;\r\n\r\n        case 5:\r\n          _context.prev = 5;\r\n          _context.t0 = _context[\"catch\"](0);\r\n          console.error(`[observable.Observable] error: ${valueTypes_cc.errorToString(_context.t0)}`);\r\n\r\n        case 8:\r\n          subscribeable.complete();\r\n\r\n        case 9:\r\n        case \"end\":\r\n          return _context.stop();\r\n      }\r\n    }, _callee, null, [[0, 5]]);\r\n  }));\r\n  return {\r\n    subscribe: subscribeable.subscribe\r\n  };\r\n}\r\n\r\nconst toObservable = function () {\r\n  let to;\r\n\r\n  {\r\n    to = function toObservable() {\r\n      throw new Error('not implemented');\r\n    };\r\n  }\r\n\r\n  return to;\r\n}();\r\n\r\n// }\r\n\r\nfunction createTask(worker, coroutineGroup = co__default[\"default\"].mainGroup) {\r\n  const observable = createObservable(coroutineGroup);\r\n  let coroutine;\r\n\r\n  const subscribe = subscriber => observable.subscribe(subscriber);\r\n\r\n  const start = () => {\r\n    if (coroutine === undefined) {\r\n      coroutine = coroutineGroup.start( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\r\n        return regeneratorRuntime.wrap(function _callee$(_context) {\r\n          while (1) switch (_context.prev = _context.next) {\r\n            case 0:\r\n              _context.prev = 0;\r\n              _context.next = 3;\r\n              return worker({\r\n                getSubscribedCount: observable.getSubscribedCount,\r\n                next: observable.next,\r\n                complete: observable.complete\r\n              });\r\n\r\n            case 3:\r\n              return _context.abrupt(\"return\", _context.sent);\r\n\r\n            case 4:\r\n              _context.prev = 4;\r\n              observable.complete();\r\n              return _context.finish(4);\r\n\r\n            case 7:\r\n            case \"end\":\r\n              return _context.stop();\r\n          }\r\n        }, _callee, null, [[0,, 4, 7]]);\r\n      }));\r\n    }\r\n\r\n    return {\r\n      get result() {\r\n        return coroutine.result;\r\n      },\r\n\r\n      get exception() {\r\n        return coroutine.exception;\r\n      },\r\n\r\n      subscribe,\r\n      wait,\r\n      cancel,\r\n      isCanceling,\r\n      isCanceled,\r\n      isDone\r\n    };\r\n  };\r\n\r\n  const wait = /*#__PURE__*/regeneratorRuntime.mark(function wait(timeout = -1) {\r\n    var runtime, time0;\r\n    return regeneratorRuntime.wrap(function wait$(_context2) {\r\n      while (1) switch (_context2.prev = _context2.next) {\r\n        case 0:\r\n          runtime = co__default[\"default\"].currentRuntime;\r\n          time0 = timeout > 0 ? runtime.lastTickTime : 0;\r\n\r\n        case 2:\r\n\r\n          if (!coroutine.isDone()) {\r\n            _context2.next = 5;\r\n            break;\r\n          }\r\n\r\n          return _context2.abrupt(\"break\", 14);\r\n\r\n        case 5:\r\n          if (!(timeout > 0 && timeout < runtime.lastTickTime - time0)) {\r\n            _context2.next = 10;\r\n            break;\r\n          }\r\n\r\n          coroutine.stop(TaskTimeout); // yield co.waitUntil(() => coroutine.isStopped());\r\n\r\n          _context2.next = 9;\r\n          return co__default[\"default\"].waitUntil(() => coroutine.isDone());\r\n\r\n        case 9:\r\n          return _context2.abrupt(\"break\", 14);\r\n\r\n        case 10:\r\n          _context2.next = 12;\r\n          return;\r\n\r\n        case 12:\r\n          _context2.next = 2;\r\n          break;\r\n\r\n        case 14:\r\n          if (!(coroutine.exception !== undefined)) {\r\n            _context2.next = 16;\r\n            break;\r\n          }\r\n\r\n          throw coroutine.exception;\r\n\r\n        case 16:\r\n          return _context2.abrupt(\"return\", coroutine.result);\r\n\r\n        case 17:\r\n        case \"end\":\r\n          return _context2.stop();\r\n      }\r\n    }, wait);\r\n  });\r\n\r\n  const cancel = () => void coroutine.stop();\r\n\r\n  const isCanceling = () => coroutine.isStopping();\r\n\r\n  const isCanceled = () => coroutine.isStopped();\r\n\r\n  const isDone = () => coroutine.isDone();\r\n\r\n  return {\r\n    subscribe,\r\n    start\r\n  };\r\n}\r\nfunction TaskTimeout() {}\r\n\r\nfunction createEventEmitter() {\r\n  let currentListenerId = 0;\r\n  let freeListenerId = -1;\r\n  const listeners = new Map();\r\n  const listenerIdToEventNameMapping = new Map();\r\n  const onceListeners = new Set();\r\n\r\n  const addListener = (eventName, listener) => {\r\n    if (freeListenerId > 0) {\r\n      currentListenerId = freeListenerId;\r\n      freeListenerId = -1;\r\n    } else {\r\n      ++currentListenerId;\r\n    }\r\n\r\n    if (!listeners.has(eventName)) {\r\n      listeners.set(eventName, new Map([[currentListenerId, listener]]));\r\n    } else {\r\n      listeners.get(eventName).set(currentListenerId, listener);\r\n    }\r\n\r\n    listenerIdToEventNameMapping.set(currentListenerId, eventName);\r\n    return currentListenerId;\r\n  };\r\n\r\n  const addOnceListener = (eventName, listener) => {\r\n    const listenerId = addListener(eventName, listener);\r\n    onceListeners.add(listener);\r\n    return listenerId;\r\n  };\r\n\r\n  const removeListener = listenerId => {\r\n    if (listenerIdToEventNameMapping.has(listenerId)) {\r\n      const eventName = listenerIdToEventNameMapping.get(listenerId);\r\n      listenerIdToEventNameMapping.delete(listenerId);\r\n      const eventListeners = listeners.get(eventName);\r\n\r\n      if (eventListeners.has(listenerId)) {\r\n        eventListeners.delete(listenerId);\r\n        freeListenerId = listenerId;\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const removeAllListeners = eventName => {\r\n    if (listeners.has(eventName)) {\r\n      listeners.get(eventName).clear();\r\n    }\r\n  };\r\n\r\n  const getListeners = eventName => {\r\n    if (listeners.has(eventName)) {\r\n      const eventListeners = [];\r\n      listeners.get(eventName).forEach(listener => void eventListeners.push(listener));\r\n      return eventListeners;\r\n    }\r\n  };\r\n\r\n  const getListenerCount = eventName => {\r\n    return listeners.has(eventName) ? listeners.get(eventName).size : 0;\r\n  };\r\n\r\n  const getEventNames = () => {\r\n    const eventNames = [];\r\n    listeners.forEach((listeners, eventName) => void eventNames.push(eventName));\r\n    return eventNames;\r\n  };\r\n\r\n  const emit = (eventName, ...args) => {\r\n    if (listeners.has(eventName)) {\r\n      listeners.get(eventName).forEach((listener, listenerId) => void invokeListener(listener, listenerId, args));\r\n    }\r\n  };\r\n\r\n  const invokeListener = (listener, listenerId, args) => {\r\n    try {\r\n      listener(...args);\r\n    } catch (e) {\r\n      console.error(`[observable.EventEmitter] error: ${valueTypes_cc.errorToString(e)}`);\r\n    } finally {\r\n      if (onceListeners.has(listener)) {\r\n        onceListeners.delete(listener);\r\n        removeListener(listenerId);\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    addListener,\r\n    addOnceListener,\r\n    removeListener,\r\n    removeAllListeners,\r\n    getListeners,\r\n    getListenerCount,\r\n    getEventNames,\r\n    emit,\r\n    on: addListener,\r\n    once: addOnceListener,\r\n    off: removeListener,\r\n    offAll: removeAllListeners\r\n  };\r\n}\r\nfunction mapEventListener(eventEmitter, eventName) {\r\n  return {\r\n    [`add${eventName}Listener`]: listener => eventEmitter.addListener(eventName, listener),\r\n    [`add${eventName}OnceListener`]: listener => eventEmitter.addOnceListener(eventName, listener),\r\n    [`remove${eventName}Listener`]: eventEmitter.removeListener,\r\n    [`removeAll${eventName}Listeners`]: () => eventEmitter.removeAllListeners(eventName),\r\n    [`get${eventName}ListenerCount`]: () => eventEmitter.getListenerCount(eventName),\r\n    [`get${eventName}Listeners`]: () => eventEmitter.getListeners(eventName),\r\n    [`emit${eventName}`]: () => eventEmitter.emit(eventName)\r\n  };\r\n}\r\n\r\nconst Observable = createObservable;\r\nObservable.from = toObservable;\r\n\r\nexports.EventEmitter = createEventEmitter;\r\nexports.Observable = Observable;\r\nexports.Task = createTask;\r\nexports.TaskTimeout = TaskTimeout;\r\nexports.mapEventListener = mapEventListener;\r\n"]}