{"version":3,"sources":["assets\\scripts\\buildSymbols.js"],"names":["setSymbol","colIndex","childIndex","symbolIndex","col","cc","find","child","getChildByName","sprite","getComponent","Sprite","spriteFrame","createSymbol","spacing","childName","Node","y","addChild","addComponent","sizeMode","SizeMode","RAW","buildSymbolCol","colTable","i","length","buildSymbols","symbolColTable","anchorsNode","colsNode","anchor","x","baseY","undefined","anchor1","Math","abs"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;AAEO,SAASA,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyCC,WAAzC,EAAsD;AAC3D,MAAMC,GAAG,GAAGC,EAAE,CAACC,IAAH,4CAAgDL,QAAQ,GAAG,CAA3D,EAAZ;AACA,MAAMM,KAAK,GAAGH,GAAG,CAACI,cAAJ,OAAsBN,UAAU,GAAG,CAAnC,EAAd;AACA,MAAMO,MAAM,GAAGF,KAAK,CAACG,YAAN,CAAmBL,EAAE,CAACM,MAAtB,CAAf;AACAF,EAAAA,MAAM,CAACG,WAAP,GAAqB,iCAAgBT,WAAhB,EAA6BS,WAAlD;AACD;;AAED,SAASC,YAAT,CAAsBT,GAAtB,EAA2BF,UAA3B,EAAuCC,WAAvC,EAAoDW,OAApD,EAA6D;AAC3D,MAAMC,SAAS,GAAGb,UAAU,GAAG,CAAb,QAAoBA,UAApB,SAAsCA,UAAU,GAAG,CAAnD,CAAlB;AACA,MAAIK,KAAK,GAAGH,GAAG,CAACI,cAAJ,CAAmBO,SAAnB,CAAZ;;AACA,MAAIR,KAAK,KAAK,IAAd,EAAoB;AAClBA,IAAAA,KAAK,GAAG,IAAIF,EAAE,CAACW,IAAP,CAAYD,SAAZ,CAAR;AACAR,IAAAA,KAAK,CAACU,CAAN,GAAUf,UAAU,GAAGY,OAAvB;AACAV,IAAAA,GAAG,CAACc,QAAJ,CAAaX,KAAb;AACD;;AAED,MAAIE,MAAM,GAAGF,KAAK,CAACG,YAAN,CAAmBL,EAAE,CAACM,MAAtB,CAAb;;AACA,MAAIF,MAAM,KAAK,IAAf,EAAqB;AACnBA,IAAAA,MAAM,GAAGF,KAAK,CAACY,YAAN,CAAmBd,EAAE,CAACM,MAAtB,CAAT;AACAF,IAAAA,MAAM,CAACW,QAAP,GAAkBf,EAAE,CAACM,MAAH,CAAUU,QAAV,CAAmBC,GAArC;AACD;;AACDb,EAAAA,MAAM,CAACG,WAAP,GAAqB,iCAAgBT,WAAhB,EAA6BS,WAAlD;AACD;;AAED,SAASW,cAAT,CAAwBC,QAAxB,EAAkCvB,QAAlC,EAA4Ca,OAA5C,EAAqD;AACnD,MAAMV,GAAG,GAAGC,EAAE,CAACC,IAAH,4CAAgDL,QAAQ,GAAG,CAA3D,EAAZ;;AACA,OAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxCZ,IAAAA,YAAY,CAACT,GAAD,EAAMqB,CAAN,EAASD,QAAQ,CAACC,CAAD,CAAjB,EAAsBX,OAAtB,CAAZ;AACD;AACF;;AAED,IAAMa,YAAY,GAAI,YAAY;AAChC,MAAIb,OAAJ;AAEA,SAAO,SAASa,YAAT,CAAsBC,cAAtB,EAAsC;AAC3C,QAAMC,WAAW,GAAGxB,EAAE,CAACC,IAAH,CAAQ,yCAAR,CAApB;AACA,QAAMwB,QAAQ,GAAGzB,EAAE,CAACC,IAAH,CAAQ,sCAAR,CAAjB;;AACA,SAAK,IAAImB,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,UAAMrB,GAAG,GAAG0B,QAAQ,CAACtB,cAAT,MAA2BiB,CAA3B,CAAZ;AACA,UAAMM,MAAM,GAAGF,WAAW,CAACrB,cAAZ,MAA8BiB,CAA9B,CAAf;AACArB,MAAAA,GAAG,CAAC4B,CAAJ,GAAQD,MAAM,CAACC,CAAf;AACA5B,MAAAA,GAAG,CAACa,CAAJ,GAAQc,MAAM,CAACvB,cAAP,CAAsB,GAAtB,EAA2BS,CAAnC;AACAb,MAAAA,GAAG,CAAC6B,KAAJ,GAAY7B,GAAG,CAACa,CAAhB;AACD;;AAED,QAAIH,OAAO,KAAKoB,SAAhB,EAA2B;AACzB,UAAMC,OAAO,GAAGN,WAAW,CAACrB,cAAZ,CAA2B,GAA3B,CAAhB;AACAM,MAAAA,OAAO,GAAGsB,IAAI,CAACC,GAAL,CAASF,OAAO,CAAC3B,cAAR,CAAuB,GAAvB,EAA4BS,CAA5B,GAAgCkB,OAAO,CAAC3B,cAAR,CAAuB,GAAvB,EAA4BS,CAArE,CAAV;AACD;;AAED,SAAK,IAAIQ,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGG,cAAc,CAACF,MAAnC,EAA2CD,EAAC,EAA5C,EAAgD;AAC9CF,MAAAA,cAAc,CAACK,cAAc,CAACH,EAAD,CAAf,EAAoBA,EAApB,EAAuBX,OAAvB,CAAd;AACD;AACF,GAnBD;AAoBD,CAvBoB,EAArB;;eAyBea","sourceRoot":"/","sourcesContent":["import getSymbolAnchor from './getSymbolAnchor';\nimport getSymbolSprite from './getSymbolSprite';\n\nexport function setSymbol(colIndex, childIndex, symbolIndex) {\n  const col = cc.find(`Canvas/Game/Machine/Performance/Cols/${colIndex + 1}`);\n  const child = col.getChildByName(`${childIndex + 1}`);\n  const sprite = child.getComponent(cc.Sprite);\n  sprite.spriteFrame = getSymbolSprite(symbolIndex).spriteFrame;\n}\n\nfunction createSymbol(col, childIndex, symbolIndex, spacing) {\n  const childName = childIndex < 0 ? `${childIndex}` : `${childIndex + 1}`;\n  let child = col.getChildByName(childName);\n  if (child === null) {\n    child = new cc.Node(childName);\n    child.y = childIndex * spacing;\n    col.addChild(child);\n  }\n\n  let sprite = child.getComponent(cc.Sprite);\n  if (sprite === null) {\n    sprite = child.addComponent(cc.Sprite);\n    sprite.sizeMode = cc.Sprite.SizeMode.RAW;\n  }\n  sprite.spriteFrame = getSymbolSprite(symbolIndex).spriteFrame;\n}\n\nfunction buildSymbolCol(colTable, colIndex, spacing) {\n  const col = cc.find(`Canvas/Game/Machine/Performance/Cols/${colIndex + 1}`);\n  for (let i = 0; i < colTable.length; i++) {\n    createSymbol(col, i, colTable[i], spacing);\n  }\n}\n\nconst buildSymbols = (function () {\n  let spacing;\n\n  return function buildSymbols(symbolColTable) {\n    const anchorsNode = cc.find('Canvas/Game/Machine/Performance/Anchors');\n    const colsNode = cc.find('Canvas/Game/Machine/Performance/Cols');\n    for (let i = 1; i <= 5; i++) {\n      const col = colsNode.getChildByName(`${i}`);\n      const anchor = anchorsNode.getChildByName(`${i}`);\n      col.x = anchor.x;\n      col.y = anchor.getChildByName('3').y;\n      col.baseY = col.y;\n    }\n\n    if (spacing === undefined) {\n      const anchor1 = anchorsNode.getChildByName('1');\n      spacing = Math.abs(anchor1.getChildByName('1').y - anchor1.getChildByName('2').y);\n    }\n\n    for (let i = 0; i < symbolColTable.length; i++) {\n      buildSymbolCol(symbolColTable[i], i, spacing);\n    }\n  };\n})();\n\nexport default buildSymbols;\n"]}